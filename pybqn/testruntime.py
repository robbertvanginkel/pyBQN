import inspect
import unittest
import math

from pybqn.provide import provides, make_prims, bqnstr
from pybqn.program import BQNError, Program, Array, call
from pybqn.precompiled import r0, r1, r


class RuntimeTest(unittest.TestCase):
    def test_r0(self):
        vm = Program(*r0(provides))
        self.assertIsNotNone(vm())

    def test_r1(self):
        runtime_0 = Program(*r0(provides))()
        runtime_1 = Program(*r1(provides, runtime_0))()
        self.assertIsNotNone(runtime_1)

    def test_runtime(self):
        self.assertIsNotNone(Program(*r(provides))())


class RuntimeBasedTestCase(unittest.TestCase):
    def setUp(self) -> None:
        self.runtime, set_prims, _ = Program(*r(provides))()
        decompose, prim_ind, glyph = make_prims(self.runtime)
        call(set_prims, Array([decompose, prim_ind]))

    def runcases(self, cases: dict[str, tuple[int | float | type[Exception], list]]):
        for case, (expected, input) in cases.items():
            with self.subTest(case=case):
                if inspect.isclass(expected) and issubclass(expected, Exception):
                    with self.assertRaises(expected):
                        self.assertEqual(Program(*input)(), expected)
                else:
                    out = Program(*input)()
                    self.assertEqual(out, expected)


class PrimitiveTests(RuntimeBasedTestCase):
    """https://github.com/mlochbaum/BQN/blob/f4b09b675386c789c8296c96874871916a3abdcf/test/cases/prim.bqn"""

    def test_layer0(self):
        runtime = self.runtime
        # fmt: off
        self.runcases({
            "0â‰¡Â¯2+2"                    : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[0],runtime[18],0,-2,2],[[0,1,0]],[[0,0]]]),
            "1e4â‰¡5e3+5e3"               : (1, [[0,3,0,0,0,3,17,0,1,0,2,17,7],[runtime[0],runtime[18],10000,5000],[[0,1,0]],[[0,0]]]),
            "'c'â‰¡'a'+2"                 : (1, [[0,2,0,0,0,4,17,0,1,0,3,17,7],[runtime[0],runtime[18],2,'c','a'],[[0,1,0]],[[0,0]]]),
            "'a'â‰¡Â¯2+'c'"                : (1, [[0,4,0,0,0,2,17,0,1,0,3,17,7],[runtime[0],runtime[18],-2,'a','c'],[[0,1,0]],[[0,0]]]),
            "'a'+'c'"                   : (BQNError, [[0,2,0,0,0,1,17,7],[runtime[0],'a','c'],[[0,1,0]],[[0,0]]]),
            "Fâ†-â‹„f+2"                   : (BQNError, [[0,1,33,0,0,48,6,0,2,0,0,34,0,0,17,7],[runtime[0],runtime[1],2],[[0,1,0]],[[0,1]]]),
            "Â¯4â‰¡+Â¯4"                    : (1, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[0],runtime[18],-4],[[0,1,0]],[[0,0]]]),
            "+'x'"                      : (BQNError, [[0,1,0,0,16,7],[runtime[0],'x'],[[0,1,0]],[[0,0]]]),
            "Fâ†-â‹„+f"                    : (BQNError, [[0,1,33,0,0,48,6,34,0,0,0,0,16,7],[runtime[0],runtime[1]],[[0,1,0]],[[0,1]]]),
            "Â¯âˆâ‰¡1e6-âˆ"                  : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[1],runtime[18],-math.inf,1000000,math.inf],[[0,1,0]],[[0,0]]]),
            "4â‰¡-Â¯4"                     : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[1],runtime[18],4,-4],[[0,1,0]],[[0,0]]]),
            "Â¯âˆâ‰¡-âˆ"                     : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[1],runtime[18],-math.inf,math.inf],[[0,1,0]],[[0,0]]]),
            "âˆâ‰¡-Â¯âˆ"                     : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[1],runtime[18],math.inf,-math.inf],[[0,1,0]],[[0,0]]]),
            "4â‰¡9-5"                     : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[1],runtime[18],4,9,5],[[0,1,0]],[[0,0]]]),
            "@â‰¡'a'-97"                  : (1, [[0,2,0,0,0,4,17,0,1,0,3,17,7],[runtime[1],runtime[18],97,'\0','a'],[[0,1,0]],[[0,0]]]),
            "3â‰¡'d'-'a'"                 : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[1],runtime[18],3,'d','a'],[[0,1,0]],[[0,0]]]),
            "'Q'â‰¡'q'+'A'-'a'"           : (1, [[0,6,0,1,0,5,17,0,0,0,4,17,0,2,0,3,17,7],[runtime[0],runtime[1],runtime[18],'Q','q','A','a'],[[0,1,0]],[[0,0]]]),
            "97-'a'"                    : (BQNError, [[0,2,0,0,0,1,17,7],[runtime[1],97,'a'],[[0,1,0]],[[0,0]]]),
            "@-1"                       : (BQNError, [[0,1,0,0,0,2,17,7],[runtime[1],1,'\0'],[[0,1,0]],[[0,0]]]),
            "-'a'"                      : (BQNError, [[0,1,0,0,16,7],[runtime[1],'a'],[[0,1,0]],[[0,0]]]),
            "Fâ†Ã·â‹„-f"                    : (BQNError, [[0,1,33,0,0,48,6,34,0,0,0,0,16,7],[runtime[1],runtime[3]],[[0,1,0]],[[0,1]]]),
            "1.5â‰¡3Ã—0.5"                 : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[2],runtime[18],1.5,3,0.5],[[0,1,0]],[[0,0]]]),
            "2Ã—'a'"                     : (BQNError, [[0,2,0,0,0,1,17,7],[runtime[2],2,'a'],[[0,1,0]],[[0,0]]]),
            "4â‰¡Ã·0.25"                   : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[3],runtime[18],4,0.25],[[0,1,0]],[[0,0]]]),
            "âˆâ‰¡Ã·0"                      : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[3],runtime[18],math.inf,0],[[0,1,0]],[[0,0]]]),
            "0â‰¡Ã·âˆ"                      : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[3],runtime[18],0,math.inf],[[0,1,0]],[[0,0]]]),
            "Ã·'b'"                      : (BQNError, [[0,1,0,0,16,7],[runtime[3],'b'],[[0,1,0]],[[0,0]]]),
            "Fâ†âˆš-â‹„Ã·f"                   : (BQNError, [[0,0,0,2,20,33,0,0,48,6,34,0,0,0,1,16,7],[runtime[1],runtime[3],runtime[5]],[[0,1,0]],[[0,1]]]),
            "1â‰¡â‹†0"                      : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[4],runtime[18],1,0],[[0,1,0]],[[0,0]]]),
            "Â¯1â‰¡Â¯1â‹†5"                   : (1, [[0,3,0,0,0,2,17,0,1,0,2,17,7],[runtime[4],runtime[18],-1,5],[[0,1,0]],[[0,0]]]),
            "1â‰¡Â¯1â‹†Â¯6"                   : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[4],runtime[18],1,-1,-6],[[0,1,0]],[[0,0]]]),
            "â‹†'Ï€'"                      : (BQNError, [[0,1,0,0,16,7],[runtime[4],'Ï€'],[[0,1,0]],[[0,0]]]),
            "'e'â‹†'Ï€'"                   : (BQNError, [[0,2,0,0,0,1,17,7],[runtime[4],'e','Ï€'],[[0,1,0]],[[0,0]]]),
            "3â‰¡âŒŠ3.9"                    : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[6],runtime[18],3,3.9],[[0,1,0]],[[0,0]]]),
            "Â¯4â‰¡âŒŠÂ¯3.9"                  : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[6],runtime[18],-4,-3.9],[[0,1,0]],[[0,0]]]),
            "âˆâ‰¡âŒŠâˆ"                      : (1, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[6],runtime[18],math.inf],[[0,1,0]],[[0,0]]]),
            "Â¯âˆâ‰¡âŒŠÂ¯âˆ"                    : (1, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[6],runtime[18],-math.inf],[[0,1,0]],[[0,0]]]),
            "Â¯1e30â‰¡âŒŠÂ¯1e30"              : (1, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[6],runtime[18],-1e30],[[0,1,0]],[[0,0]]]),
            "Fâ†âŒˆâ‹„âŒŠf"                    : (BQNError, [[0,1,33,0,0,48,6,34,0,0,0,0,16,7],[runtime[6],runtime[7]],[[0,1,0]],[[0,1]]]),
            "1â‰¡1=1"                     : (1, [[0,2,0,0,0,2,17,0,1,0,2,17,7],[runtime[15],runtime[18],1],[[0,1,0]],[[0,0]]]),
            "0â‰¡Â¯1=âˆ"                    : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[15],runtime[18],0,-1,math.inf],[[0,1,0]],[[0,0]]]),
            "1â‰¡'a'='a'"                 : (1, [[0,3,0,0,0,3,17,0,1,0,2,17,7],[runtime[15],runtime[18],1,'a'],[[0,1,0]],[[0,0]]]),
            "0â‰¡'a'='A'"                 : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[15],runtime[18],0,'a','A'],[[0,1,0]],[[0,0]]]),
            "1â‰¡{Fâ†+â‹„f=f}"               : (1, [[1,1,0,2,0,3,17,7,0,0,33,0,0,48,6,32,0,0,0,1,34,0,0,17,7],[runtime[0],runtime[15],runtime[18],1],[[0,1,0],[0,1,1]],[[0,0],[8,1]]]),
            "1â‰¡{aâ€¿bâ†âŸ¨+Â´,+Â´âŸ©â‹„a=b}"       : (1, [[1,1,0,2,0,4,17,7,0,3,0,0,26,0,3,0,0,26,11,2,33,0,0,33,0,1,12,2,48,6,34,0,1,0,1,34,0,0,17,7],[runtime[0],runtime[15],runtime[18],runtime[50],1],[[0,1,0],[0,1,1]],[[0,0],[8,2]]]),
            "0â‰¡{_opâ†{ğ•—}â‹„op='o'}"        : (1, [[1,1,0,1,0,2,17,7,1,2,33,0,0,48,6,0,3,0,0,34,0,0,17,7,34,0,1,7],[runtime[15],runtime[18],0,'o'],[[0,1,0],[0,1,1],[1,1,2]],[[0,0],[8,1],[24,2]]]),
            "0â‰¡{Fâ†{ğ•©}â‹„Gâ†{ğ•©}â‹„f=g}"       : (1, [[1,1,0,1,0,2,17,7,1,2,33,0,0,48,6,1,3,33,0,1,48,6,34,0,1,0,0,34,0,0,17,7,34,0,1,7,34,0,1,7],[runtime[15],runtime[18],0],[[0,1,0],[0,1,1],[0,0,2],[0,0,3]],[[0,0],[8,2],[32,3],[36,3]]]),
            "1â‰¡{Fâ†{ğ•©}â‹„f=f}"             : (1, [[1,1,0,1,0,2,17,7,1,2,33,0,0,48,6,32,0,0,0,0,34,0,0,17,7,34,0,1,7],[runtime[15],runtime[18],1],[[0,1,0],[0,1,1],[0,0,2]],[[0,0],[8,1],[25,3]]]),
            "1â‰¡1â‰¤1"                     : (1, [[0,2,0,0,0,2,17,0,1,0,2,17,7],[runtime[16],runtime[18],1],[[0,1,0]],[[0,0]]]),
            "1â‰¡Â¯âˆâ‰¤Â¯1e3"                 : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[16],runtime[18],1,-math.inf,-1000],[[0,1,0]],[[0,0]]]),
            "0â‰¡âˆâ‰¤Â¯âˆ"                    : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[16],runtime[18],0,math.inf,-math.inf],[[0,1,0]],[[0,0]]]),
            "1â‰¡âˆâ‰¤@"                     : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[16],runtime[18],1,math.inf,'\0'],[[0,1,0]],[[0,0]]]),
            "0â‰¡'z'â‰¤Â¯0.5"                : (1, [[0,3,0,0,0,4,17,0,1,0,2,17,7],[runtime[16],runtime[18],0,-0.5,'z'],[[0,1,0]],[[0,0]]]),
            "1â‰¡'a'â‰¤'a'"                 : (1, [[0,3,0,0,0,3,17,0,1,0,2,17,7],[runtime[16],runtime[18],1,'a'],[[0,1,0]],[[0,0]]]),
            "0â‰¡'c'â‰¤'a'"                 : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[16],runtime[18],0,'c','a'],[[0,1,0]],[[0,0]]]),
            "Fâ†+â‹„Gâ†-â‹„fâ‰¤g"               : (BQNError, [[0,0,33,0,0,48,6,0,1,33,0,1,48,6,34,0,1,0,2,34,0,0,17,7],[runtime[0],runtime[1],runtime[16]],[[0,1,0]],[[0,2]]]),
            "âŸ¨âŸ©â‰¡â‰¢<2"                    : (1, [[0,3,0,0,16,0,2,16,0,1,11,0,17,7],[runtime[12],runtime[18],runtime[19],2],[[0,1,0]],[[0,0]]]),
            'âŸ¨3âŸ©â‰¡â‰¢"abc"'                : (1, [[0,3,0,1,16,0,0,0,2,11,1,17,7],[runtime[18],runtime[19],3,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŸ¨2,3âŸ©â‰¡â‰¢>"abc"â€¿"fed"'       : (1, [[0,5,0,6,11,2,0,0,16,0,2,16,0,1,0,3,0,4,11,2,17,7],[runtime[13],runtime[18],runtime[19],2,3,bqnstr("abc"),bqnstr("fed")],[[0,1,0]],[[0,0]]]),
            'âŸ¨2,3,4,5âŸ©â‰¡â‰¢2â€¿3â€¿4â€¿5â¥Šâ†•120'   : (1, [[0,8,0,3,16,0,2,0,4,0,5,0,6,0,7,11,4,17,0,1,16,0,0,0,4,0,5,0,6,0,7,11,4,17,7],[runtime[18],runtime[19],runtime[22],runtime[28],2,3,4,5,120],[[0,1,0]],[[0,0]]]),
            'âŸ¨6âŸ©â‰¡â‰¢â¥Š>"abc"â€¿"fed"'        : (1, [[0,5,0,6,11,2,0,0,16,0,3,16,0,2,16,0,1,0,4,11,1,17,7],[runtime[13],runtime[18],runtime[19],runtime[22],6,bqnstr("abc"),bqnstr("fed")],[[0,1,0]],[[0,0]]]),
            '"abc"â‰¡0âŠ‘"abc"â€¿"de"'        : (1, [[0,3,0,4,11,2,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[37],0,bqnstr("abc"),bqnstr("de")],[[0,1,0]],[[0,0]]]),
            '"de"â‰¡1âŠ‘"abc"â€¿"de"'         : (1, [[0,4,0,3,11,2,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[37],1,bqnstr("de"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            "âŸ¨âŸ©â‰¡â†•0"                     : (1, [[0,2,0,1,16,0,0,11,0,17,7],[runtime[18],runtime[28],0],[[0,1,0]],[[0,0]]]),
            "âŸ¨0âŸ©â‰¡â†•1"                    : (1, [[0,3,0,1,16,0,0,0,2,11,1,17,7],[runtime[18],runtime[28],0,1],[[0,1,0]],[[0,0]]]),
            "âŸ¨0,1,2,3,4,5,6âŸ©â‰¡â†•7"        : (1, [[0,9,0,1,16,0,0,0,2,0,3,0,4,0,5,0,6,0,7,0,8,11,7,17,7],[runtime[18],runtime[28],0,1,2,3,4,5,6,7],[[0,1,0]],[[0,0]]]),
            "1â‰¡!1"                      : (1, [[0,2,0,1,16,0,0,0,2,17,7],[runtime[18],runtime[43],1],[[0,1,0]],[[0,0]]]),
            "1â‰¡'e'!1"				    : (1, [[0,2,0,1,0,3,17,0,0,0,2,17,7],[runtime[18],runtime[43],1,'e'],[[0,1,0]],[[0,0]]]),
            "!0"                        : (BQNError, [[0,1,0,0,16,7],[runtime[43],0],[[0,1,0]],[[0,0]]]),
            '"error"!"abc"'             : (BQNError, [[0,2,0,0,0,1,17,7],[runtime[43],bqnstr("error"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_layer1(self):
        runtime = self.runtime
        # fmt: off
        self.runcases({
            "3â‰¡4>â—¶+â€¿-1"                         : (1, [[0,7,0,0,0,1,11,2,0,4,0,2,27,0,6,17,0,3,0,5,17,7],[runtime[0],runtime[1],runtime[13],runtime[18],runtime[59],3,4,1],[[0,1,0]],[[0,0]]]),
            "3â‰¡4âŠ¢â—¶+â€¿-1"                         : (1, [[0,7,0,0,0,1,11,2,0,4,0,3,27,0,6,17,0,2,0,5,17,7],[runtime[0],runtime[1],runtime[18],runtime[21],runtime[59],3,4,1],[[0,1,0]],[[0,0]]]),
            "3â‰¡4 1â—¶+â€¿-1"                        : (1, [[0,6,0,0,0,1,11,2,0,3,0,6,27,0,5,17,0,2,0,4,17,7],[runtime[0],runtime[1],runtime[18],runtime[59],3,4,1],[[0,1,0]],[[0,0]]]),
            "5â‰¡4<â—¶+â€¿-1"                         : (1, [[0,7,0,0,0,1,11,2,0,4,0,2,27,0,6,17,0,3,0,5,17,7],[runtime[0],runtime[1],runtime[12],runtime[18],runtime[59],5,4,1],[[0,1,0]],[[0,0]]]),
            "5â‰¡4 0â—¶+â€¿-1"                        : (1, [[0,7,0,0,0,1,11,2,0,3,0,6,27,0,5,17,0,2,0,4,17,7],[runtime[0],runtime[1],runtime[18],runtime[59],5,4,0,1],[[0,1,0]],[[0,0]]]),
            "1â‰¡-âŠ˜0 Â¯1"                          : (1, [[0,5,0,4,0,2,0,0,27,16,0,1,0,3,17,7],[runtime[1],runtime[18],runtime[58],1,0,-1],[[0,1,0]],[[0,0]]]),
            "1â‰¡Â¯1-âŠ˜+2"                          : (1, [[0,6,0,0,0,3,0,1,27,0,5,17,0,2,0,4,17,7],[runtime[0],runtime[1],runtime[18],runtime[58],1,-1,2],[[0,1,0]],[[0,0]]]),
            '"abc"â‰¡âŠ¢"abc"'                      : (1, [[0,2,0,1,16,0,0,0,2,17,7],[runtime[18],runtime[21],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '""â‰¡3âŠ¢""'                           : (1, [[0,3,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[21],3,bqnstr("")],[[0,1,0]],[[0,0]]]),
            "âŸ¨âŸ©â‰¡âŠ£âŸ¨âŸ©"                            : (1, [[11,0,0,1,16,0,0,11,0,17,7],[runtime[18],runtime[20]],[[0,1,0]],[[0,0]]]),
            '"ab"â‰¡"ab"âŠ£âŸ¨âŸ©'                      : (1, [[11,0,0,1,0,2,17,0,0,0,2,17,7],[runtime[18],runtime[20],bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            "4â‰¡+Ëœ2"                             : (1, [[0,4,0,2,0,0,26,16,0,1,0,3,17,7],[runtime[0],runtime[18],runtime[45],4,2],[[0,1,0]],[[0,0]]]),
            "3â‰¡1-Ëœ4"                            : (1, [[0,5,0,2,0,0,26,0,4,17,0,1,0,3,17,7],[runtime[1],runtime[18],runtime[45],3,1,4],[[0,1,0]],[[0,0]]]),
            "1â‰¡-âˆ˜Ã—Â¯6"                           : (1, [[0,5,0,1,0,3,0,0,27,16,0,2,0,4,17,7],[runtime[1],runtime[2],runtime[18],runtime[53],1,-6],[[0,1,0]],[[0,0]]]),
            "Â¯6â‰¡2-âˆ˜Ã—3"                          : (1, [[0,6,0,1,0,3,0,0,27,0,5,17,0,2,0,4,17,7],[runtime[1],runtime[2],runtime[18],runtime[53],-6,2,3],[[0,1,0]],[[0,0]]]),
            "1â‰¡-â—‹Ã—Â¯7"                           : (1, [[0,5,0,1,0,3,0,0,27,16,0,2,0,4,17,7],[runtime[1],runtime[2],runtime[18],runtime[54],1,-7],[[0,1,0]],[[0,0]]]),
            "2â‰¡5-â—‹Ã—Â¯7"                          : (1, [[0,6,0,1,0,3,0,0,27,0,5,17,0,2,0,4,17,7],[runtime[1],runtime[2],runtime[18],runtime[54],2,5,-7],[[0,1,0]],[[0,0]]]),
            "Â¯20â‰¡1âŠ¸-âŠ¸Ã—5"                        : (1, [[0,6,0,1,0,3,0,0,0,3,0,5,27,27,16,0,2,0,4,17,7],[runtime[1],runtime[2],runtime[18],runtime[55],-20,1,5],[[0,1,0]],[[0,0]]]),
            '(0â€¿2+âŒœ0â€¿1)â‰¡(>âŸ¨"ab","cd"âŸ©)â‰¢âŠ¸â¥Šâ†•4'    : (1, [[0,11,0,5,16,0,4,0,7,0,3,27,0,12,0,13,11,2,0,1,16,17,0,2,0,8,0,10,11,2,0,6,0,0,26,0,8,0,9,11,2,17,17,7],[runtime[0],runtime[13],runtime[18],runtime[19],runtime[22],runtime[28],runtime[48],runtime[55],0,2,1,4,bqnstr("ab"),bqnstr("cd")],[[0,1,0]],[[0,0]]]),
            "20â‰¡Ã—âŸœ(-âŸœ1)5"                       : (1, [[0,6,0,5,0,3,0,0,27,0,3,0,1,27,16,0,2,0,4,17,7],[runtime[1],runtime[2],runtime[18],runtime[56],20,1,5],[[0,1,0]],[[0,0]]]),
            "4â‰¡5+âŸœÃ—Â¯3"                          : (1, [[0,6,0,1,0,3,0,0,27,0,5,17,0,2,0,4,17,7],[runtime[0],runtime[2],runtime[18],runtime[56],4,5,-3],[[0,1,0]],[[0,0]]]),
            "7â‰¡5+âŸœ2 Â¯3"                         : (1, [[0,6,0,5,0,2,0,0,27,0,4,17,0,1,0,3,17,7],[runtime[0],runtime[18],runtime[56],7,5,2,-3],[[0,1,0]],[[0,0]]]),
            "2â‰¡âˆš4"                              : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[5],runtime[18],2,4],[[0,1,0]],[[0,0]]]),
            "3â‰¡3âˆš27"                            : (1, [[0,3,0,0,0,2,17,0,1,0,2,17,7],[runtime[5],runtime[18],3,27],[[0,1,0]],[[0,0]]]),
            "âˆš'x'"                              : (BQNError,[[0,1,0,0,16,7],[runtime[5],'x'],[[0,1,0]],[[0,0]]]),
            "6â‰¡2âˆ§3"                             : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[10],runtime[18],6,2,3],[[0,1,0]],[[0,0]]]),
            "0â‰¡Â¯2âˆ§0"                            : (1, [[0,2,0,0,0,3,17,0,1,0,2,17,7],[runtime[10],runtime[18],0,-2],[[0,1,0]],[[0,0]]]),
            "'a'âˆ§Â¯1"                            : (BQNError,[[0,1,0,0,0,2,17,7],[runtime[10],-1,'a'],[[0,1,0]],[[0,0]]]),
            "0.75â‰¡âˆ¨Ëœ0.5"                        : (1, [[0,4,0,2,0,0,26,16,0,1,0,3,17,7],[runtime[11],runtime[18],runtime[45],0.75,0.5],[[0,1,0]],[[0,0]]]),
            "1.75â‰¡2âˆ¨0.25"                       : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[11],runtime[18],1.75,2,0.25],[[0,1,0]],[[0,0]]]),
            "Fâ†-â‹„2âˆ¨f"                           : (BQNError,[[0,0,33,0,0,48,6,34,0,0,0,1,0,2,17,7],[runtime[1],runtime[11],2],[[0,1,0]],[[0,1]]]),
            "0â‰¡Â¬1"                              : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[9],runtime[18],0,1],[[0,1,0]],[[0,0]]]),
            "1â‰¡Â¬0"                              : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[9],runtime[18],1,0],[[0,1,0]],[[0,0]]]),
            "2â‰¡Â¬Â¯1"                             : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[9],runtime[18],2,-1],[[0,1,0]],[[0,0]]]),
            "Â¬'a'"                              : (BQNError,[[0,1,0,0,16,7],[runtime[9],'a'],[[0,1,0]],[[0,0]]]),
            "0â‰¡3Â¬4"                             : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[9],runtime[18],0,3,4],[[0,1,0]],[[0,0]]]),
            "2â‰¡4Â¬3"                             : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[9],runtime[18],2,4,3],[[0,1,0]],[[0,0]]]),
            "4â‰¡5Â¬2"                             : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[9],runtime[18],4,5,2],[[0,1,0]],[[0,0]]]),
            "5â‰¡'g'Â¬'c'"                         : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[9],runtime[18],5,'g','c'],[[0,1,0]],[[0,0]]]),
            "'b'â‰¡'c'Â¬2"                         : (1, [[0,2,0,0,0,4,17,0,1,0,3,17,7],[runtime[9],runtime[18],2,'b','c'],[[0,1,0]],[[0,0]]]),
            "2Â¬'c'"                             : (BQNError,[[0,2,0,0,0,1,17,7],[runtime[9],2,'c'],[[0,1,0]],[[0,0]]]),
            "Fâ†{ğ•©}â‹„0Â¬f"                         : (BQNError,[[1,1,33,0,0,48,6,34,0,0,0,0,0,1,17,7,34,0,1,7],[runtime[9],0],[[0,1,0],[0,0,1]],[[0,1],[16,3]]]),
            "0â‰¡|0"                              : (1, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[8],runtime[18],0],[[0,1,0]],[[0,0]]]),
            "5â‰¡|Â¯5"                             : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[8],runtime[18],5,-5],[[0,1,0]],[[0,0]]]),
            "6â‰¡|6"                              : (1, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[8],runtime[18],6],[[0,1,0]],[[0,0]]]),
            "âˆâ‰¡|Â¯âˆ"                             : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[8],runtime[18],math.inf,-math.inf],[[0,1,0]],[[0,0]]]),
            "Fâ†+-â‹„|f"                           : (BQNError,[[0,1,0,0,20,33,0,0,48,6,34,0,0,0,2,16,7],[runtime[0],runtime[1],runtime[8]],[[0,1,0]],[[0,1]]]),
            "2â‰¡3|8"                             : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[8],runtime[18],2,3,8],[[0,1,0]],[[0,0]]]),
            "2â‰¡3|Â¯7"                            : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[8],runtime[18],2,3,-7],[[0,1,0]],[[0,0]]]),
            "Â¯1â‰¡Â¯3|8"                           : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[8],runtime[18],-1,-3,8],[[0,1,0]],[[0,0]]]),
            "26|'A'"                            : (BQNError,[[0,2,0,0,0,1,17,7],[runtime[8],26,'A'],[[0,1,0]],[[0,0]]]),
            '"a"â‰¡â¥Š<\'a\''                       : (1, [[0,3,0,0,16,0,2,16,0,1,0,4,17,7],[runtime[12],runtime[18],runtime[22],'a',bqnstr("a")],[[0,1,0]],[[0,0]]]),
            '"abcd"â‰¡âŠ‘<"abcd"'                   : (1, [[0,3,0,0,16,0,2,16,0,1,0,3,17,7],[runtime[12],runtime[18],runtime[37],bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            "0â‰¡5>5"                             : (1, [[0,3,0,0,0,3,17,0,1,0,2,17,7],[runtime[13],runtime[18],0,5],[[0,1,0]],[[0,0]]]),
            "0â‰¡3â‰¥4"                             : (1, [[0,4,0,0,0,3,17,0,1,0,2,17,7],[runtime[17],runtime[18],0,3,4],[[0,1,0]],[[0,0]]]),
            '0â‰¡â‰ ""'                             : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[14],runtime[18],0,bqnstr("")],[[0,1,0]],[[0,0]]]),
            '1â‰¡â‰ "a"'                            : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[14],runtime[18],1,bqnstr("a")],[[0,1,0]],[[0,0]]]),
            "1â‰¡â‰ 'a'"                            : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[14],runtime[18],1,'a'],[[0,1,0]],[[0,0]]]),
            '2â‰¡â‰ "ab"'                           : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[14],runtime[18],2,bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            "25â‰¡â‰ â†•25"                           : (1, [[0,3,0,2,16,0,0,16,0,1,0,3,17,7],[runtime[14],runtime[18],runtime[28],25],[[0,1,0]],[[0,0]]]),
            "1â‰¡Ã—5"                              : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[2],runtime[18],1,5],[[0,1,0]],[[0,0]]]),
            "Â¯1â‰¡Ã—Â¯2.5"                          : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[2],runtime[18],-1,-2.5],[[0,1,0]],[[0,0]]]),
            "3â‰¡3âŒŠ4"                             : (1, [[0,3,0,0,0,2,17,0,1,0,2,17,7],[runtime[6],runtime[18],3,4],[[0,1,0]],[[0,0]]]),
            "Â¯3â‰¡Â¯3âŒŠâˆ"                           : (1, [[0,3,0,0,0,2,17,0,1,0,2,17,7],[runtime[6],runtime[18],-3,math.inf],[[0,1,0]],[[0,0]]]),
            "4â‰¡3âŒˆ4"                             : (1, [[0,2,0,0,0,3,17,0,1,0,2,17,7],[runtime[7],runtime[18],4,3],[[0,1,0]],[[0,0]]]),
            "1â‰¡1âŒˆÂ¯1"                            : (1, [[0,3,0,0,0,2,17,0,1,0,2,17,7],[runtime[7],runtime[18],1,-1],[[0,1,0]],[[0,0]]]),
            "5â‰¡âŒˆ4.01"                           : (1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[7],runtime[18],5,4.01],[[0,1,0]],[[0,0]]]),
            "âŸ¨âŸ©â‰¡â‰¢'a'"                           : (1, [[0,2,0,1,16,0,0,11,0,17,7],[runtime[18],runtime[19],'a'],[[0,1,0]],[[0,0]]]),
            "âŸ¨âŸ©â‰¡â‰¢0"                             : (1, [[0,2,0,1,16,0,0,11,0,17,7],[runtime[18],runtime[19],0],[[0,1,0]],[[0,0]]]),
            "âŸ¨0âŸ©â€¿âŸ¨1âŸ©â€¿âŸ¨2âŸ©â‰¡â¥ŠÂ¨â†•3"                  : (1, [[0,7,0,2,16,0,3,0,1,26,16,0,0,0,4,11,1,0,5,11,1,0,6,11,1,11,3,17,7],[runtime[18],runtime[22],runtime[28],runtime[47],0,1,2,3],[[0,1,0]],[[0,0]]]),
            '(â†•6)â‰¡âŸœ(â‰ Â¨)â—‹(2â€¿3âŠ¸â¥Š)âŸ¨âŸ©â€¿"a"â€¿"ab"â€¿"abc"â€¿"abcd"â€¿"abcde"â€¿"abcdef"' : (1, [[11,0,0,11,0,12,0,13,0,14,0,15,0,16,11,7,0,2,0,6,0,9,0,10,11,2,27,0,5,0,4,0,0,26,0,7,0,1,27,27,0,8,0,3,16,17,7],[runtime[14],runtime[18],runtime[22],runtime[28],runtime[47],runtime[54],runtime[55],runtime[56],6,2,3,bqnstr("a"),bqnstr("ab"),bqnstr("abc"),bqnstr("abcd"),bqnstr("abcde"),bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            "â‰¡âŸœ(â‰ Â¨)4â€¿0â€¿2â¥Šâ†•0"                    : (1, [[0,7,0,3,16,0,2,0,6,0,7,0,8,11,3,17,0,4,0,0,26,0,5,0,1,27,16,7],[runtime[14],runtime[18],runtime[22],runtime[28],runtime[47],runtime[56],4,0,2],[[0,1,0]],[[0,0]]]),
            "6â‰¡+Â´â†•4"                            : (1, [[0,5,0,2,16,0,3,0,0,26,16,0,1,0,4,17,7],[runtime[0],runtime[18],runtime[28],runtime[50],6,4],[[0,1,0]],[[0,0]]]),
            '(âŠ‘â‰¡âŠ£Â´)"a"â€¿2â€¿(3â€¿"d")'               : (1, [[0,6,0,4,0,5,0,7,11,2,11,3,0,3,0,1,26,0,0,0,2,21,16,7],[runtime[18],runtime[20],runtime[37],runtime[50],2,3,bqnstr("a"),bqnstr("d")],[[0,1,0]],[[0,0]]]),
            '0(âŠ‘â‰¡âŠ£Â´)"a"â€¿2â€¿(3â€¿"d")'              : (1, [[0,7,0,5,0,6,0,8,11,2,11,3,0,3,0,1,26,0,0,0,2,21,0,4,17,7],[runtime[18],runtime[20],runtime[37],runtime[50],0,2,3,bqnstr("a"),bqnstr("d")],[[0,1,0]],[[0,0]]]),
            '(2âŠ¸âŠ‘â‰¡âŠ¢Â´)"a"â€¿2â€¿(3â€¿"d")'             : (1, [[0,7,0,5,0,6,0,8,11,2,11,3,0,3,0,1,26,0,0,0,2,0,4,0,5,27,21,16,7],[runtime[18],runtime[21],runtime[37],runtime[50],runtime[55],2,3,bqnstr("a"),bqnstr("d")],[[0,1,0]],[[0,0]]]),
            'âŠ‘""'                               : (BQNError,[[0,1,0,0,16,7],[runtime[37],bqnstr("")],[[0,1,0]],[[0,0]]]),
            "âŠ‘2â€¿0â¥ŠâŸ¨âŸ©"                           : (BQNError,[[11,0,0,0,0,2,0,3,11,2,17,0,1,16,7],[runtime[22],runtime[37],2,0],[[0,1,0]],[[0,0]]]),
            '2(âŠ£â‰¡âŠ¢Â´)"a"â€¿2â€¿(3â€¿"d")'              : (1, [[0,6,0,4,0,5,0,7,11,2,11,3,0,3,0,2,26,0,0,0,1,21,0,4,17,7],[runtime[18],runtime[20],runtime[21],runtime[50],2,3,bqnstr("a"),bqnstr("d")],[[0,1,0]],[[0,0]]]),
            "7â€¿10â‰¡+Â¨Â´âŸ¨âŸ¨2,3âŸ©,âŸ¨5,7âŸ©âŸ©"             : (1, [[0,6,0,7,11,2,0,8,0,4,11,2,11,2,0,3,0,2,0,0,26,26,16,0,1,0,4,0,5,11,2,17,7],[runtime[0],runtime[18],runtime[47],runtime[50],7,10,2,3,5],[[0,1,0]],[[0,0]]]),
            "+Â´11"                              : (BQNError,[[0,2,0,1,0,0,26,16,7],[runtime[0],runtime[50],11],[[0,1,0]],[[0,0]]]),
            "-Â´<'a'"                            : (BQNError,[[0,3,0,1,16,0,2,0,0,26,16,7],[runtime[1],runtime[12],runtime[50],'a'],[[0,1,0]],[[0,0]]]),
            'Ã—Â´3â€¿1â¥Š"abc"'                       : (BQNError,[[0,5,0,1,0,3,0,4,11,2,17,0,2,0,0,26,16,7],[runtime[2],runtime[22],runtime[50],3,1,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_layer2(self):
        runtime = self.runtime
        # fmt: off
        self.runcases({
            'âŸ¨âŸ©â‰¡âŸ¨âŸ©âˆ¾""'                                                              : (1, [[0,2,0,1,11,0,17,0,0,11,0,17,7],[runtime[18],runtime[23],bqnstr("")],[[0,1,0]],[[0,0]]]),
            '"a"â‰¡âŸ¨âŸ©âˆ¾"a"'                                                            : (1, [[0,2,0,1,11,0,17,0,0,0,2,17,7],[runtime[18],runtime[23],bqnstr("a")],[[0,1,0]],[[0,0]]]),
            '"a"â‰¡"a"âˆ¾âŸ¨âŸ©'                                                            : (1, [[11,0,0,1,0,2,17,0,0,0,2,17,7],[runtime[18],runtime[23],bqnstr("a")],[[0,1,0]],[[0,0]]]),
            '"aBCD"â‰¡"a"âˆ¾"BCD"'                                                      : (1, [[0,4,0,1,0,3,17,0,0,0,2,17,7],[runtime[18],runtime[23],bqnstr("aBCD"),bqnstr("a"),bqnstr("BCD")],[[0,1,0]],[[0,0]]]),
            '((+âŒœËœâ‰ Â¨)â‰¡(â‰ Â¨âˆ¾âŒœËœ))""â€¿âŸ¨2,3âŸ©â€¿"abcde"'                                     : (1, [[0,9,0,7,0,8,11,2,0,10,11,3,0,4,0,6,0,3,26,26,0,5,0,1,26,20,0,2,0,5,0,1,26,0,4,0,6,0,0,26,26,20,21,16,7],[runtime[0],runtime[14],runtime[18],runtime[23],runtime[45],runtime[47],runtime[48],2,3,bqnstr(""),bqnstr("abcde")],[[0,1,0]],[[0,0]]]),
            "(â¥ŠâŸœ(â†•Ã—Â´)â‰¡(Ã—âŸœ4)âŠ¸(+âŒœ)â—‹â†•Â´)3â€¿4"                                            : (1, [[0,11,0,10,11,2,0,6,0,4,0,7,0,5,0,0,26,0,8,0,10,0,9,0,1,27,27,27,26,0,2,0,6,0,1,26,0,4,20,0,9,0,3,27,21,16,7],[runtime[0],runtime[2],runtime[18],runtime[22],runtime[28],runtime[48],runtime[50],runtime[54],runtime[55],runtime[56],4,3],[[0,1,0]],[[0,0]]]),
            "(â¥ŠâŸœ(â†•Ã—Â´)â‰¡(Ã—âŸœ4)âŠ¸(+âŒœ)â—‹â†•Â´)0â€¿4"                                            : (1, [[0,11,0,10,11,2,0,6,0,4,0,7,0,5,0,0,26,0,8,0,10,0,9,0,1,27,27,27,26,0,2,0,6,0,1,26,0,4,20,0,9,0,3,27,21,16,7],[runtime[0],runtime[2],runtime[18],runtime[22],runtime[28],runtime[48],runtime[50],runtime[54],runtime[55],runtime[56],4,0],[[0,1,0]],[[0,0]]]),
            '(3â€¿2â€¿0â¥Š"")â‰¡(3â€¿2â¥Šâ†•6)+âŒœ""'                                               : (1, [[0,9,0,4,0,0,26,0,8,0,3,16,0,2,0,5,0,6,11,2,17,17,0,1,0,9,0,2,0,5,0,6,0,7,11,3,17,17,7],[runtime[0],runtime[18],runtime[22],runtime[28],runtime[48],3,2,0,6,bqnstr("")],[[0,1,0]],[[0,0]]]),
            "(<-2)â‰¡-Â¨2"                                                             : (1, [[0,4,0,3,0,0,26,16,0,2,0,4,0,0,16,0,1,16,17,7],[runtime[1],runtime[12],runtime[18],runtime[47],2],[[0,1,0]],[[0,0]]]),
            "(<<2)â‰¡<Â¨2"                                                             : (1, [[0,3,0,2,0,0,26,16,0,1,0,3,0,0,16,0,0,16,17,7],[runtime[12],runtime[18],runtime[47],2],[[0,1,0]],[[0,0]]]),
            "âŸ¨1,âŸ¨3,2,2â€¿2â¥ŠâŸ¨1,0,2,0âŸ©âŸ©,âŸ¨5,4âŸ©âŸ©â‰¡-âŸ¨-1,âŸ¨-3,-2,-Â¨2â€¿2â¥ŠâŸ¨1,0,2,0âŸ©âŸ©,âŸ¨-5,-4âŸ©âŸ©"   : (1, [[0,4,0,0,16,0,5,0,0,16,0,6,0,0,16,0,4,0,7,0,6,0,7,11,4,0,2,0,6,0,6,11,2,17,0,3,0,0,26,16,11,3,0,8,0,0,16,0,9,0,0,16,11,2,11,3,0,0,16,0,1,0,4,0,5,0,6,0,4,0,7,0,6,0,7,11,4,0,2,0,6,0,6,11,2,17,11,3,0,8,0,9,11,2,11,3,17,7],[runtime[1],runtime[18],runtime[22],runtime[47],1,3,2,0,5,4],[[0,1,0]],[[0,0]]]),
            "3(+Â¨â‰¡+âŒœ)â†•6"                                                            : (1, [[0,6,0,2,16,0,4,0,0,26,0,1,0,3,0,0,26,21,0,5,17,7],[runtime[0],runtime[18],runtime[28],runtime[47],runtime[48],3,6],[[0,1,0]],[[0,0]]]),
            "2â€¿3âŠ¢Â¨4â€¿5â€¿6"                                                            : (BQNError, [[0,4,0,5,0,6,11,3,0,1,0,0,26,0,2,0,3,11,2,17,7],[runtime[21],runtime[47],2,3,4,5,6],[[0,1,0]],[[0,0]]]),
            '"abcd"-"a"'                                                            :  (BQNError, [[0,2,0,0,0,1,17,7],[runtime[1],bqnstr("abcd"),bqnstr("a")],[[0,1,0]],[[0,0]]]),
            "3â€¿4â€¿5â€¿6â€¿6â‰¡{ğ•ŠâŸ(Ã—â‰¡)âŠ¸âˆ¾âŸœâ¥ŠÂ´ğ•©}âŸ¨2,1âŸ©+âŸ¨âŸ¨âŸ¨âŸ¨1,2âŸ©,3âŸ©,4âŸ©,5âŸ©"                       : (1, [[0,14,0,13,11,2,0,9,11,2,0,10,11,2,0,11,11,2,0,0,0,13,0,14,11,2,17,1,1,16,0,2,0,9,0,10,0,11,0,12,0,12,11,5,17,7,34,0,1,0,5,0,3,0,7,0,4,0,6,0,2,0,1,20,0,8,34,0,0,27,27,27,26,16,7],[runtime[0],runtime[2],runtime[18],runtime[22],runtime[23],runtime[50],runtime[55],runtime[56],runtime[62],3,4,5,6,2,1],[[0,1,0],[0,0,1]],[[0,0],[46,3]]]),
            "3â€¿2â‰¡â‰¢(â†•3)(âŠ£Ã—âŠ¢âŒœ)â†•2"                                                     : (1, [[0,8,0,5,16,0,6,0,4,26,0,0,0,3,21,0,7,0,5,16,17,0,2,16,0,1,0,7,0,8,11,2,17,7],[runtime[2],runtime[18],runtime[19],runtime[20],runtime[21],runtime[28],runtime[48],3,2],[[0,1,0]],[[0,0]]]),
            "(<-4)â‰¡-<4"                                                             : (1, [[0,3,0,1,16,0,0,16,0,2,0,3,0,0,16,0,1,16,17,7],[runtime[1],runtime[12],runtime[18],4],[[0,1,0]],[[0,0]]]),
            "(<2)â‰¡1+<1"                                                             : (1, [[0,4,0,1,16,0,0,0,4,17,0,2,0,3,0,1,16,17,7],[runtime[0],runtime[12],runtime[18],2,1],[[0,1,0]],[[0,0]]]),
            "(â†•4)Ã—(â†•3)âŠ¢âŒœâ†•2"                                                         : (BQNError, [[0,6,0,2,16,0,3,0,1,26,0,5,0,2,16,17,0,0,0,4,0,2,16,17,7],[runtime[2],runtime[21],runtime[28],runtime[48],4,3,2],[[0,1,0]],[[0,0]]]),
            "(=Â¨âŸœ(â¥ŠâŸœ(â†•Ã—Â´)3â€¿4)â‰¡(â†•4)=âŒœËœ4|âŠ¢)1â€¿6â€¿8"                                     : (1, [[0,14,0,15,0,16,11,3,0,4,0,1,0,13,21,0,7,0,9,0,2,26,26,0,13,0,6,16,21,0,3,0,12,0,13,11,2,0,10,0,0,26,0,6,20,0,11,0,5,27,16,0,11,0,8,0,2,26,27,21,16,7],[runtime[2],runtime[8],runtime[15],runtime[18],runtime[21],runtime[22],runtime[28],runtime[45],runtime[47],runtime[48],runtime[50],runtime[56],3,4,1,6,8],[[0,1,0]],[[0,0]]]),
            "0â€¿1â‰¡+â€¿-=âŠ‘âŸ¨-âŸ©"                                                          : (1, [[0,1,11,1,0,4,16,0,2,0,0,0,1,11,2,17,0,3,0,5,0,6,11,2,17,7],[runtime[0],runtime[1],runtime[15],runtime[18],runtime[37],0,1],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_layer3(self):
        runtime = self.runtime
        # fmt: off
        self.runcases({
            '2â‰¡âŠ‘2'                                      :(1, [[0,2,0,1,16,0,0,0,2,17,7],[runtime[18],runtime[37],2],[[0,1,0]],[[0,0]]]),
            '2â‰¡âŠ‘âŸ¨2âŸ©'                                    :(1, [[0,2,11,1,0,1,16,0,0,0,2,17,7],[runtime[18],runtime[37],2],[[0,1,0]],[[0,0]]]),
            '"ab"â‰¡âŠ‘âŸ¨"ab"âŸ©'                              :(1, [[0,2,11,1,0,1,16,0,0,0,2,17,7],[runtime[18],runtime[37],bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '0â‰¡âŠ‘â†•20'                                    :(1, [[0,4,0,1,16,0,2,16,0,0,0,3,17,7],[runtime[18],runtime[28],runtime[37],0,20],[[0,1,0]],[[0,0]]]),
            '4â‰¡âŠ‘3â€¿2â€¿1â¥Š4â¥ŠâŠ¸âˆ¾5â¥Š0'                          :(1, [[0,10,0,1,0,9,17,0,2,0,4,0,1,27,0,5,17,0,1,0,6,0,7,0,8,11,3,17,0,3,16,0,0,0,5,17,7],[runtime[18],runtime[22],runtime[23],runtime[37],runtime[55],4,3,2,1,5,0],[[0,1,0]],[[0,0]]]),
            '\'c\'â‰¡2âŠ‘"abcd"'                            :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[37],2,'c',bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '\'c\'â‰¡Â¯2âŠ‘"abcd"'                           :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[37],-2,'c',bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '7â‰¡7âŠ‘â†•10'                                   :(1, [[0,4,0,1,16,0,2,0,3,17,0,0,0,3,17,7],[runtime[18],runtime[28],runtime[37],7,10],[[0,1,0]],[[0,0]]]),
            '7â‰¡âŸ¨7âŸ©âŠ‘â†•10'                                 :(1, [[0,4,0,1,16,0,2,0,3,11,1,17,0,0,0,3,17,7],[runtime[18],runtime[28],runtime[37],7,10],[[0,1,0]],[[0,0]]]),
            '0â‰¡Â¯10âŠ‘â†•10'                                 :(1, [[0,5,0,1,16,0,2,0,4,17,0,0,0,3,17,7],[runtime[18],runtime[28],runtime[37],0,-10,10],[[0,1,0]],[[0,0]]]),
            '10âŠ‘â†•10'                                    :(BQNError, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[28],runtime[37],10],[[0,1,0]],[[0,0]]]),
            'Â¯11âŠ‘â†•10'                                   :(BQNError, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[28],runtime[37],-11,10],[[0,1,0]],[[0,0]]]),
            '0.5âŠ‘â†•10'                                   :(BQNError, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[28],runtime[37],0.5,10],[[0,1,0]],[[0,0]]]),
            "'x'âŠ‘â†•10"                                   :(BQNError, [[0,2,0,0,16,0,1,0,3,17,7],[runtime[28],runtime[37],10,'x'],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©âŠ‘â†•10'                                    :(BQNError, [[0,2,0,0,16,0,1,11,0,17,7],[runtime[28],runtime[37],10],[[0,1,0]],[[0,0]]]),
            '21â‰¡2â€¿Â¯3âŠ‘(10Ã—â†•3)+âŒœâ†•4'                       :(1, [[0,11,0,3,16,0,5,0,0,26,0,10,0,3,16,0,1,0,9,17,17,0,4,0,7,0,8,11,2,17,0,2,0,6,17,7],[runtime[0],runtime[2],runtime[18],runtime[28],runtime[37],runtime[48],21,2,-3,10,3,4],[[0,1,0]],[[0,0]]]),
            '2âŠ‘3+âŒœâ—‹â†•4'                                  :(BQNError, [[0,7,0,1,0,4,0,3,0,0,26,27,0,6,17,0,2,0,5,17,7],[runtime[0],runtime[28],runtime[37],runtime[48],runtime[54],2,3,4],[[0,1,0]],[[0,0]]]),
            '21â€¿12â€¿03â‰¡âŸ¨2â€¿Â¯3,1â€¿2,0â€¿Â¯1âŸ©âŠ‘(10Ã—â†•3)+âŒœâ†•4'      :(1, [[0,15,0,3,16,0,5,0,0,26,0,8,0,3,16,0,1,0,14,17,17,0,4,0,9,0,10,11,2,0,11,0,9,11,2,0,12,0,13,11,2,11,3,17,0,2,0,6,0,7,0,8,11,3,17,7],[runtime[0],runtime[2],runtime[18],runtime[28],runtime[37],runtime[48],21,12,3,2,-3,1,0,-1,10,4],[[0,1,0]],[[0,0]]]),
            '21â€¿12â€¿03â‰¡âŸ¨2â€¿Â¯3â€¿0,1â€¿2,0â€¿Â¯1âŸ©âŠ‘(10Ã—â†•3)+âŒœâ†•4'    :(BQNError, [[0,15,0,3,16,0,5,0,0,26,0,8,0,3,16,0,1,0,14,17,17,0,4,0,9,0,10,0,11,11,3,0,12,0,9,11,2,0,11,0,13,11,2,11,3,17,0,2,0,6,0,7,0,8,11,3,17,7],[runtime[0],runtime[2],runtime[18],runtime[28],runtime[37],runtime[48],21,12,3,2,-3,0,1,-1,10,4],[[0,1,0]],[[0,0]]]),
            'âŸ¨2,âŸ¨3âŸ©âŸ©âŠ‘â†•4'                                :(BQNError, [[0,4,0,0,16,0,1,0,2,0,3,11,1,11,2,17,7],[runtime[28],runtime[37],2,3,4],[[0,1,0]],[[0,0]]]),
            '(<2)âŠ‘â†•4'                                   :(BQNError, [[0,4,0,1,16,0,2,0,3,0,0,16,17,7],[runtime[12],runtime[28],runtime[37],2,4],[[0,1,0]],[[0,0]]]),
            '(â‰â‰2)âŠ‘â†•4'                                  :(BQNError, [[0,4,0,1,16,0,2,0,3,0,0,16,0,0,16,17,7],[runtime[24],runtime[28],runtime[37],2,4],[[0,1,0]],[[0,0]]]),
            'âŸ¨â‰1â€¿2âŸ©âŠ‘â†•5â€¿5'                               :(BQNError, [[0,5,0,5,11,2,0,1,16,0,2,0,3,0,4,11,2,0,0,16,11,1,17,7],[runtime[24],runtime[28],runtime[37],1,2,5],[[0,1,0]],[[0,0]]]),
            '"dfeb"â‰¡(â¥ŠÂ¨-âŸ¨3,1,2,5âŸ©)âŠ‘"abcdef"'            :(1, [[0,10,0,3,0,5,0,6,0,7,0,8,11,4,0,0,16,0,4,0,2,26,16,17,0,1,0,9,17,7],[runtime[1],runtime[18],runtime[22],runtime[37],runtime[47],3,1,2,5,bqnstr("dfeb"),bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            '"abc"â‰¡âŸ¨âŸ©âŠ‘<"abc"'                           :(1, [[0,3,0,0,16,0,2,11,0,17,0,1,0,3,17,7],[runtime[12],runtime[18],runtime[37],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            "'a'â‰¡âŸ¨âŸ©âŠ‘'a'"                                :(1, [[0,2,0,1,11,0,17,0,0,0,2,17,7],[runtime[18],runtime[37],'a'],[[0,1,0]],[[0,0]]]),
            'âŸ¨7,7â€¿7,7âŸ©â‰¡âŸ¨âŸ¨âŸ©,âŸ¨âŸ¨âŸ©,âŸ¨âŸ©âŸ©,âŸ¨âŸ©âŸ©âŠ‘<7'              :(1, [[0,3,0,0,16,0,2,11,0,11,0,11,0,11,2,11,0,11,3,17,0,1,0,3,0,3,0,3,11,2,0,3,11,3,17,7],[runtime[12],runtime[18],runtime[37],7],[[0,1,0]],[[0,0]]]),
            'âŸ¨7,âŸ¨7,<7âŸ©âŸ©â‰¡âŸ¨âŸ¨âŸ©,âŸ¨âŸ¨âŸ©,<âŸ¨âŸ©âŸ©âŸ©âŠ‘7'                :(1, [[0,3,0,2,11,0,11,0,11,0,0,0,16,11,2,11,2,17,0,1,0,3,0,3,0,3,0,0,16,11,2,11,2,17,7],[runtime[12],runtime[18],runtime[37],7],[[0,1,0]],[[0,0]]]),
            '"abcfab"â‰¡â¥Š(â†•2â€¿3)âŠ‘5â€¿5â¥Š"abcdef"'             :(1, [[0,8,0,1,0,6,0,6,11,2,17,0,3,0,4,0,5,11,2,0,2,16,17,0,1,16,0,0,0,7,17,7],[runtime[18],runtime[22],runtime[28],runtime[37],2,3,5,bqnstr("abcfab"),bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            '"aedcaf"â‰¡â¥Š(-â†•2â€¿3)âŠ‘5â€¿5â¥Š"abcdef"'            :(1, [[0,9,0,2,0,7,0,7,11,2,17,0,4,0,5,0,6,11,2,0,3,16,0,0,16,17,0,2,16,0,1,0,8,17,7],[runtime[1],runtime[18],runtime[22],runtime[28],runtime[37],2,3,5,bqnstr("aedcaf"),bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            'â†•@'                                        :(BQNError, [[0,1,0,0,16,7],[runtime[28],'\0'],[[0,1,0]],[[0,0]]]),
            'â†•2.4'                                      :(BQNError, [[0,1,0,0,16,7],[runtime[28],2.4],[[0,1,0]],[[0,0]]]),
            'â†•<6'                                       :(BQNError, [[0,2,0,0,16,0,1,16,7],[runtime[12],runtime[28],6],[[0,1,0]],[[0,0]]]),
            'â†•â‰2â€¿3'                                     :(BQNError, [[0,2,0,3,11,2,0,0,16,0,1,16,7],[runtime[24],runtime[28],2,3],[[0,1,0]],[[0,0]]]),
            'â†•Â¯1â€¿2'                                     :(BQNError, [[0,1,0,2,11,2,0,0,16,7],[runtime[28],-1,2],[[0,1,0]],[[0,0]]]),
            '(<6â¥Š0)(âŠ‘â‰¡<âˆ˜âŠ‘âˆ˜âŠ¢)(6â¥Š1)â¥Š5'                    :(1, [[0,9,0,3,0,8,0,3,0,6,17,17,0,2,0,5,0,4,0,5,0,0,27,27,0,1,0,4,21,0,7,0,3,0,6,17,0,0,16,17,7],[runtime[12],runtime[18],runtime[21],runtime[22],runtime[37],runtime[53],6,0,1,5],[[0,1,0]],[[0,0]]]),
            'Â¯6â‰¡1â€¿0â—¶(2â€¿2â¥Š0â€¿0â€¿-â€¿0)6'                     :(1, [[0,8,0,6,0,6,0,0,0,6,11,4,0,2,0,7,0,7,11,2,17,0,3,0,5,0,6,11,2,27,16,0,1,0,4,17,7],[runtime[1],runtime[18],runtime[22],runtime[59],-6,1,0,2,6],[[0,1,0]],[[0,0]]]),
            '-Ë™â—¶Ã·â€¿Ã— 4'                                  :(BQNError, [[0,5,0,2,0,1,11,2,0,4,0,3,0,0,26,27,16,7],[runtime[1],runtime[2],runtime[3],runtime[44],runtime[59],4],[[0,1,0]],[[0,0]]]),
            'âŸ¨3âŸ©â‰¡â¥Š3'                                    :(1, [[0,2,0,1,16,0,0,0,2,11,1,17,7],[runtime[18],runtime[22],3],[[0,1,0]],[[0,0]]]),
            '(âŸ¨âŸ©âŠ¸â¥Šâ‰¡<)3'                                 :(1, [[0,4,0,0,0,1,0,2,0,3,11,0,27,21,16,7],[runtime[12],runtime[18],runtime[22],runtime[55],3],[[0,1,0]],[[0,0]]]),
            'âŸ¨3,3,3âŸ©â‰¡3â¥Š3'                               :(1, [[0,2,0,1,0,2,17,0,0,0,2,0,2,0,2,11,3,17,7],[runtime[18],runtime[22],3],[[0,1,0]],[[0,0]]]),
            'âŸ¨3,3,3âŸ©â‰¡3<âŠ¸â¥Š3'                             :(1, [[0,4,0,2,0,3,0,0,27,0,4,17,0,1,0,4,0,4,0,4,11,3,17,7],[runtime[12],runtime[18],runtime[22],runtime[55],3],[[0,1,0]],[[0,0]]]),
            'Â¯3â¥Š3'                                      :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[22],-3,3],[[0,1,0]],[[0,0]]]),
            '1.6â€¿2.5â¥Šâ†•4'                                :(BQNError, [[0,4,0,1,16,0,0,0,2,0,3,11,2,17,7],[runtime[22],runtime[28],1.6,2.5,4],[[0,1,0]],[[0,0]]]),
            '(â‰2â€¿3)â¥Šâ†•3'                                 :(BQNError, [[0,4,0,2,16,0,0,0,3,0,4,11,2,0,1,16,17,7],[runtime[22],runtime[24],runtime[28],2,3],[[0,1,0]],[[0,0]]]),
            '"     "â‰¡5â¥Š""'                              :(BQNError, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[22],5,bqnstr("     "),bqnstr("")],[[0,1,0]],[[0,0]]]),
            '6(âŠ¢âŒœâ‰¡âˆ¾â—‹â‰¢â¥ŠâŠ¢)â—‹â†•3'                            :(1, [[0,9,0,5,0,7,0,2,0,3,0,1,0,7,0,4,27,21,0,0,0,6,0,2,26,21,27,0,8,17,7],[runtime[18],runtime[19],runtime[21],runtime[22],runtime[23],runtime[28],runtime[48],runtime[54],6,3],[[0,1,0]],[[0,0]]]),
            '(<â‰¡â†•)âŸ¨âŸ©'                                   :(1, [[11,0,0,2,0,1,0,0,21,16,7],[runtime[12],runtime[18],runtime[28]],[[0,1,0]],[[0,0]]]),
            '(â†•âˆ˜â¥Šâ‰¡â¥ŠÂ¨âˆ˜â†•)9'                               :(1, [[0,5,0,2,0,4,0,3,0,1,26,27,0,0,0,1,0,4,0,2,27,21,16,7],[runtime[18],runtime[22],runtime[28],runtime[47],runtime[53],9],[[0,1,0]],[[0,0]]]),
            'âˆ§Â´(âŸ¨âˆ˜âŸ©âŠ¸â¥Šâ‰¡â¥Š)Â¨ âŸ¨4,â†•4,â†•2â€¿4âŸ©'                  :(1, [[0,8,0,8,0,3,16,0,9,0,8,11,2,0,3,16,11,3,0,4,0,2,0,1,0,2,0,7,0,6,11,1,27,21,26,16,0,5,0,0,26,16,7],[runtime[10],runtime[18],runtime[22],runtime[28],runtime[47],runtime[50],runtime[53],runtime[55],4,2],[[0,1,0]],[[0,0]]]),
            '4â€¿âˆ˜â¥Šâ†•15'                                   :(BQNError, [[0,4,0,1,16,0,0,0,3,0,2,11,2,17,7],[runtime[22],runtime[28],runtime[53],4,15],[[0,1,0]],[[0,0]]]),
            '1â€¿2â€¿3â€¿0â€¿1â‰¡â¥Š5â€¿âŒ½â¥Šâ†‘â€¿4â¥Š3â€¿âŒŠâ¥Š1+â†•4'               :(1, [[0,12,0,5,16,0,0,0,7,17,0,3,0,9,0,1,11,2,17,0,3,0,4,0,12,11,2,17,0,3,0,11,0,6,11,2,17,0,3,16,0,2,0,7,0,8,0,9,0,10,0,7,11,5,17,7],[runtime[0],runtime[6],runtime[18],runtime[22],runtime[26],runtime[28],runtime[31],1,2,3,0,5,4],[[0,1,0]],[[0,0]]]),
            'â‰¡Â´âŸ¨2â€¿âŒ½â€¿4,2â€¿3â€¿4âŸ©â¥ŠÂ¨<â†•19'                     :(1, [[0,10,0,3,16,0,0,16,0,5,0,2,26,0,7,0,4,0,8,11,3,0,7,0,9,0,8,11,3,11,2,17,0,6,0,1,26,16,7],[runtime[12],runtime[18],runtime[22],runtime[28],runtime[31],runtime[47],runtime[50],2,4,3,19],[[0,1,0]],[[0,0]]]),
            "Â¬'a'â‰¡<'a'"                                 :(1, [[0,3,0,1,16,0,2,0,3,17,0,0,16,7],[runtime[9],runtime[12],runtime[18],'a'],[[0,1,0]],[[0,0]]]),
            'Â¬"a"â‰¡â‰"a"'                                 :(1, [[0,3,0,2,16,0,1,0,3,17,0,0,16,7],[runtime[9],runtime[18],runtime[24],bqnstr("a")],[[0,1,0]],[[0,0]]]),
            'Â¬âŸ¨1,2,âŸ¨4,4âŸ©,5âŸ©â‰¡â—‹(2â€¿2âŠ¸â¥Š)âŸ¨1,2,âŸ¨3,4âŸ©,5âŸ©'      :(1, [[0,5,0,6,0,9,0,7,11,2,0,8,11,4,0,2,0,4,0,6,0,6,11,2,27,0,3,0,1,27,0,5,0,6,0,7,0,7,11,2,0,8,11,4,17,0,0,16,7],[runtime[9],runtime[18],runtime[22],runtime[54],runtime[55],1,2,4,5,3],[[0,1,0]],[[0,0]]]),
            'Â¬2â€¿3â€¿4â‰¡2â€¿3'                                :(1, [[0,2,0,3,11,2,0,1,0,2,0,3,0,4,11,3,17,0,0,16,7],[runtime[9],runtime[18],2,3,4],[[0,1,0]],[[0,0]]]),
            'Â¬1.001â‰¡1.002'                              :(1, [[0,3,0,1,0,2,17,0,0,16,7],[runtime[9],runtime[18],1.001,1.002],[[0,1,0]],[[0,0]]]),
            "'a'â‰¢2"                                     :(1, [[0,1,0,0,0,2,17,7],[runtime[19],2,'a'],[[0,1,0]],[[0,0]]]),
            '2â‰¢<2'                                      :(1, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[12],runtime[19],2],[[0,1,0]],[[0,0]]]),
            '2â€¿3â‰¢2â€¿4'                                   :(1, [[0,1,0,3,11,2,0,0,0,1,0,2,11,2,17,7],[runtime[19],2,3,4],[[0,1,0]],[[0,0]]]),
            '2â€¿3â‰¢â‰2â€¿3'                                  :(1, [[0,2,0,3,11,2,0,1,16,0,0,0,2,0,3,11,2,17,7],[runtime[19],runtime[24],2,3],[[0,1,0]],[[0,0]]]),
            "0â‰¡â‰¡'a'"                                    :(1, [[0,2,0,0,16,0,0,0,1,17,7],[runtime[18],0,'a'],[[0,1,0]],[[0,0]]]),
            '1â‰¡â‰¡â†•6'                                     :(1, [[0,3,0,1,16,0,0,16,0,0,0,2,17,7],[runtime[18],runtime[28],1,6],[[0,1,0]],[[0,0]]]),
            '2â‰¡â‰¡â†•2â€¿4'                                   :(1, [[0,2,0,3,11,2,0,1,16,0,0,16,0,0,0,2,17,7],[runtime[18],runtime[28],2,4],[[0,1,0]],[[0,0]]]),
            '3â‰¡â‰¡<<<4'                                   :(1, [[0,3,0,0,16,0,0,16,0,0,16,0,1,16,0,1,0,2,17,7],[runtime[12],runtime[18],3,4],[[0,1,0]],[[0,0]]]),
            '(1Â¨â‰¡-â—‹â‰¡ËœâŸœâ†•Â¨)âŸ¨0,âŸ¨âŸ©,âŸ¨1âŸ©,2,âŸ¨3,4âŸ©âŸ©'            :(1, [[0,8,11,0,0,7,11,1,0,9,0,10,0,11,11,2,11,5,0,4,0,2,0,6,0,3,0,1,0,5,0,0,27,26,27,26,0,1,0,4,0,7,26,21,16,7],[runtime[1],runtime[18],runtime[28],runtime[45],runtime[47],runtime[54],runtime[56],1,0,2,3,4],[[0,1,0]],[[0,0]]]),
            "2â‰¡â‰¡âŸ¨5,âŸ¨'c',+,2âŸ©âŸ©"                          :(1, [[0,3,0,4,0,0,0,2,11,3,11,2,0,1,16,0,1,0,2,17,7],[runtime[0],runtime[18],2,5,'c'],[[0,1,0]],[[0,0]]]),
            '0â‰¡â‰¡âŠ‘âŸ¨-âŸ©'                                   :(1, [[0,0,11,1,0,2,16,0,1,16,0,1,0,3,17,7],[runtime[1],runtime[18],runtime[37],0],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_layer4(self):
        runtime = self.runtime
        # fmt: off
        self.runcases({
            '"a"â‰¡â‹ˆ\'a\''                                          :(1, [[0,2,0,1,16,0,0,0,3,17,7],[runtime[18],runtime[25],'a',bqnstr("a")],[[0,1,0]],[[0,0]]]),
            "({âŸ¨ğ•©âŸ©}â‰¡â‹ˆ)'a'â€¿2"                                      :(1, [[0,3,0,2,11,2,0,1,0,0,1,1,21,16,7,34,0,1,11,1,7],[runtime[18],runtime[25],2,'a'],[[0,1,0],[0,0,1]],[[0,0],[15,3]]]),
            '"abc"â€¿1â‰¡"abc"â‹ˆ1'                                     :(1, [[0,2,0,1,0,3,17,0,0,0,3,0,2,11,2,17,7],[runtime[18],runtime[25],1,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'â‹ˆÂ´âŠ¸â‰¡"ab"'                                            :(1, [[0,4,0,0,0,3,0,2,0,1,26,27,16,7],[runtime[18],runtime[25],runtime[50],runtime[55],bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            "âˆ§Â´â‰¡âŸœ>Â¨âŸ¨1,<'a',<âˆ,â†•5,5â€¿3â¥Š2âŸ©"                          :(1, [[0,9,0,14,0,1,16,0,10,0,1,16,0,11,0,5,16,0,13,0,4,0,11,0,12,11,2,17,11,5,0,6,0,2,0,8,0,3,27,26,16,0,7,0,0,26,16,7],[runtime[10],runtime[12],runtime[13],runtime[18],runtime[22],runtime[28],runtime[47],runtime[50],runtime[56],1,math.inf,5,3,2,'a'],[[0,1,0]],[[0,0]]]),
            '2â€¿3â€¿2â‰¡â‰¢>â†•2â€¿3'                                        :(1, [[0,4,0,5,11,2,0,3,16,0,0,16,0,2,16,0,1,0,4,0,5,0,4,11,3,17,7],[runtime[13],runtime[18],runtime[19],runtime[28],2,3],[[0,1,0]],[[0,0]]]),
            '2â€¿3â‰¡>âŸ¨<2,3âŸ©'                                         :(1, [[0,3,0,0,16,0,4,11,2,0,1,16,0,2,0,3,0,4,11,2,17,7],[runtime[12],runtime[13],runtime[18],2,3],[[0,1,0]],[[0,0]]]),
            '>â†•Â¨2â€¿3'                                              :(BQNError, [[0,3,0,4,11,2,0,2,0,1,26,16,0,0,16,7],[runtime[13],runtime[28],runtime[47],2,3],[[0,1,0]],[[0,0]]]),
            '>âŸ¨â¥Š2,3âŸ©'                                             :(BQNError, [[0,2,0,1,16,0,3,11,2,0,0,16,7],[runtime[13],runtime[22],2,3],[[0,1,0]],[[0,0]]]),
            '>(â‰â‹ˆâŠ¢)â†•4'                                            :(BQNError, [[0,5,0,4,16,0,1,0,3,0,2,21,16,0,0,16,7],[runtime[13],runtime[21],runtime[24],runtime[25],runtime[28],4],[[0,1,0]],[[0,0]]]),
            '((4â¥Š2)âŠ¸â¥Šâ‰¡(>2â€¿2â¥ŠÂ·<2â€¿2â¥ŠâŠ¢))"abcd"'                      :(1, [[0,8,0,3,0,4,0,7,0,7,11,2,21,0,0,20,0,4,0,7,0,7,11,2,21,0,1,20,0,2,0,4,0,5,0,7,0,4,0,6,17,27,21,16,7],[runtime[12],runtime[13],runtime[18],runtime[21],runtime[22],runtime[55],4,2,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '(âŠ¢â‰¡>âˆ˜<)5â€¿3â¥Šâ†•15'                                      :(1, [[0,9,0,5,16,0,4,0,7,0,8,11,2,17,0,0,0,6,0,1,27,0,2,0,3,21,16,7],[runtime[12],runtime[13],runtime[18],runtime[21],runtime[22],runtime[28],runtime[53],5,3,15],[[0,1,0]],[[0,0]]]),
            '(âŠ¢â‰¡(><Â¨))5â€¿3â¥Šâ†•15'                                    :(1, [[0,9,0,5,16,0,4,0,7,0,8,11,2,17,0,6,0,0,26,0,1,20,0,2,0,3,21,16,7],[runtime[12],runtime[13],runtime[18],runtime[21],runtime[22],runtime[28],runtime[47],5,3,15],[[0,1,0]],[[0,0]]]),
            "(â¥Šâ‰¡â‰)'a'"                                            :(1, [[0,3,0,2,0,0,0,1,21,16,7],[runtime[18],runtime[22],runtime[24],'a'],[[0,1,0]],[[0,0]]]),
            "(â¥Šâ‰¡â‰)<'a'"                                           :(1, [[0,4,0,0,16,0,3,0,1,0,2,21,16,7],[runtime[12],runtime[18],runtime[22],runtime[24],'a'],[[0,1,0]],[[0,0]]]),
            '(1â€¿2âŠ¸â¥Šâ‰¡â‰)"ab"'                                       :(1, [[0,6,0,2,0,0,0,1,0,3,0,4,0,5,11,2,27,21,16,7],[runtime[18],runtime[22],runtime[24],runtime[55],1,2,bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '1â€¿2â‰¡1â‰2'                                             :(1, [[0,3,0,1,0,2,17,0,0,0,2,0,3,11,2,17,7],[runtime[18],runtime[24],1,2],[[0,1,0]],[[0,0]]]),
            '2â€¿1(â‰â‰¡2â€¿2â¥Šâˆ¾)4â€¿3'                                     :(1, [[0,6,0,7,11,2,0,2,0,1,0,4,0,4,11,2,21,0,0,0,3,21,0,4,0,5,11,2,17,7],[runtime[18],runtime[22],runtime[23],runtime[24],2,1,4,3],[[0,1,0]],[[0,0]]]),
            "(â‰âŸœ<â‰¡â‰Ëœ)'a'"                                         :(1, [[0,5,0,3,0,2,26,0,1,0,0,0,4,0,2,27,21,16,7],[runtime[12],runtime[18],runtime[24],runtime[45],runtime[56],'a'],[[0,1,0]],[[0,0]]]),
            '1â€¿0â‰1â€¿2â€¿3'                                           :(BQNError, [[0,1,0,3,0,4,11,3,0,0,0,1,0,2,11,2,17,7],[runtime[24],1,0,2,3],[[0,1,0]],[[0,0]]]),
            'â‰âŸœâ‰â†•3'                                               :(BQNError, [[0,3,0,1,16,0,0,0,2,0,0,27,16,7],[runtime[24],runtime[28],runtime[56],3],[[0,1,0]],[[0,0]]]),
            'âŒ½â‰1.1 â†•4'                                            :(BQNError, [[0,4,0,0,16,0,3,0,2,0,1,27,16,7],[runtime[28],runtime[31],runtime[60],1.1,4],[[0,1,0]],[[0,0]]]),
            "âŒ½â‰'x' â†•4"                                            :(BQNError, [[0,3,0,0,16,0,4,0,2,0,1,27,16,7],[runtime[28],runtime[31],runtime[60],4,'x'],[[0,1,0]],[[0,0]]]),
            'âŒ½â‰(<<0) â†•4'                                          :(BQNError, [[0,5,0,1,16,0,4,0,0,16,0,0,16,0,3,0,2,27,16,7],[runtime[12],runtime[28],runtime[31],runtime[60],0,4],[[0,1,0]],[[0,0]]]),
            'âŒ½â‰â‰ â†•4'                                              :(BQNError, [[0,4,0,1,16,0,0,0,3,0,2,27,16,7],[runtime[24],runtime[28],runtime[31],runtime[60],4],[[0,1,0]],[[0,0]]]),
            '(â‰Ë˜Ëœâ¥ŠË˜1â€¿5â€¿9)â‰¡âŒ½â‰2âŠ¸+â¥ŠâŸœ(â†•Ã—Â´)3â€¿2â€¿1'                      :(1, [[0,17,0,16,0,13,11,3,0,9,0,1,26,0,5,20,0,11,0,3,27,16,0,0,0,10,0,16,0,12,0,6,27,27,16,0,2,0,13,0,14,0,15,11,3,0,8,0,3,26,16,0,7,0,8,0,4,26,26,16,17,7],[runtime[0],runtime[2],runtime[18],runtime[22],runtime[24],runtime[28],runtime[31],runtime[45],runtime[46],runtime[50],runtime[55],runtime[56],runtime[60],1,5,9,2,3],[[0,1,0]],[[0,0]]]),
            '(<0)â‰¡â‰¡Ë˜0'                                            :(1, [[0,3,0,2,0,1,26,16,0,1,0,3,0,0,16,17,7],[runtime[12],runtime[18],runtime[46],0],[[0,1,0]],[[0,0]]]),
            '(<1)â‰¡â‰¡Ë˜<0'                                           :(1, [[0,4,0,0,16,0,2,0,1,26,16,0,1,0,3,0,0,16,17,7],[runtime[12],runtime[18],runtime[46],1,0],[[0,1,0]],[[0,0]]]),
            '(2â¥Š<<"ab") â‰¡ â‹ˆËœË˜<"ab"'                               :(1, [[0,7,0,0,16,0,5,0,4,0,3,26,26,16,0,1,0,7,0,0,16,0,0,16,0,2,0,6,17,17,7],[runtime[12],runtime[18],runtime[22],runtime[25],runtime[45],runtime[46],2,bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '(3â¥Š0) â‰¡ {-}=Ë˜â†•3'                                     :(1, [[0,6,0,4,16,0,5,0,1,26,1,1,17,0,2,0,7,0,3,0,6,17,17,7,0,0,7],[runtime[1],runtime[15],runtime[18],runtime[22],runtime[28],runtime[46],3,0],[[0,1,0],[0,1,1]],[[0,0],[24,0]]]),
            '(â†•4)(Ã—âŒœâ‰¡Ã—â‰0â€¿2)â†•5'                                    :(1, [[0,8,0,2,16,0,6,0,7,11,2,0,4,0,0,27,0,1,0,3,0,0,26,21,0,5,0,2,16,17,7],[runtime[2],runtime[18],runtime[28],runtime[48],runtime[60],4,0,2,5],[[0,1,0]],[[0,0]]]),
            '(â†•4)(â‹†ËœâŒœËœâ‰¡â‹†â‰âˆâ€¿Â¯4)â†•5'                                 :(1, [[0,9,0,2,16,0,7,0,8,11,2,0,5,0,0,27,0,1,0,3,0,4,0,3,0,0,26,26,26,21,0,6,0,2,16,17,7],[runtime[4],runtime[18],runtime[28],runtime[45],runtime[48],runtime[60],4,math.inf,-4,5],[[0,1,0]],[[0,0]]]),
            '(âŸ¨2âŸ©âŠ¸âˆ¾âŸ(2â€¿2â¥Š0â€¿1â€¿1â€¿1)2â€¿3)â‰¡â‰¢Â¨â‰â‰(âŒŠâ—‹=)âŒœËœâŸ¨â†•3,2â€¿3â¥Šâ†•6âŸ©'     :(1, [[0,18,0,7,16,0,19,0,7,16,0,4,0,15,0,18,11,2,17,11,2,0,8,0,10,0,1,0,11,0,0,27,0,13,0,6,27,26,26,16,0,9,0,3,26,16,0,2,0,15,0,18,11,2,0,16,0,17,0,17,0,17,11,4,0,4,0,15,0,15,11,2,17,0,14,0,5,0,12,0,15,11,1,27,27,16,17,7],[runtime[6],runtime[15],runtime[18],runtime[19],runtime[22],runtime[23],runtime[24],runtime[28],runtime[45],runtime[47],runtime[48],runtime[54],runtime[55],runtime[60],runtime[62],2,0,1,3,6],[[0,1,0]],[[0,0]]]),
            '(2=âŒœâ—‹â†•3)â‰¡(2â€¿4â¥Š"abc")â‰¡â‰1(2â€¿3â€¿4â¥Š"abc")'                :(1, [[0,11,0,2,0,7,0,8,0,9,11,3,17,0,10,0,6,0,1,27,0,11,0,2,0,7,0,9,11,2,17,17,0,1,0,8,0,3,0,5,0,4,0,0,26,27,0,7,17,17,7],[runtime[15],runtime[18],runtime[22],runtime[28],runtime[48],runtime[54],runtime[60],2,3,4,1,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŸ¨0,0âŸ©â‰¡(2â€¿4â¥Š"abc")â‰¡â‰Â¯1(2â€¿3â€¿4â¥Š"abc")'                  :(1, [[0,8,0,1,0,4,0,7,0,5,11,3,17,0,6,0,2,0,0,27,0,8,0,1,0,4,0,5,11,2,17,17,0,0,0,3,0,3,11,2,17,7],[runtime[18],runtime[22],runtime[60],0,2,4,-1,3,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŒ½âš‡2â€¿2.5 â†•3'                                          :(BQNError, [[0,5,0,0,16,0,3,0,4,11,2,0,2,0,1,27,16,7],[runtime[28],runtime[31],runtime[61],2,2.5,3],[[0,1,0]],[[0,0]]]),
            '(-â‰¡-âš‡Â¯1)5'                                           :(1, [[0,4,0,3,0,2,0,0,27,0,1,0,0,21,16,7],[runtime[1],runtime[18],runtime[61],-1,5],[[0,1,0]],[[0,0]]]),
            'âŸ¨5,âŸ¨15,1âŸ©âŸ©â‰¡+Â´âš‡1âŸ¨âŸ¨3,2âŸ©,âŸ¨âŸ¨4,5,6âŸ©,âŸ¨1âŸ©âŸ©âŸ©'                :(1, [[0,7,0,8,11,2,0,9,0,4,0,10,11,3,0,6,11,1,11,2,11,2,0,6,0,3,0,2,0,0,26,27,16,0,1,0,4,0,5,0,6,11,2,11,2,17,7],[runtime[0],runtime[18],runtime[50],runtime[61],5,15,1,3,2,4,6],[[0,1,0]],[[0,0]]]),
            '5â€¿6â€¿15â‰¡âˆ¾Â´+Â´âš‡1âŸ¨âŸ¨0,1âŸ©,âŸ¨âŸ¨âŸ©âŸ©âŸ©â¥ŠâŠ¸âˆ¾âš‡Â¯2â€¿1âŸ¨âŸ¨2,3âŸ©,âŸ¨4,5,6âŸ©âŸ©'    :(1, [[0,13,0,14,11,2,0,15,0,7,0,8,11,3,11,2,0,12,0,10,11,2,0,6,0,3,0,5,0,2,27,27,0,11,0,10,11,2,11,0,11,1,11,2,17,0,10,0,6,0,4,0,0,26,27,16,0,4,0,3,26,16,0,1,0,7,0,8,0,9,11,3,17,7],[runtime[0],runtime[18],runtime[22],runtime[23],runtime[50],runtime[55],runtime[61],5,6,15,1,0,-2,2,3,4],[[0,1,0]],[[0,0]]]),
            '(5â¥Š1)â‰¡(â†•5)=â—‹=âš‡0{â‰}'                                  :(1, [[1,1,0,9,0,6,0,0,0,5,0,0,27,27,0,7,0,4,16,17,0,1,0,8,0,2,0,7,17,17,7,0,3,7],[runtime[15],runtime[18],runtime[22],runtime[24],runtime[28],runtime[54],runtime[61],5,1,0],[[0,1,0],[0,1,1]],[[0,0],[31,0]]]),
            "2+âŸ1â€¿'c'4"                                           :(BQNError, [[0,4,0,3,0,5,11,2,0,1,0,0,27,0,2,17,7],[runtime[0],runtime[62],2,1,4,'c'],[[0,1,0]],[[0,0]]]),
            'â‹†âŸ1.5 2'                                             :(BQNError, [[0,3,0,2,0,1,0,0,27,16,7],[runtime[4],runtime[62],1.5,2],[[0,1,0]],[[0,0]]]),
            '4â‰¡2+âŸÂ¯1 6'                                           :(1, [[0,6,0,5,0,2,0,0,27,0,4,17,0,1,0,3,17,7],[runtime[0],runtime[18],runtime[62],4,2,-1,6],[[0,1,0]],[[0,0]]]),
            '(2Ã—â†•7)â‰¡2+âŸ(Â¯3+â†•7)6'                                  :(1, [[0,8,0,6,0,3,16,0,0,0,7,17,0,4,0,0,27,0,5,17,0,2,0,6,0,3,16,0,1,0,5,17,17,7],[runtime[0],runtime[2],runtime[18],runtime[28],runtime[62],2,7,-3,6],[[0,1,0]],[[0,0]]]),
            '(3âŒŠâ†•5)â‰¡{iâ†0â‹„râ†{i+â†©1â‹„1+ğ•©}âŸ(â†•4)ğ•©â‹„râˆ¾i}0'                :(1, [[0,8,1,1,16,0,2,0,7,0,4,16,0,1,0,6,17,17,7,0,8,33,0,3,48,6,34,0,1,0,10,0,4,16,0,5,1,2,27,16,33,0,4,48,6,32,0,3,0,3,34,0,4,17,7,0,9,0,0,33,1,3,50,6,34,0,1,0,0,0,9,17,7],[runtime[0],runtime[6],runtime[18],runtime[23],runtime[28],runtime[62],3,5,0,1,4],[[0,1,0],[0,0,1],[0,0,2]],[[0,0],[19,5],[55,3]]]),
            '(+âŒœËœâ‰¡Â·>1+âŸâŠ¢âŠ¢)â†•5'                                     :(1, [[0,9,0,4,16,0,3,0,3,0,7,0,0,27,0,8,21,0,1,20,0,2,0,5,0,6,0,0,26,26,21,16,7],[runtime[0],runtime[13],runtime[18],runtime[21],runtime[28],runtime[45],runtime[48],runtime[62],1,5],[[0,1,0]],[[0,0]]]),
            '+Ë6'                                                 :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[0],runtime[51],6],[[0,1,0]],[[0,0]]]),
            'âŠ¢Ë<6'                                                :(BQNError, [[0,3,0,0,16,0,2,0,1,26,16,7],[runtime[12],runtime[21],runtime[51],6],[[0,1,0]],[[0,0]]]),
            "(+Ëâ‰¡Â·<+Â´)Â¯8â€¿4â€¿Â¯38â€¿'!'â€¿21"                            :(1, [[0,5,0,6,0,7,0,9,0,8,11,5,0,3,0,0,26,0,1,20,0,2,0,4,0,0,26,21,16,7],[runtime[0],runtime[12],runtime[18],runtime[50],runtime[51],-8,4,-38,21,'!'],[[0,1,0]],[[0,0]]]),
            '(Â¯2âŠ¸Ã—â‰¡Â·-ËÃ—âŒœËœ)â†•4'                                     :(1, [[0,9,0,3,16,0,4,0,5,0,1,26,26,0,6,0,0,26,20,0,2,0,1,0,7,0,8,27,21,16,7],[runtime[1],runtime[2],runtime[18],runtime[28],runtime[45],runtime[48],runtime[51],runtime[55],-2,4],[[0,1,0]],[[0,0]]]),
            '(â‹ˆËË˜â‰¡<Â¨)3â€¿2â¥Š"abcdef"'                                :(1, [[0,9,0,2,0,7,0,8,11,2,17,0,5,0,0,26,0,1,0,4,0,6,0,3,26,26,21,16,7],[runtime[12],runtime[18],runtime[22],runtime[25],runtime[46],runtime[47],runtime[51],3,2,bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            '(âŠ£Ëâ‰¡âŠ)2â€¿1â€¿1â€¿2â€¿1â¥Š"abcd"'                              :(1, [[0,7,0,2,0,5,0,6,0,6,0,5,0,6,11,5,17,0,3,0,0,0,4,0,1,26,21,16,7],[runtime[18],runtime[20],runtime[22],runtime[36],runtime[51],2,1,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '0â€¿1â€¿3â€¿6â€¿10â‰¡+`â†•5'                                     :(1, [[0,9,0,2,16,0,3,0,0,26,16,0,1,0,4,0,5,0,6,0,7,0,8,11,5,17,7],[runtime[0],runtime[18],runtime[28],runtime[52],0,1,3,6,10,5],[[0,1,0]],[[0,0]]]),
            '(-0â€¿1â€¿3â€¿6â€¿10)â‰¡-`â†•5'                                  :(1, [[0,9,0,2,16,0,3,0,0,26,16,0,1,0,4,0,5,0,6,0,7,0,8,11,5,0,0,16,17,7],[runtime[1],runtime[18],runtime[28],runtime[52],0,1,3,6,10,5],[[0,1,0]],[[0,0]]]),
            '((0âˆ¾Â¨â†•3)â‰3â¥Š0)â‰¡â‰¡`â†•2â€¿3'                                :(1, [[0,9,0,8,11,2,0,4,16,0,6,0,0,26,16,0,0,0,7,0,1,0,8,17,0,3,0,8,0,4,16,0,5,0,2,26,0,7,17,17,17,7],[runtime[18],runtime[22],runtime[23],runtime[24],runtime[28],runtime[47],runtime[52],0,3,2],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©â‰¡Ã—`âŸ¨âŸ©'                                             :(1, [[11,0,0,2,0,0,26,16,0,1,11,0,17,7],[runtime[2],runtime[18],runtime[52]],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœ(!âˆ˜0`)3â€¿0â€¿2â¥Š""'                                    :(1, [[0,9,0,1,0,7,0,6,0,8,11,3,17,0,3,0,6,0,4,0,2,27,26,0,5,0,0,27,16,7],[runtime[18],runtime[22],runtime[43],runtime[52],runtime[53],runtime[56],0,3,2,bqnstr("")],[[0,1,0]],[[0,0]]]),
            '+`4'                                                 :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[0],runtime[52],4],[[0,1,0]],[[0,0]]]),
            "+`<'c'"                                              :(BQNError, [[0,3,0,1,16,0,2,0,0,26,16,7],[runtime[0],runtime[12],runtime[52],'c'],[[0,1,0]],[[0,0]]]),
            '2â€¿3â€¿5â€¿8â€¿12â‰¡2+`â†•5'                                    :(1, [[0,6,0,2,16,0,3,0,0,26,0,4,17,0,1,0,4,0,5,0,6,0,7,0,8,11,5,17,7],[runtime[0],runtime[18],runtime[28],runtime[52],2,3,5,8,12],[[0,1,0]],[[0,0]]]),
            '3â€¿4+`4+âŒœâ—‹â†•3'                                         :(BQNError, [[0,5,0,1,0,4,0,2,0,0,26,27,0,6,17,0,3,0,0,26,0,5,0,6,11,2,17,7],[runtime[0],runtime[28],runtime[48],runtime[52],runtime[54],3,4],[[0,1,0]],[[0,0]]]),
            '(2â‹†1â€¿2â€¿6Ã—âŒœ0â€¿2)â‰¡3â€¿4â‹†`3+âŒœâ—‹â†•2'                          :(1, [[0,8,0,4,0,7,0,5,0,0,26,27,0,12,17,0,6,0,2,26,0,12,0,13,11,2,17,0,3,0,11,0,8,11,2,0,5,0,1,26,0,9,0,8,0,10,11,3,17,0,2,0,8,17,17,7],[runtime[0],runtime[2],runtime[4],runtime[18],runtime[28],runtime[48],runtime[52],runtime[54],2,1,6,0,3,4],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_layer5(self):
        runtime = self.runtime
        # fmt: off
        self.runcases({
            '(<\'a\')â‰¡âŠ"abc"'                                      :(1, [[0,4,0,2,16,0,1,0,3,0,0,16,17,7],[runtime[12],runtime[18],runtime[36],'a',bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŠ""'                                                  :(BQNError, [[0,1,0,0,16,7],[runtime[36],bqnstr("")],[[0,1,0]],[[0,0]]]),
            '"a"â‰¡âŠâ¥ŠË˜"abc"'                                         :(1, [[0,5,0,3,0,1,26,16,0,2,16,0,0,0,4,17,7],[runtime[18],runtime[22],runtime[36],runtime[46],bqnstr("a"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŠ0â€¿3â¥Š""'                                              :(BQNError, [[0,4,0,0,0,2,0,3,11,2,17,0,1,16,7],[runtime[22],runtime[36],0,3,bqnstr("")],[[0,1,0]],[[0,0]]]),
            '(<\'c\')â‰¡2âŠ"abc"'                                     :(1, [[0,5,0,2,0,3,17,0,1,0,4,0,0,16,17,7],[runtime[12],runtime[18],runtime[36],2,'c',bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '3âŠ"abc"'                                              :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[36],3,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '1.5âŠ"abc"'                                            :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[36],1.5,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '\'x\'âŠ"abc"'                                          :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[36],'x',bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(<\'c\')â‰¡Â¯1âŠ"abc"'                                    :(1, [[0,5,0,2,0,3,17,0,1,0,4,0,0,16,17,7],[runtime[12],runtime[18],runtime[36],-1,'c',bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '"ccc"â‰¡2â€¿Â¯1â€¿2âŠ"abc"'                                   :(1, [[0,5,0,1,0,2,0,3,0,2,11,3,17,0,0,0,4,17,7],[runtime[18],runtime[36],2,-1,bqnstr("ccc"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŸ¨â¥Š0,1âŸ©âŠâ‰"abc"'                                        :(BQNError, [[0,5,0,1,16,0,2,0,3,0,0,16,0,4,11,2,17,7],[runtime[22],runtime[24],runtime[36],0,1,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '((3-Ëœâ†•5)âŠ¸âŠâ‰¡2âŠ¸âŒ½)â†•5â€¿2'                                  :(1, [[0,8,0,9,11,2,0,2,16,0,3,0,6,0,9,27,0,1,0,4,0,6,0,8,0,2,16,0,5,0,0,26,0,7,17,27,21,16,7],[runtime[1],runtime[18],runtime[28],runtime[31],runtime[36],runtime[45],runtime[55],3,5,2],[[0,1,0]],[[0,0]]]),
            '(0â€¿3â¥Š0)â‰¡âŸ¨âŸ©âŠ2â€¿3â¥Šâ†•6'                                    :(1, [[0,7,0,2,16,0,1,0,6,0,5,11,2,17,0,3,11,0,17,0,0,0,4,0,1,0,4,0,5,11,2,17,17,7],[runtime[18],runtime[22],runtime[28],runtime[36],0,3,2,6],[[0,1,0]],[[0,0]]]),
            'âŸ¨3â€¿0,2â€¿1â€¿2âŸ©(Ã—âŸœ5âŠ¸+âŒœÂ´âˆ˜âŠ£â‰¡âŠ)â¥ŠâŸœ(â†•Ã—Â´)6â€¿5'                   :(1, [[0,17,0,16,11,2,0,8,0,1,26,0,5,20,0,11,0,4,27,16,0,6,0,2,0,3,0,9,0,8,0,7,0,0,0,10,0,16,0,11,0,1,27,27,26,26,27,21,0,12,0,13,11,2,0,14,0,15,0,14,11,3,11,2,17,7],[runtime[0],runtime[2],runtime[18],runtime[20],runtime[22],runtime[28],runtime[36],runtime[48],runtime[50],runtime[53],runtime[55],runtime[56],3,0,2,1,5,6],[[0,1,0]],[[0,0]]]),
            '0â€¿0<Â¨âŠ¸âŠ"abc"'                                         :(BQNError, [[0,5,0,1,0,3,0,2,0,0,26,27,0,4,0,4,11,2,17,7],[runtime[12],runtime[36],runtime[47],runtime[55],0,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(2â€¿0â¥Š0)â‰¡âŸ¨3â€¿Â¯1,âŸ¨âŸ©âŸ©âŠ4â€¿3â¥Š0'                              :(1, [[0,4,0,1,0,7,0,5,11,2,17,0,2,0,5,0,6,11,2,11,0,11,2,17,0,0,0,4,0,1,0,3,0,4,11,2,17,17,7],[runtime[18],runtime[22],runtime[36],2,0,3,-1,4],[[0,1,0]],[[0,0]]]),
            'âŸ¨3â€¿Â¯âˆ,âŸ¨âŸ©âŸ©âŠ4â€¿3â¥Š0'                                      :(BQNError, [[0,5,0,0,0,4,0,2,11,2,17,0,1,0,2,0,3,11,2,11,0,11,2,17,7],[runtime[22],runtime[36],3,-math.inf,4,0],[[0,1,0]],[[0,0]]]),
            '5â€¿1(<âŠ¸âŠâ‰¡âŠ)â†•6â€¿2'                                       :(1, [[0,7,0,8,11,2,0,2,16,0,3,0,1,0,3,0,4,0,0,27,21,0,5,0,6,11,2,17,7],[runtime[12],runtime[18],runtime[28],runtime[36],runtime[55],5,1,6,2],[[0,1,0]],[[0,0]]]),
            '(â‰â‰<5â€¿1)âŠâ†•6â€¿2'                                        :(BQNError, [[0,6,0,7,11,2,0,2,16,0,3,0,4,0,5,11,2,0,0,16,0,1,16,0,1,16,17,7],[runtime[12],runtime[24],runtime[28],runtime[36],5,1,6,2],[[0,1,0]],[[0,0]]]),
            'âŸ¨4â€¿0,1â€¿2â€¿3â€¿2â€¿1â€¿0âŸ©(+âŒœÂ´âŠ¸(Ã—âŒœ)â‰¡âŠâŸœ(Ã—âŒœËœ))+âŒœËœâ†•5'             :(1, [[0,15,0,3,16,0,5,0,6,0,0,26,26,16,0,5,0,6,0,1,26,26,0,9,0,4,27,0,2,0,6,0,1,26,0,8,0,7,0,6,0,0,26,26,27,21,0,10,0,11,11,2,0,12,0,13,0,14,0,13,0,12,0,11,11,6,11,2,17,7],[runtime[0],runtime[2],runtime[18],runtime[28],runtime[36],runtime[45],runtime[48],runtime[50],runtime[55],runtime[56],4,0,1,2,3,5],[[0,1,0]],[[0,0]]]),
            'âˆ§Â´1=â‰¡Â¨(<âŸ¨âŸ©)(â†‘Â¨âˆ¾â†“Â¨)âŸ¨@,+,<@,â†•3âŸ©'                        :(1, [[0,13,0,0,0,13,0,2,16,0,12,0,8,16,11,4,0,9,0,7,26,0,5,0,9,0,6,26,21,11,0,0,2,16,17,0,9,0,4,26,16,0,3,0,11,17,0,10,0,1,26,16,7],[runtime[0],runtime[10],runtime[12],runtime[15],runtime[18],runtime[23],runtime[26],runtime[27],runtime[28],runtime[47],runtime[50],1,3,'\0'],[[0,1,0]],[[0,0]]]),
            '"abc"â‰¡3â†‘"abce"'                                       :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[26],3,bqnstr("abc"),bqnstr("abce")],[[0,1,0]],[[0,0]]]),
            '"e"â‰¡Â¯1â†‘"abce"'                                        :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[26],-1,bqnstr("e"),bqnstr("abce")],[[0,1,0]],[[0,0]]]),
            '""â‰¡0â†‘"ab"'                                            :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[26],0,bqnstr(""),bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '2.5â†‘"abce"'                                           :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[26],2.5,bqnstr("abce")],[[0,1,0]],[[0,0]]]),
            '(<âŸœ3âŠ¸Ã—â†•5)â‰¡5â†‘â†•3'                                       :(1, [[0,7,0,4,16,0,3,0,8,17,0,2,0,8,0,4,16,0,0,0,5,0,7,0,6,0,1,27,27,16,17,7],[runtime[2],runtime[12],runtime[18],runtime[26],runtime[28],runtime[55],runtime[56],3,5],[[0,1,0]],[[0,0]]]),
            '(6â¥Š0)â‰¡Â¯6â†‘â†•0'                                          :(1, [[0,5,0,3,16,0,2,0,6,17,0,0,0,5,0,1,0,4,17,17,7],[runtime[18],runtime[22],runtime[26],runtime[28],6,0,-6],[[0,1,0]],[[0,0]]]),
            '(â‰â†•3)â‰¡1â†‘2â€¿3â¥Šâ†•6'                                       :(1, [[0,8,0,4,16,0,1,0,7,0,5,11,2,17,0,3,0,6,17,0,0,0,5,0,4,16,0,2,16,17,7],[runtime[18],runtime[22],runtime[24],runtime[26],runtime[28],3,1,2,6],[[0,1,0]],[[0,0]]]),
            '(âˆ¾âŸœ0â€¿0â€¿0â‰¡3âŠ¸â†‘)2â€¿3â¥Šâ†•6'                                  :(1, [[0,10,0,4,16,0,1,0,9,0,8,11,2,17,0,3,0,5,0,8,27,0,0,0,7,0,7,0,7,11,3,0,6,0,2,27,21,16,7],[runtime[18],runtime[22],runtime[23],runtime[26],runtime[28],runtime[55],runtime[56],0,3,2,6],[[0,1,0]],[[0,0]]]),
            '((0Ã—âŠ)âŠ¸âˆ¾â‰¡Â¯4âŠ¸â†‘)3â€¿5â¥Šâ†•15'                                :(1, [[0,12,0,5,16,0,2,0,10,0,11,11,2,17,0,4,0,7,0,9,27,0,1,0,3,0,7,0,6,0,0,0,8,21,27,21,16,7],[runtime[2],runtime[18],runtime[22],runtime[23],runtime[26],runtime[28],runtime[36],runtime[55],0,-4,3,5,15],[[0,1,0]],[[0,0]]]),
            '(â†‘âŸœ4â‰¡â¥ŠâŸœ0)â†•3'                                          :(1, [[0,7,0,3,16,0,6,0,4,0,1,27,0,0,0,5,0,4,0,2,27,21,16,7],[runtime[18],runtime[22],runtime[26],runtime[28],runtime[56],4,0,3],[[0,1,0]],[[0,0]]]),
            '(â‰"abc")â‰¡(<1)â†‘2â€¿3â†‘"abcd"'                             :(1, [[0,8,0,3,0,5,0,6,11,2,17,0,3,0,4,0,0,16,17,0,1,0,7,0,2,16,17,7],[runtime[12],runtime[18],runtime[24],runtime[26],1,2,3,bqnstr("abc"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '2â€¿\'c\'â†‘"abcd"'                                       :(BQNError, [[0,3,0,0,0,1,0,2,11,2,17,7],[runtime[26],2,'c',bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '(â‰2â€¿3)â†‘"abcd"'                                        :(BQNError, [[0,4,0,1,0,2,0,3,11,2,0,0,16,17,7],[runtime[24],runtime[26],2,3,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '(6â¥Š1)(â†‘â‰¡â¥ŠâŸœâŠ‘)2â€¿3â¥Šâ†•6'                                   :(1, [[0,6,0,3,16,0,1,0,8,0,9,11,2,17,0,4,0,5,0,1,27,0,0,0,2,21,0,7,0,1,0,6,17,17,7],[runtime[18],runtime[22],runtime[26],runtime[28],runtime[37],runtime[56],6,1,2,3],[[0,1,0]],[[0,0]]]),
            '(â†•Â¨âˆ˜â†•âˆ˜(1âŠ¸+)â‰¡â†‘âˆ˜â†•)5'                                    :(1, [[0,8,0,3,0,5,0,2,27,0,1,0,0,0,6,0,7,27,0,5,0,3,0,5,0,4,0,3,26,27,27,21,16,7],[runtime[0],runtime[18],runtime[26],runtime[28],runtime[47],runtime[53],runtime[55],1,5],[[0,1,0]],[[0,0]]]),
            '(â†‘â‰¡((â†•4)â‰Â¨2)â¥ŠÂ¨<)3â€¿2â¥Š"abcdef"'                         :(1, [[0,10,0,2,0,9,0,8,11,2,17,0,0,0,6,0,2,26,0,8,0,6,0,3,26,0,7,0,5,16,17,21,0,1,0,4,21,16,7],[runtime[12],runtime[18],runtime[22],runtime[24],runtime[26],runtime[28],runtime[47],4,2,3,bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            '"d"â‰¡3â†“"abcd"'                                         :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[27],3,bqnstr("d"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '0.1â†“"abcd"'                                           :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[27],0.1,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            'âŸ¨âˆ˜âŸ©â†“"abcd"'                                           :(BQNError, [[0,2,0,0,0,1,11,1,17,7],[runtime[27],runtime[53],bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '1â€¿2â‰¡âŸœ(Â¯3âŠ¸â†“)â—‹â†•4â€¿2'                                     :(1, [[0,9,0,7,11,2,0,2,0,3,0,1,0,4,0,8,27,0,5,0,0,27,27,0,6,0,7,11,2,17,7],[runtime[18],runtime[27],runtime[28],runtime[54],runtime[55],runtime[56],1,2,-3,4],[[0,1,0]],[[0,0]]]),
            '1â€¿1â€¿3â€¿2â€¿1â‰¡â‰¢(5â¥Š0)â†“â†•3â€¿2â€¿1'                              :(1, [[0,6,0,7,0,5,11,3,0,4,16,0,3,0,9,0,2,0,8,17,17,0,1,16,0,0,0,5,0,5,0,6,0,7,0,5,11,5,17,7],[runtime[18],runtime[19],runtime[22],runtime[27],runtime[28],1,3,2,5,0],[[0,1,0]],[[0,0]]]),
            '(â†“âˆ˜â†•â‰¡â†•âˆ˜(1âŠ¸+)+âŸœâŒ½â†‘âˆ˜â†•)5'                                 :(1, [[0,10,0,4,0,6,0,2,27,0,5,0,8,0,0,27,0,0,0,7,0,9,27,0,6,0,4,27,21,0,1,0,4,0,6,0,3,27,21,16,7],[runtime[0],runtime[18],runtime[26],runtime[27],runtime[28],runtime[31],runtime[53],runtime[55],runtime[56],1,5],[[0,1,0]],[[0,0]]]),
            '(â†•3â€¿4)â‰¡1â†“Â¨âŠâ†•2â€¿3â€¿4'                                    :(1, [[0,8,0,5,0,6,11,3,0,2,16,0,3,16,0,4,0,1,26,0,7,17,0,0,0,5,0,6,11,2,0,2,16,17,7],[runtime[18],runtime[27],runtime[28],runtime[36],runtime[47],3,4,1,2],[[0,1,0]],[[0,0]]]),
            '(4+âŒœâ—‹â†•2)â‰¡2â†•â†•5'                                        :(1, [[0,7,0,2,16,0,2,0,6,17,0,1,0,6,0,2,0,4,0,3,0,0,26,27,0,5,17,17,7],[runtime[0],runtime[18],runtime[28],runtime[48],runtime[54],4,2,5],[[0,1,0]],[[0,0]]]),
            '@â†•â†•5'                                                 :(BQNError, [[0,1,0,0,16,0,0,0,2,17,7],[runtime[28],5,'\0'],[[0,1,0]],[[0,0]]]),
            '2â€¿1â†•â†•5'                                               :(BQNError, [[0,3,0,0,16,0,0,0,1,0,2,11,2,17,7],[runtime[28],2,1,5],[[0,1,0]],[[0,0]]]),
            'Â¯1â†•â†•5'                                                :(BQNError, [[0,2,0,0,16,0,0,0,1,17,7],[runtime[28],-1,5],[[0,1,0]],[[0,0]]]),
            '7â†•â†•5'                                                 :(BQNError, [[0,2,0,0,16,0,0,0,1,17,7],[runtime[28],7,5],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©(â†•â‰¡âŠ¢)4â€¿3â¥Š"abcd"'                                    :(1, [[0,6,0,2,0,4,0,5,11,2,17,0,1,0,0,0,3,21,11,0,17,7],[runtime[18],runtime[21],runtime[22],runtime[28],4,3,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '(<â‰¡âŸ¨âŸ©âŠ¸â†•){Ã—}'                                          :(1, [[1,1,0,3,0,4,11,0,27,0,2,0,1,21,16,7,0,0,7],[runtime[2],runtime[12],runtime[18],runtime[28],runtime[55]],[[0,1,0],[0,1,1]],[[0,0],[16,0]]]),
            '(0âŠ¸â†•â‰¡(0â‰Ëœ1+â‰ )âŠ¸â¥Š)â†•6'                                   :(1, [[0,10,0,5,16,0,3,0,7,0,1,0,0,0,9,21,0,6,0,4,26,0,8,21,27,0,2,0,5,0,7,0,8,27,21,16,7],[runtime[0],runtime[14],runtime[18],runtime[22],runtime[24],runtime[28],runtime[45],runtime[55],0,1,6],[[0,1,0]],[[0,0]]]),
            '(7â†•6â€¿0â¥Š"")â‰¡0â€¿7â€¿0â¥Š""'                                  :(1, [[0,6,0,1,0,5,0,3,0,5,11,3,17,0,0,0,6,0,1,0,4,0,5,11,2,17,0,2,0,3,17,17,7],[runtime[18],runtime[22],runtime[28],7,6,0,bqnstr("")],[[0,1,0]],[[0,0]]]),
            "'a'Â«'b'"                                              :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[29],'a','b'],[[0,1,0]],[[0,0]]]),
            '"a"Â»\'b\''                                            :(BQNError, [[0,1,0,0,0,2,17,7],[runtime[30],'b',bqnstr("a")],[[0,1,0]],[[0,0]]]),
            'â‰âŠ¸Â»"abc"'                                             :(BQNError, [[0,3,0,1,0,2,0,0,27,16,7],[runtime[24],runtime[30],runtime[55],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(Â»ËœâŠ¸â‰¡âˆ§Â«ËœâŠ¸â‰¡)""'                                        :(1, [[0,6,0,1,0,5,0,4,0,2,26,27,0,0,0,1,0,5,0,4,0,3,26,27,21,16,7],[runtime[10],runtime[18],runtime[29],runtime[30],runtime[45],runtime[55],bqnstr("")],[[0,1,0]],[[0,0]]]),
            '"a"â‰¡âŸ¨âŸ©Â»"a"'                                           :(1, [[0,2,0,1,11,0,17,0,0,0,2,17,7],[runtime[18],runtime[30],bqnstr("a")],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©â‰¡"a"Â»âŸ¨âŸ©'                                            :(1, [[11,0,0,1,0,2,17,0,0,11,0,17,7],[runtime[18],runtime[30],bqnstr("a")],[[0,1,0]],[[0,0]]]),
            '"aBC"â‰¡"a"Â»"BCD"'                                      :(1, [[0,4,0,1,0,3,17,0,0,0,2,17,7],[runtime[18],runtime[30],bqnstr("aBC"),bqnstr("a"),bqnstr("BCD")],[[0,1,0]],[[0,0]]]),
            '"CDa"â‰¡"a"Â«"BCD"'                                      :(1, [[0,4,0,1,0,3,17,0,0,0,2,17,7],[runtime[18],runtime[29],bqnstr("CDa"),bqnstr("a"),bqnstr("BCD")],[[0,1,0]],[[0,0]]]),
            '"d"â‰¡"abcd"Â«âŸ¨4âŸ©'                                       :(1, [[0,2,11,1,0,1,0,4,17,0,0,0,3,17,7],[runtime[18],runtime[29],4,bqnstr("d"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '((âŠ¢âŒœËœâ‰ Â¨)â‰¡(â‰ Â¨Â«âŒœËœ))""â€¿âŸ¨2,3âŸ©â€¿"abcde"'                    :(1, [[0,9,0,7,0,8,11,2,0,10,11,3,0,4,0,6,0,3,26,26,0,5,0,0,26,20,0,1,0,5,0,0,26,0,4,0,6,0,2,26,26,20,21,16,7],[runtime[14],runtime[18],runtime[21],runtime[29],runtime[45],runtime[47],runtime[48],2,3,bqnstr(""),bqnstr("abcde")],[[0,1,0]],[[0,0]]]),
            '"Zcab"â‰¡"WXYZ"Â«Â´"ab"â€¿"c"â€¿""'                           :(1, [[0,5,0,6,0,7,11,3,0,2,0,1,26,0,4,17,0,0,0,3,17,7],[runtime[18],runtime[29],runtime[50],bqnstr("Zcab"),bqnstr("WXYZ"),bqnstr("ab"),bqnstr("c"),bqnstr("")],[[0,1,0]],[[0,0]]]),
            '"dab"â‰¡\'d\'Â»"abc"'                                    :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[30],'d',bqnstr("dab"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '"dab"â‰¡\'d\'<âŠ¸Â»"abc"'                                  :(1, [[0,6,0,2,0,3,0,0,27,0,4,17,0,1,0,5,17,7],[runtime[12],runtime[18],runtime[30],runtime[55],'d',bqnstr("dab"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            "(1âŠ¸âŒ½â‰¡âŠâŠ¸Â«)'a'+â¥ŠâŸœ(â†•Ã—Â´)4â€¿2"                              :(1, [[0,12,0,13,11,2,0,8,0,1,26,0,4,20,0,10,0,3,27,16,0,0,0,14,17,0,5,0,9,0,7,27,0,2,0,6,0,9,0,11,27,21,16,7],[runtime[0],runtime[2],runtime[18],runtime[22],runtime[28],runtime[29],runtime[31],runtime[36],runtime[50],runtime[55],runtime[56],1,4,2,'a'],[[0,1,0]],[[0,0]]]),
            "Â¯2(âŒ½â‰¡â†‘Â»âŠ¢)'a'+â¥ŠâŸœ(â†•Ã—Â´)4â€¿2"                              :(1, [[0,12,0,13,11,2,0,9,0,1,26,0,6,20,0,10,0,4,27,16,0,0,0,14,17,0,3,0,7,0,5,21,0,2,0,8,21,0,11,17,7],[runtime[0],runtime[2],runtime[18],runtime[21],runtime[22],runtime[26],runtime[28],runtime[30],runtime[31],runtime[50],runtime[56],-2,4,2,'a'],[[0,1,0]],[[0,0]]]),
            '6(â†‘â‰¡Â»âŸœ(â¥ŠâŸœ0)Ëœ)â†•4'                                      :(1, [[0,9,0,3,16,0,5,0,8,0,6,0,1,27,0,6,0,4,27,26,0,0,0,2,21,0,7,17,7],[runtime[18],runtime[22],runtime[26],runtime[28],runtime[30],runtime[45],runtime[56],6,0,4],[[0,1,0]],[[0,0]]]),
            'Â«ËœâŠ¸â‰¡2â€¿3â¥Š"abcdef"'                                     :(1, [[0,7,0,1,0,5,0,6,11,2,17,0,0,0,4,0,3,0,2,26,27,16,7],[runtime[18],runtime[22],runtime[29],runtime[45],runtime[55],2,3,bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            '(Â»â‰¡0âŒˆ-âŸœ1)â†•6'                                          :(1, [[0,8,0,3,16,0,7,0,5,0,0,27,0,1,0,6,21,0,2,0,4,21,16,7],[runtime[1],runtime[7],runtime[18],runtime[28],runtime[30],runtime[56],0,1,6],[[0,1,0]],[[0,0]]]),
            '(Â«â‰¡1âŠ¸âŒ½)â†•6'                                            :(1, [[0,6,0,1,16,0,3,0,4,0,5,27,0,0,0,2,21,16,7],[runtime[18],runtime[28],runtime[29],runtime[31],runtime[55],1,6],[[0,1,0]],[[0,0]]]),
            '(Â»â‰¡0âŒˆ-âŸœ2)â¥ŠâŸœ(â†•Ã—Â´)5â€¿2'                                  :(1, [[0,11,0,10,11,2,0,7,0,1,26,0,5,20,0,8,0,4,27,16,0,10,0,8,0,0,27,0,2,0,9,21,0,3,0,6,21,16,7],[runtime[1],runtime[2],runtime[7],runtime[18],runtime[22],runtime[28],runtime[30],runtime[50],runtime[56],0,2,5],[[0,1,0]],[[0,0]]]),
            '(Â«â‰¡1âŒ½1âŠ¸<âŠ¸Ã—)â¥ŠâŸœ(â†•Ã—Â´)5â€¿2'                                :(1, [[0,11,0,12,11,2,0,7,0,0,26,0,4,20,0,9,0,3,27,16,0,0,0,8,0,1,0,8,0,10,27,27,0,6,0,10,21,0,2,0,5,21,16,7],[runtime[2],runtime[12],runtime[18],runtime[22],runtime[28],runtime[29],runtime[31],runtime[50],runtime[55],runtime[56],1,5,2],[[0,1,0]],[[0,0]]]),
            "âŒ½'a'"                                                 :(BQNError, [[0,1,0,0,16,7],[runtime[31],'a'],[[0,1,0]],[[0,0]]]),
            'âŒ½<âˆ'                                                  :(BQNError, [[0,2,0,0,16,0,1,16,7],[runtime[12],runtime[31],math.inf],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœâŒ½âŸ¨âŸ©'                                                :(1, [[11,0,0,1,0,2,0,0,27,16,7],[runtime[18],runtime[31],runtime[56]],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœâŒ½"a"'                                               :(1, [[0,3,0,1,0,2,0,0,27,16,7],[runtime[18],runtime[31],runtime[56],bqnstr("a")],[[0,1,0]],[[0,0]]]),
            '"ba"â‰¡âŸœâŒ½"ab"'                                          :(1, [[0,4,0,1,0,2,0,0,27,0,3,17,7],[runtime[18],runtime[31],runtime[56],bqnstr("ba"),bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '(âŒ½â‰¡(1-Ëœâ‰ )(-â—‹âŠ‘âˆ¾1â†“âŠ¢)âš‡1âŠ¢)â†•3â€¿2â€¿4'                         :(1, [[0,13,0,14,0,15,11,3,0,6,16,0,3,0,12,0,11,0,3,0,5,0,12,21,0,4,0,8,0,10,0,0,27,21,27,0,1,0,9,0,0,26,0,12,21,21,0,2,0,7,21,16,7],[runtime[1],runtime[14],runtime[18],runtime[21],runtime[23],runtime[27],runtime[28],runtime[31],runtime[37],runtime[45],runtime[54],runtime[61],1,3,2,4],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœâŒ½â†•â†•3'                                               :(1, [[0,4,0,1,16,0,1,16,0,2,0,3,0,0,27,16,7],[runtime[18],runtime[28],runtime[31],runtime[56],3],[[0,1,0]],[[0,0]]]),
            "2âŒ½'a'"                                                :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[31],2,'a'],[[0,1,0]],[[0,0]]]),
            '1â€¿2âŒ½â†•4'                                               :(BQNError, [[0,4,0,0,16,0,1,0,2,0,3,11,2,17,7],[runtime[28],runtime[31],1,2,4],[[0,1,0]],[[0,0]]]),
            'âŒ½â€¿2âŒ½3+âŒœâ—‹â†•4'                                           :(BQNError, [[0,7,0,1,0,4,0,3,0,0,26,27,0,6,17,0,2,0,2,0,5,11,2,17,7],[runtime[0],runtime[28],runtime[31],runtime[48],runtime[54],2,3,4],[[0,1,0]],[[0,0]]]),
            '(<<3)âŒ½â†•4'                                             :(BQNError, [[0,4,0,1,16,0,2,0,3,0,0,16,0,0,16,17,7],[runtime[12],runtime[28],runtime[31],3,4],[[0,1,0]],[[0,0]]]),
            'âˆ§Â´5(âŒ½â‰¡âŠ¢)Â¨âŸ¨"",â¥Šâˆ,â†•5,â†•0â€¿4,2â€¿0â€¿3â¥Š""âŸ©'                    :(1, [[0,14,0,9,0,3,16,0,8,0,4,16,0,10,0,11,11,2,0,4,16,0,14,0,3,0,12,0,10,0,13,11,3,17,11,5,0,6,0,2,0,1,0,5,21,26,0,8,17,0,7,0,0,26,16,7],[runtime[10],runtime[18],runtime[21],runtime[22],runtime[28],runtime[31],runtime[47],runtime[50],5,math.inf,0,4,2,3,bqnstr("")],[[0,1,0]],[[0,0]]]),
            'âˆ§Â´("bcdea"â‰¡âŒ½âŸœ"abcde")Â¨1+5Ã—Â¯10â€¿Â¯2â€¿Â¯1â€¿0â€¿1â€¿6â€¿61'         :(1, [[0,10,0,11,0,12,0,13,0,8,0,14,0,15,11,7,0,1,0,9,17,0,0,0,8,17,0,5,0,17,0,7,0,4,27,0,3,0,16,21,26,16,0,6,0,2,26,16,7],[runtime[0],runtime[2],runtime[10],runtime[18],runtime[31],runtime[47],runtime[50],runtime[56],1,5,-10,-2,-1,0,6,61,bqnstr("bcdea"),bqnstr("abcde")],[[0,1,0]],[[0,0]]]),
            'âˆ§Â´âŸ¨1,0â€¿2,Â¯1â€¿1â€¿3âŸ©(âŠ‘âˆ˜âŒ½â‰¡(3âŠ¸â†‘)âŠ¸âŠ‘)âš‡Â¯1â€¿âˆ 2â€¿3â€¿5â¥Š"abcdef"'    :(1, [[0,17,0,2,0,12,0,14,0,16,11,3,17,0,13,0,15,11,2,0,9,0,5,0,8,0,3,0,8,0,14,27,27,0,1,0,4,0,7,0,5,27,21,27,0,10,0,11,0,12,11,2,0,13,0,10,0,14,11,3,11,3,17,0,6,0,0,26,16,7],[runtime[10],runtime[18],runtime[22],runtime[26],runtime[31],runtime[37],runtime[50],runtime[53],runtime[55],runtime[61],1,0,2,-1,3,math.inf,5,bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            "(âŸ¨âŸ©âŠ¸âŒ½â‰¡<)'a'"                                          :(1, [[0,4,0,0,0,1,0,2,0,3,11,0,27,21,16,7],[runtime[12],runtime[18],runtime[31],runtime[55],'a'],[[0,1,0]],[[0,0]]]),
            '/2'                                                   :(BQNError, [[0,1,0,0,16,7],[runtime[33],2],[[0,1,0]],[[0,0]]]),
            '/1â€¿Â¯1â€¿0'                                              :(BQNError, [[0,1,0,2,0,3,11,3,0,0,16,7],[runtime[33],1,-1,0],[[0,1,0]],[[0,0]]]),
            '/=âŒœËœâ†•2'                                               :(BQNError, [[0,5,0,1,16,0,3,0,4,0,0,26,26,16,0,2,16,7],[runtime[15],runtime[28],runtime[33],runtime[45],runtime[48],2],[[0,1,0]],[[0,0]]]),
            '0â€¿4â‰¡/1â€¿0â€¿0â€¿0â€¿1â€¿0'                                     :(1, [[0,4,0,2,0,2,0,2,0,4,0,2,11,6,0,1,16,0,0,0,2,0,3,11,2,17,7],[runtime[18],runtime[33],0,4,1],[[0,1,0]],[[0,0]]]),
            '1â€¿1â€¿2â‰¡/0â€¿2â€¿1'                                         :(1, [[0,4,0,3,0,2,11,3,0,1,16,0,0,0,2,0,2,0,3,11,3,17,7],[runtime[18],runtime[33],1,2,0],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœ/âŸ¨âŸ©'                                                :(1, [[11,0,0,1,0,2,0,0,27,16,7],[runtime[18],runtime[33],runtime[56]],[[0,1,0]],[[0,0]]]),
            '2/<2'                                                 :(BQNError, [[0,2,0,0,16,0,1,0,2,17,7],[runtime[12],runtime[33],2],[[0,1,0]],[[0,0]]]),
            '0â€¿1/"abc"'                                            :(BQNError, [[0,3,0,0,0,1,0,2,11,2,17,7],[runtime[33],0,1,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŸ¨â†•3,â†•3âŸ©/"abc"'                                        :(BQNError, [[0,3,0,1,0,2,0,0,16,0,2,0,0,16,11,2,17,7],[runtime[28],runtime[33],3,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '1â€¿2/â—‹â‰"ab"'                                           :(BQNError, [[0,5,0,0,0,2,0,1,27,0,3,0,4,11,2,17,7],[runtime[24],runtime[33],runtime[54],1,2,bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            'Â¯1â€¿2/"ab"'                                            :(BQNError, [[0,3,0,0,0,1,0,2,11,2,17,7],[runtime[33],-1,2,bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '"aabbcc"â‰¡2/"abc"'                                     :(1, [[0,4,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[33],2,bqnstr("aabbcc"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '""â‰¡4/""'                                              :(1, [[0,3,0,1,0,2,17,0,0,0,3,17,7],[runtime[18],runtime[33],4,bqnstr("")],[[0,1,0]],[[0,0]]]),
            '(6â€¿0â¥Š"")â‰¡âŸ¨5,1âŸ©â€¿âŸ¨âŸ©/2â€¿0â¥Š""'                             :(1, [[0,8,0,1,0,7,0,4,11,2,17,0,2,0,5,0,6,11,2,11,0,11,2,17,0,0,0,8,0,1,0,3,0,4,11,2,17,17,7],[runtime[18],runtime[22],runtime[33],6,0,5,1,2,bqnstr("")],[[0,1,0]],[[0,0]]]),
            '3â€¿3â€¿3â€¿2â€¿2â€¿1â‰¡/Ëœ3â€¿2â€¿1'                                  :(1, [[0,3,0,4,0,5,11,3,0,2,0,1,26,16,0,0,0,3,0,3,0,3,0,4,0,4,0,5,11,6,17,7],[runtime[18],runtime[33],runtime[45],3,2,1],[[0,1,0]],[[0,0]]]),
            '3â€¿3â€¿3â€¿2â€¿2â€¿1â‰¡<âŠ¸/3â€¿2â€¿1'                                 :(1, [[0,4,0,5,0,6,11,3,0,2,0,3,0,0,27,16,0,1,0,4,0,4,0,4,0,5,0,5,0,6,11,6,17,7],[runtime[12],runtime[18],runtime[33],runtime[55],3,2,1],[[0,1,0]],[[0,0]]]),
            '(â‰1âˆ¾Â¨1â€¿2â€¿2)â‰¡(â†•Â¨/â†•)2â€¿3'                                :(1, [[0,7,0,8,11,2,0,3,0,4,0,5,0,3,26,21,16,0,0,0,6,0,7,0,7,11,3,0,5,0,1,26,0,6,17,0,2,16,17,7],[runtime[18],runtime[23],runtime[24],runtime[28],runtime[33],runtime[47],1,2,3],[[0,1,0]],[[0,0]]]),
            "(âŸ¨âŸ©âŠ¸/â‰¡<)'a'"                                          :(1, [[0,4,0,0,0,1,0,2,0,3,11,0,27,21,16,7],[runtime[12],runtime[18],runtime[33],runtime[55],'a'],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©(/â‰¡âŠ¢)â†•10'                                           :(1, [[0,4,0,2,16,0,1,0,0,0,3,21,11,0,17,7],[runtime[18],runtime[21],runtime[28],runtime[33],10],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©(/â‰¡âŠ¢)â‰"ab"'                                         :(1, [[0,4,0,2,16,0,1,0,0,0,3,21,11,0,17,7],[runtime[18],runtime[21],runtime[24],runtime[33],bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            "âŸ¨2,<3âŸ©(/â‰¡â¥ŠËœÂ¨âŸœâ‰¢/âŠ¢)'a'+4â€¿2â¥Šâ†•8"                          :(1, [[0,14,0,6,16,0,5,0,13,0,11,11,2,17,0,0,0,15,17,0,4,0,7,0,3,0,10,0,9,0,8,0,5,26,26,27,21,0,2,0,7,21,0,11,0,12,0,1,16,11,2,17,7],[runtime[0],runtime[12],runtime[18],runtime[19],runtime[21],runtime[22],runtime[28],runtime[33],runtime[45],runtime[47],runtime[56],2,3,4,8,'a'],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_layer6(self):
        runtime = self.runtime
        # fmt: off
        self.runcases({
            "âˆ¾'c'"                                                                             :(BQNError, [[0,1,0,0,16,7],[runtime[23],'c'],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœ(âˆ¾â¥ŠÂ¨)"abc"'                                                                     :(1, [[0,5,0,3,0,1,26,0,2,20,0,4,0,0,27,16,7],[runtime[18],runtime[22],runtime[23],runtime[47],runtime[56],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(âˆ¾Â´â‰¡âˆ¾)"ab"â€¿"cde"â€¿""'                                                              :(1, [[0,3,0,4,0,5,11,3,0,1,0,0,0,2,0,1,26,21,16,7],[runtime[18],runtime[23],runtime[50],bqnstr("ab"),bqnstr("cde"),bqnstr("")],[[0,1,0]],[[0,0]]]),
            'âˆ¾"abc"'                                                                           :(BQNError, [[0,1,0,0,16,7],[runtime[23],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âˆ¾â‰"ab"â€¿"cde"â€¿""'                                                                  :(BQNError, [[0,2,0,3,0,4,11,3,0,1,16,0,0,16,7],[runtime[23],runtime[24],bqnstr("ab"),bqnstr("cde"),bqnstr("")],[[0,1,0]],[[0,0]]]),
            '"abc"â‰¡âˆ¾"ab"â€¿\'c\'â€¿""'                                                             :(1, [[0,4,0,2,0,5,11,3,0,1,16,0,0,0,3,17,7],[runtime[18],runtime[23],'c',bqnstr("abc"),bqnstr("ab"),bqnstr("")],[[0,1,0]],[[0,0]]]),
            '1â€¿2â€¿3â€¿4â€¿6â€¿9â‰¡âˆ¾(âŠ¢Ã—â‰ â†‘â†“)1+â†•3'                                                         :(1, [[0,11,0,8,16,0,0,0,9,17,0,7,0,6,0,2,21,0,1,0,4,21,16,0,5,16,0,3,0,9,0,10,0,11,0,12,0,13,0,14,11,6,17,7],[runtime[0],runtime[2],runtime[14],runtime[18],runtime[21],runtime[23],runtime[26],runtime[27],runtime[28],1,2,3,4,6,9],[[0,1,0]],[[0,0]]]),
            '(â‰¡âŸœâˆ¾âˆ§â‰¡âŸœ(âˆ¾<))<4'                                                                   :(1, [[0,5,0,1,16,0,1,0,3,20,0,4,0,2,27,0,0,0,3,0,4,0,2,27,21,16,7],[runtime[10],runtime[12],runtime[18],runtime[23],runtime[56],4],[[0,1,0]],[[0,0]]]),
            'âŸ¨1â€¿4,â¥Š2âŸ©((âˆ¾â‹†âŒœâŒœ)â‰¡â‹†âŒœâ—‹âˆ¾)âŸ¨2â€¿3â€¿4,âŸ¨âŸ©,â¥Š5âŸ©'                                               :(1, [[0,8,0,9,0,7,11,3,11,0,0,10,0,2,16,11,3,0,3,0,5,0,4,0,0,26,27,0,1,0,4,0,4,0,0,26,26,0,3,20,21,0,6,0,7,11,2,0,8,0,2,16,11,2,17,7],[runtime[4],runtime[18],runtime[22],runtime[23],runtime[48],runtime[54],1,4,2,3,5],[[0,1,0]],[[0,0]]]),
            '(6â€¿3â¥Š0)â‰¡âˆ¾âŸ¨2â€¿3,3,3â€¿3âŸ©â¥ŠÂ¨0'                                                          :(1, [[0,6,0,3,0,1,26,0,7,0,5,11,2,0,5,0,5,0,5,11,2,11,3,17,0,2,16,0,0,0,6,0,1,0,4,0,5,11,2,17,17,7],[runtime[18],runtime[22],runtime[23],runtime[47],6,3,0,2],[[0,1,0]],[[0,0]]]),
            'âˆ¾âŸ¨3,3,4,4â€¿3âŸ©â¥ŠÂ¨0'                                                                  :(BQNError, [[0,5,0,2,0,0,26,0,3,0,3,0,4,0,4,0,3,11,2,11,4,17,0,1,16,7],[runtime[22],runtime[23],runtime[47],3,4,0],[[0,1,0]],[[0,0]]]),
            'âˆ¾âŸ¨2â€¿3,1â€¿3,2â€¿2âŸ©â¥ŠÂ¨0'                                                                :(BQNError, [[0,6,0,2,0,0,26,0,3,0,4,11,2,0,5,0,4,11,2,0,3,0,3,11,2,11,3,17,0,1,16,7],[runtime[22],runtime[23],runtime[47],2,3,1,0],[[0,1,0]],[[0,0]]]),
            '"abcd"â‰¡"abc"âˆ¾\'d\''                                                               :(1, [[0,2,0,1,0,4,17,0,0,0,3,17,7],[runtime[18],runtime[23],'d',bqnstr("abcd"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '"abcd"â‰¡"abc"âˆ¾<\'d\''                                                              :(1, [[0,3,0,0,16,0,2,0,5,17,0,1,0,4,17,7],[runtime[12],runtime[18],runtime[23],'d',bqnstr("abcd"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(â†•4â€¿3)â‰¡(â†•3â€¿3)âˆ¾3âˆ¾Â¨â†•3'                                                              :(1, [[0,5,0,2,16,0,3,0,1,26,0,5,17,0,1,0,5,0,5,11,2,0,2,16,17,0,0,0,4,0,5,11,2,0,2,16,17,7],[runtime[18],runtime[23],runtime[28],runtime[47],4,3],[[0,1,0]],[[0,0]]]),
            '(âˆ¾Ëœâ‰¡Â·Â¯1âŠ¸(Ã—Â´âˆ˜â†“âˆ¾â†‘)âˆ˜â‰¢âŠ¸â¥Šâ‰Ëœ)2â€¿3â¥Š"abcdef"'                                              :(1, [[0,15,0,3,0,13,0,14,11,2,17,0,8,0,5,26,0,3,0,11,0,2,0,10,0,6,0,4,0,7,0,10,0,9,0,0,26,27,21,0,11,0,12,27,27,27,20,0,1,0,8,0,4,26,21,16,7],[runtime[2],runtime[18],runtime[19],runtime[22],runtime[23],runtime[24],runtime[26],runtime[27],runtime[45],runtime[50],runtime[53],runtime[55],-1,2,3,bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            '(âˆ¾Â´â‰¡âˆ¾)âŸ¨3â€¿2â€¿1,0â€¿2â€¿1âŸ©â¥ŠÂ¨<â†•6'                                                         :(1, [[0,11,0,4,16,0,0,16,0,5,0,2,26,0,7,0,8,0,9,11,3,0,10,0,8,0,9,11,3,11,2,17,0,3,0,1,0,6,0,3,26,21,16,7],[runtime[12],runtime[18],runtime[22],runtime[23],runtime[28],runtime[47],runtime[50],3,2,1,0,6],[[0,1,0]],[[0,0]]]),
            '\'a\'âˆ¾â‰"abc"'                                                                     :(BQNError, [[0,3,0,1,16,0,0,0,2,17,7],[runtime[23],runtime[24],'a',bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '"ab"âˆ¾â—‹â‰"cde"'                                                                     :(BQNError, [[0,4,0,1,0,2,0,0,27,0,3,17,7],[runtime[23],runtime[24],runtime[54],bqnstr("ab"),bqnstr("cde")],[[0,1,0]],[[0,0]]]),
            '(2â€¿3â¥Šâ†•6)âˆ¾â†•2'                                                                      :(BQNError, [[0,3,0,2,16,0,1,0,5,0,2,16,0,0,0,3,0,4,11,2,17,17,7],[runtime[22],runtime[23],runtime[28],2,3,6],[[0,1,0]],[[0,0]]]),
            'âŸ¨1â€¿2,â¥Š0,â¥Š3âŸ©â‰¡âŠ”1â€¿0â€¿0â€¿2'                                                             :(1, [[0,3,0,5,0,5,0,4,11,4,0,2,16,0,0,0,3,0,4,11,2,0,5,0,1,16,0,6,0,1,16,11,3,17,7],[runtime[18],runtime[22],runtime[42],1,2,0,3],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©â‰¡âŠ”5â¥ŠÂ¯1'                                                                         :(1, [[0,4,0,1,0,3,17,0,2,16,0,0,11,0,17,7],[runtime[18],runtime[22],runtime[42],5,-1],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœâŠ”âŸ¨âŸ©'                                                                            :(1, [[11,0,0,1,0,2,0,0,27,16,7],[runtime[18],runtime[42],runtime[56]],[[0,1,0]],[[0,0]]]),
            'âŠ”3'                                                                               :(BQNError, [[0,1,0,0,16,7],[runtime[42],3],[[0,1,0]],[[0,0]]]),
            'âŠ”<3'                                                                              :(BQNError, [[0,2,0,0,16,0,1,16,7],[runtime[12],runtime[42],3],[[0,1,0]],[[0,0]]]),
            'âŠ”â‰â†•3'                                                                             :(BQNError, [[0,3,0,1,16,0,0,16,0,2,16,7],[runtime[24],runtime[28],runtime[42],3],[[0,1,0]],[[0,0]]]),
            'âŠ”1.5â€¿0â€¿2'                                                                         :(BQNError, [[0,1,0,2,0,3,11,3,0,0,16,7],[runtime[42],1.5,0,2],[[0,1,0]],[[0,0]]]),
            'âŠ”1â€¿Â¯2'                                                                            :(BQNError, [[0,1,0,2,11,2,0,0,16,7],[runtime[42],1,-2],[[0,1,0]],[[0,0]]]),
            '(âŠ”â‰¡â¥ŠÂ¨Â¨âˆ˜âŠ”âˆ˜âŠ‘)âŸ¨1â€¿0â€¿0â€¿2âŸ©'                                                             :(1, [[0,6,0,7,0,7,0,8,11,4,11,1,0,2,0,5,0,3,0,5,0,4,0,4,0,1,26,26,27,27,0,0,0,3,21,16,7],[runtime[18],runtime[22],runtime[37],runtime[42],runtime[47],runtime[53],1,0,2],[[0,1,0]],[[0,0]]]),
            '(â‰âŸ2âˆ˜<Â¨âŒ½â†•3â€¿2)â‰¡âŠ”âŸ¨2â€¿1â€¿0,0â€¿1âŸ©'                                                       :(1, [[0,9,0,11,0,12,11,3,0,12,0,11,11,2,11,2,0,5,16,0,1,0,10,0,9,11,2,0,3,16,0,4,16,0,6,0,0,0,7,0,9,0,8,0,2,27,27,26,16,17,7],[runtime[12],runtime[18],runtime[24],runtime[28],runtime[31],runtime[42],runtime[47],runtime[53],runtime[62],2,3,1,0],[[0,1,0]],[[0,0]]]),
            '(â†•0â€¿0)â‰¡âŠ”âŸ¨âŸ©â€¿âŸ¨âŸ©'                                                                    :(1, [[11,0,11,0,11,2,0,2,16,0,0,0,3,0,3,11,2,0,1,16,17,7],[runtime[18],runtime[28],runtime[42],0],[[0,1,0]],[[0,0]]]),
            '(âŠ”â‰¡Â·â‰âŸ2âˆ˜<Â·âˆ¾âŒœÂ´/âˆ˜(0âŠ¸=)Â¨)âŸ¨0â€¿Â¯1â€¿0â€¿0,Â¯1â€¿0â€¿0âŸ©'                                          :(1, [[0,14,0,15,0,14,0,14,11,4,0,15,0,14,0,14,11,3,11,2,0,7,0,1,0,11,0,14,27,0,10,0,5,27,26,0,9,0,8,0,3,26,26,20,0,0,0,10,0,13,0,12,0,4,27,27,20,0,2,0,6,21,16,7],[runtime[12],runtime[15],runtime[18],runtime[23],runtime[24],runtime[33],runtime[42],runtime[47],runtime[48],runtime[50],runtime[53],runtime[55],runtime[62],2,0,-1],[[0,1,0]],[[0,0]]]),
            '(0â€¿0â€¿1â†‘âŒœâ‰âŸ2âˆ˜<âˆ˜â¥ŠÂ¨1â€¿0)â‰¡âŠ”âŸ¨2,1â€¿0âŸ©'                                                    :(1, [[0,12,0,11,0,10,11,2,11,2,0,5,16,0,1,0,11,0,10,11,2,0,6,0,2,0,8,0,0,0,8,0,12,0,9,0,3,27,27,27,26,16,0,7,0,4,26,0,10,0,10,0,11,11,3,17,17,7],[runtime[12],runtime[18],runtime[22],runtime[24],runtime[26],runtime[42],runtime[47],runtime[48],runtime[53],runtime[62],0,1,2],[[0,1,0]],[[0,0]]]),
            '(0â€¿0â€¿1â†‘âŒœâ‰âŸ2âˆ˜(<0â€¿0â€¿0âŠ¸âˆ¾)Â¨1â€¿0)â‰¡âŠ”0â€¿0âŠ¸â†“Â¨âŸ¨2,1â€¿0âŸ©'                                       :(1, [[0,14,0,13,0,12,11,2,11,2,0,7,0,5,0,10,0,12,0,12,11,2,27,26,16,0,6,16,0,1,0,13,0,12,11,2,0,7,0,2,0,10,0,12,0,12,0,12,11,3,27,0,0,20,0,9,0,14,0,11,0,3,27,27,26,16,0,8,0,4,26,0,12,0,12,0,13,11,3,17,17,7],[runtime[12],runtime[18],runtime[23],runtime[24],runtime[26],runtime[27],runtime[42],runtime[47],runtime[48],runtime[53],runtime[55],runtime[62],0,1,2],[[0,1,0]],[[0,0]]]),
            '4â€¿3â€¿2(â‹ˆâ‰¡Â·(â‰ Â¨â‹ˆâˆ¾)/âŠ¸âŠ”)"abcdefghi"'                                                   :(1, [[0,11,0,5,0,7,0,4,27,0,2,0,3,0,6,0,0,26,21,20,0,1,0,3,21,0,8,0,9,0,10,11,3,17,7],[runtime[14],runtime[18],runtime[23],runtime[25],runtime[33],runtime[42],runtime[47],runtime[55],4,3,2,bqnstr("abcdefghi")],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©â‰¡(3â¥ŠÂ¯1)âŠ”"abc"'                                                                  :(1, [[0,5,0,2,0,4,0,1,0,3,17,17,0,0,11,0,17,7],[runtime[18],runtime[22],runtime[42],3,-1,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©â‰¡(2â¥ŠÂ¯1)âŠ”"a"'                                                                    :(1, [[0,5,0,2,0,4,0,1,0,3,17,17,0,0,11,0,17,7],[runtime[18],runtime[22],runtime[42],2,-1,bqnstr("a")],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©â‰¡âŸ¨Â¯1âŸ©âŠ”""'                                                                       :(1, [[0,3,0,1,0,2,11,1,17,0,0,11,0,17,7],[runtime[18],runtime[42],-1,bqnstr("")],[[0,1,0]],[[0,0]]]),
            "âŠ”Ëœ'a'â€¿1â€¿0"                                                                        :(BQNError, [[0,4,0,2,0,3,11,3,0,1,0,0,26,16,7],[runtime[42],runtime[45],1,0,'a'],[[0,1,0]],[[0,0]]]),
            '4âŠ”â—‹â†•2'                                                                            :(BQNError, [[0,4,0,0,0,2,0,1,27,0,3,17,7],[runtime[28],runtime[42],runtime[54],4,2],[[0,1,0]],[[0,0]]]),
            '(â‰Ë˜1â€¿1â€¿4<âˆ˜â¥Šâ‰1 16â€¿4+âŒœâ†•4)â‰¡2â†“âŸ¨3â€¿2,Â¯1â€¿0â€¿Â¯1âŸ©âŠ”2â€¿3â€¿4â¥Šâ†•24'                                :(1, [[0,19,0,6,16,0,3,0,15,0,16,0,13,11,3,17,0,7,0,16,0,15,11,2,0,17,0,18,0,17,11,3,11,2,17,0,5,0,15,17,0,2,0,13,0,6,16,0,9,0,0,26,0,14,0,13,11,2,17,0,12,0,11,0,3,0,10,0,1,27,27,0,12,0,12,0,13,11,3,17,0,8,0,4,26,16,17,7],[runtime[0],runtime[12],runtime[18],runtime[22],runtime[24],runtime[27],runtime[28],runtime[42],runtime[46],runtime[48],runtime[53],runtime[60],1,4,16,2,3,-1,0,24],[[0,1,0]],[[0,0]]]),
            'â¥Šâš‡0âŠ¸â‰¡â—‹âŠ”âŸœ(â¥Š<)1â€¿2â€¿2â€¿Â¯1â€¿0'                                                           :(1, [[0,9,0,10,0,10,0,11,0,8,11,5,0,0,0,2,20,0,6,0,3,0,4,0,1,0,5,0,8,0,7,0,2,27,27,27,27,16,7],[runtime[12],runtime[18],runtime[22],runtime[42],runtime[54],runtime[55],runtime[56],runtime[61],0,1,2,-1],[[0,1,0]],[[0,0]]]),
            '(âˆ¾â†•Â¨âˆ˜â‰¢âŠ¸âŠ”)âŠ¸â‰¡ 3â€¿2â€¿4â¥Šâ†•24'                                                            :(1, [[0,12,0,4,16,0,2,0,9,0,10,0,11,11,3,17,0,0,0,8,0,5,0,8,0,1,0,7,0,6,0,4,26,27,27,0,3,20,27,16,7],[runtime[18],runtime[19],runtime[22],runtime[23],runtime[28],runtime[42],runtime[47],runtime[53],runtime[55],3,2,4,24],[[0,1,0]],[[0,0]]]),
            '-âŸœ\'a\'âŠ¸(âŠ”â‰¡âŠ”â—‹â¥Š)"acc"â‰"bac"'                                                       :(1, [[0,10,0,3,0,9,17,0,2,0,5,0,4,27,0,1,0,4,21,0,6,0,8,0,7,0,0,27,27,16,7],[runtime[1],runtime[18],runtime[22],runtime[24],runtime[42],runtime[54],runtime[55],runtime[56],'a',bqnstr("acc"),bqnstr("bac")],[[0,1,0]],[[0,0]]]),
            '(2â€¿1/âŸ¨â†•0â€¿1,1â€¿1â¥Š3âŸ©)â‰¡2âŠ”â¥Š3'                                                          :(1, [[0,8,0,1,16,0,4,0,5,17,0,0,0,7,0,6,11,2,0,2,16,0,8,0,1,0,6,0,6,11,2,17,11,2,0,3,0,5,0,6,11,2,17,17,7],[runtime[18],runtime[22],runtime[28],runtime[33],runtime[42],2,1,0,3],[[0,1,0]],[[0,0]]]),
            '((<=Â·â†•1âŠ¸+)â‰¡Â·â‰¢Â¨<Â¨âŠ¸âŠ”âŸœ(<@))2â€¿1â€¿3'                                                    :(1, [[0,11,0,10,0,12,11,3,0,13,0,1,16,0,9,0,6,0,8,0,7,0,1,26,27,27,0,7,0,4,26,20,0,3,0,0,0,8,0,10,27,0,5,20,0,2,0,1,21,21,16,7],[runtime[0],runtime[12],runtime[15],runtime[18],runtime[19],runtime[28],runtime[42],runtime[47],runtime[55],runtime[56],1,2,3,'\0'],[[0,1,0]],[[0,0]]]),
            'âŸ¨1â€¿2,3â€¿1âŸ©âŠ”2â€¿3â¥Š0'                                                                  :(BQNError, [[0,5,0,0,0,3,0,4,11,2,17,0,1,0,2,0,3,11,2,0,4,0,2,11,2,11,2,17,7],[runtime[22],runtime[42],1,2,3,0],[[0,1,0]],[[0,0]]]),
            'âŸ¨1â€¿2,3â€¿4â€¿5,6â€¿7âŸ©âŠ”2â€¿3â¥Š0'                                                            :(BQNError, [[0,9,0,0,0,3,0,4,11,2,17,0,1,0,2,0,3,11,2,0,4,0,5,0,6,11,3,0,7,0,8,11,2,11,3,17,7],[runtime[22],runtime[42],1,2,3,4,5,6,7,0],[[0,1,0]],[[0,0]]]),
            'â‰âŠ¸âŠ”â‰Ë˜â†•3'                                                                          :(BQNError, [[0,5,0,1,16,0,3,0,0,26,16,0,2,0,4,0,0,27,16,7],[runtime[24],runtime[28],runtime[42],runtime[46],runtime[55],3],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ¨<3,2âŸ©,Â¯1â€¿0â€¿Â¯1âŸ©âŠ”2â€¿3â€¿4â¥Šâ†•24'                                                       :(BQNError, [[0,9,0,2,16,0,1,0,5,0,4,0,8,11,3,17,0,3,0,4,0,0,16,0,5,11,2,0,6,0,7,0,6,11,3,11,2,17,7],[runtime[12],runtime[22],runtime[28],runtime[42],3,2,-1,0,4,24],[[0,1,0]],[[0,0]]]),
            '(1â€¿3/âŸ¨"a",""âŸ©)â‰¡0â€¿Â¯1â€¿4âŠ”"ab"'                                                       :(1, [[0,10,0,2,0,5,0,6,0,7,11,3,17,0,0,0,8,0,9,11,2,0,1,0,3,0,4,11,2,17,17,7],[runtime[18],runtime[33],runtime[42],1,3,0,-1,4,bqnstr("a"),bqnstr(""),bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            'Â¯1âŠ¸â†“âŠ¸(â‰¡â—‹(âŠ”âŸœ"ab"))2â€¿3â€¿1'                                                           :(1, [[0,7,0,8,0,9,11,3,0,10,0,5,0,2,27,0,3,0,0,27,0,4,0,1,0,4,0,6,27,27,16,7],[runtime[18],runtime[27],runtime[42],runtime[54],runtime[55],runtime[56],-1,2,3,1,bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '(â‰1â€¿1â€¿0â‰âˆ˜/âŸœâ‰Â¨"bac")â‰¡âŸ¨0,1â€¿0â€¿3âŸ©âŠ”"ab"'                                               :(1, [[0,11,0,3,0,8,0,7,0,8,0,9,11,3,11,2,17,0,0,0,10,0,4,0,1,0,6,0,2,0,5,0,1,27,27,26,0,7,0,7,0,8,11,3,17,0,1,16,17,7],[runtime[18],runtime[24],runtime[33],runtime[42],runtime[47],runtime[53],runtime[56],1,0,3,bqnstr("bac"),bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '(âŒ½Ë˜â‰¡Â·âˆ¾âŸ¨2â€¿2,1â€¿0â€¿1âŸ©âŠ¸âŠ”)"ab"â‰"cd"'                                                    :(1, [[0,11,0,2,0,10,17,0,4,0,6,0,7,0,7,11,2,0,8,0,9,0,8,11,3,11,2,27,0,1,20,0,0,0,5,0,3,26,21,16,7],[runtime[18],runtime[23],runtime[24],runtime[31],runtime[42],runtime[46],runtime[55],2,1,0,bqnstr("ab"),bqnstr("cd")],[[0,1,0]],[[0,0]]]),
            '(2â€¿3â¥Šâ†•4)âŠ”â†•2â€¿2'                                                                    :(BQNError, [[0,3,0,3,11,2,0,1,16,0,2,0,5,0,1,16,0,0,0,3,0,4,11,2,17,17,7],[runtime[22],runtime[28],runtime[42],2,3,4],[[0,1,0]],[[0,0]]]),
            '(3â€¿3â¥Šâ†•4)âŠ”â†•2â€¿2'                                                                    :(BQNError, [[0,5,0,5,11,2,0,1,16,0,2,0,4,0,1,16,0,0,0,3,0,3,11,2,17,17,7],[runtime[22],runtime[28],runtime[42],3,4,2],[[0,1,0]],[[0,0]]]),
            "âŠËœ'a'"                                                                            :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[38],runtime[45],'a'],[[0,1,0]],[[0,0]]]),
            'âŠâŠ¸âŠ"abc"'                                                                         :(BQNError, [[0,3,0,1,0,2,0,0,27,16,7],[runtime[36],runtime[38],runtime[55],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(3â€¿2â€¿4â¥Š0)âŠ4â¥Š1'                                                                    :(BQNError, [[0,6,0,0,0,4,17,0,1,0,5,0,0,0,2,0,3,0,4,11,3,17,17,7],[runtime[22],runtime[38],3,2,4,0,1],[[0,1,0]],[[0,0]]]),
            '2â€¿0â€¿4â‰¡"abcd"âŠ"cae"'                                                               :(1, [[0,6,0,1,0,5,17,0,0,0,2,0,3,0,4,11,3,17,7],[runtime[18],runtime[38],2,0,4,bqnstr("abcd"),bqnstr("cae")],[[0,1,0]],[[0,0]]]),
            'âŸ¨1âŸ©â‰¡"abcd"âŠ"b"'                                                                   :(1, [[0,4,0,1,0,3,17,0,0,0,2,11,1,17,7],[runtime[18],runtime[38],1,bqnstr("abcd"),bqnstr("b")],[[0,1,0]],[[0,0]]]),
            '(<2)â‰¡"cdef"âŠ\'e\''                                                                :(1, [[0,4,0,2,0,5,17,0,1,0,3,0,0,16,17,7],[runtime[12],runtime[18],runtime[38],2,'e',bqnstr("cdef")],[[0,1,0]],[[0,0]]]),
            '(<3)â‰¡âŠâŸœ(3âŠ¸âŠ)"abcd"'                                                               :(1, [[0,7,0,2,0,4,0,6,27,0,5,0,3,27,16,0,1,0,6,0,0,16,17,7],[runtime[12],runtime[18],runtime[36],runtime[38],runtime[55],runtime[56],3,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '(5âŒŠ3+â†•5)â‰¡âŠâŸœ(3â€¿0â€¿0+âš‡1âŠ¢)â†•5â€¿2â€¿1'                                                     :(1, [[0,8,0,12,0,11,11,3,0,4,16,0,3,0,11,0,7,0,0,27,0,9,0,10,0,10,11,3,21,0,6,0,5,27,16,0,2,0,8,0,4,16,0,0,0,9,17,0,1,0,8,17,17,7],[runtime[0],runtime[6],runtime[18],runtime[21],runtime[28],runtime[38],runtime[56],runtime[61],5,3,0,1,2],[[0,1,0]],[[0,0]]]),
            'âŠ+Ë™@'                                                                             :(BQNError, [[0,3,0,2,0,0,26,16,0,1,16,7],[runtime[0],runtime[38],runtime[44],'\0'],[[0,1,0]],[[0,0]]]),
            '0â€¿0â€¿1â€¿0â€¿2â‰¡âŠ"ccacb"'                                                               :(1, [[0,5,0,1,16,0,0,0,2,0,2,0,3,0,2,0,4,11,5,17,7],[runtime[18],runtime[38],0,1,2,bqnstr("ccacb")],[[0,1,0]],[[0,0]]]),
            '0â€¿0â€¿1â€¿0â€¿2â‰¡âŠâ‰ËœË˜"ccacb"'                                                            :(1, [[0,8,0,4,0,3,0,1,26,26,16,0,2,16,0,0,0,5,0,5,0,6,0,5,0,7,11,5,17,7],[runtime[18],runtime[24],runtime[38],runtime[45],runtime[46],0,1,2,bqnstr("ccacb")],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœâŠâŸ¨âŸ©'                                                                            :(1, [[11,0,0,1,0,2,0,0,27,16,7],[runtime[18],runtime[38],runtime[56]],[[0,1,0]],[[0,0]]]),
            '(â†•5)âˆŠ1'                                                                           :(BQNError, [[0,3,0,1,0,2,0,0,16,17,7],[runtime[28],runtime[40],5,1],[[0,1,0]],[[0,0]]]),
            '2âˆŠâ‰Ë˜â†•4'                                                                           :(BQNError, [[0,5,0,1,16,0,3,0,0,26,16,0,2,0,4,17,7],[runtime[24],runtime[28],runtime[40],runtime[46],2,4],[[0,1,0]],[[0,0]]]),
            '1â€¿0â€¿0â€¿1â‰¡"acef"âˆŠ"adf"'                                                             :(1, [[0,5,0,1,0,4,17,0,0,0,2,0,3,0,3,0,2,11,4,17,7],[runtime[18],runtime[40],1,0,bqnstr("acef"),bqnstr("adf")],[[0,1,0]],[[0,0]]]),
            '(âˆŠâŸœ(â†•2)â‰¡<âŸœ2)3â‹†âŒœâ—‹â†•5'                                                               :(1, [[0,10,0,3,0,6,0,5,0,0,26,27,0,9,17,0,8,0,7,0,1,27,0,2,0,8,0,3,16,0,7,0,4,27,21,16,7],[runtime[4],runtime[12],runtime[18],runtime[28],runtime[40],runtime[48],runtime[54],runtime[56],2,3,5],[[0,1,0]],[[0,0]]]),
            '(<1)â‰¡3â€¿4â€¿5âˆŠ4+âŒœâ—‹â†•3'                                                                :(1, [[0,8,0,3,0,6,0,5,0,0,26,27,0,9,17,0,4,0,8,0,9,0,10,11,3,17,0,2,0,7,0,1,16,17,7],[runtime[0],runtime[12],runtime[18],runtime[28],runtime[40],runtime[48],runtime[54],1,3,4,5],[[0,1,0]],[[0,0]]]),
            'âˆŠ<4'                                                                              :(BQNError, [[0,2,0,0,16,0,1,16,7],[runtime[12],runtime[40],4],[[0,1,0]],[[0,0]]]),
            '(\'0\'â‰ "11010001")â‰¡âˆŠ"abacbacd"'                                                   :(1, [[0,5,0,2,16,0,1,0,4,0,0,0,3,17,17,7],[runtime[14],runtime[18],runtime[40],'0',bqnstr("11010001"),bqnstr("abacbacd")],[[0,1,0]],[[0,0]]]),
            '(â†‘âŸœ1â‰¡âŸœâˆŠâ¥ŠâŸœâˆ)9'                                                                     :(1, [[0,7,0,6,0,4,0,1,27,0,3,0,4,0,0,27,0,5,0,4,0,2,27,21,16,7],[runtime[18],runtime[22],runtime[26],runtime[40],runtime[56],1,math.inf,9],[[0,1,0]],[[0,0]]]),
            '(â¥ŠâŸœ1â‰¡âˆŠâˆ˜â†•)6'                                                                       :(1, [[0,7,0,2,0,4,0,3,27,0,0,0,6,0,5,0,1,27,21,16,7],[runtime[18],runtime[22],runtime[28],runtime[40],runtime[53],runtime[56],1,6],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœâˆŠâŸ¨âŸ©'                                                                            :(1, [[11,0,0,1,0,2,0,0,27,16,7],[runtime[18],runtime[40],runtime[56]],[[0,1,0]],[[0,0]]]),
            'â‰¡â—‹âˆŠâŸœ(â‰ËœË˜)"abcadbba"'                                                              :(1, [[0,7,0,4,0,3,0,1,26,26,0,6,0,2,0,5,0,0,27,27,16,7],[runtime[18],runtime[24],runtime[40],runtime[45],runtime[46],runtime[54],runtime[56],bqnstr("abcadbba")],[[0,1,0]],[[0,0]]]),
            "â·'a'"                                                                             :(BQNError, [[0,1,0,0,16,7],[runtime[41],'a'],[[0,1,0]],[[0,0]]]),
            'â‰¡âŸœâ·âŸ¨âŸ©'                                                                            :(1, [[11,0,0,1,0,2,0,0,27,16,7],[runtime[18],runtime[41],runtime[56]],[[0,1,0]],[[0,0]]]),
            '"ba"â‰¡â·"baa"'                                                                      :(1, [[0,3,0,1,16,0,0,0,2,17,7],[runtime[18],runtime[41],bqnstr("ba"),bqnstr("baa")],[[0,1,0]],[[0,0]]]),
            'â‰âŠ¸â·"abc"'                                                                         :(BQNError, [[0,3,0,1,0,2,0,0,27,16,7],[runtime[24],runtime[41],runtime[55],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '0â€¿1â€¿0â€¿0â‰¡"abc"â·"aabcba"'                                                           :(1, [[0,5,0,1,0,4,17,0,0,0,2,0,3,0,2,0,2,11,4,17,7],[runtime[18],runtime[41],0,1,bqnstr("abc"),bqnstr("aabcba")],[[0,1,0]],[[0,0]]]),
            '(0â€¿1â‰0â€¿0)â‰¡(1â€¿2â‰4â€¿5)â·3â€¿3â¥Šâ†•9'                                                       :(1, [[0,11,0,3,16,0,1,0,10,0,10,11,2,17,0,4,0,8,0,9,11,2,0,2,0,6,0,7,11,2,17,17,0,0,0,5,0,5,11,2,0,2,0,5,0,6,11,2,17,17,7],[runtime[18],runtime[22],runtime[24],runtime[28],runtime[41],0,1,2,4,5,3,9],[[0,1,0]],[[0,0]]]),
            '(â†•3â€¿0)â‰¡â·âŸœ(â‰Ë˜)"abc"'                                                               :(1, [[0,8,0,4,0,1,26,0,5,0,3,27,16,0,0,0,6,0,7,11,2,0,2,16,17,7],[runtime[18],runtime[24],runtime[28],runtime[41],runtime[46],runtime[56],3,0,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '\'a\'(=â‰¡â·)"abc"'                                                                  :(1, [[0,4,0,2,0,1,0,0,21,0,3,17,7],[runtime[15],runtime[18],runtime[41],'a',bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(âŒ½Â¨â‰¡â‰)â†•2â¥Š3'                                                                       :(1, [[0,7,0,1,0,6,17,0,2,16,0,4,0,0,0,5,0,3,26,21,16,7],[runtime[18],runtime[22],runtime[28],runtime[31],runtime[32],runtime[47],2,3],[[0,1,0]],[[0,0]]]),
            "(â‰â‰¡<)'a'"                                                                         :(1, [[0,3,0,0,0,1,0,2,21,16,7],[runtime[12],runtime[18],runtime[32],'a'],[[0,1,0]],[[0,0]]]),
            'âˆ§Â´â‰âŠ¸â‰¡Â¨âŸ¨<\'a\',"a","abc",""âŸ©'                                                      :(1, [[0,7,0,1,16,0,8,0,9,0,10,11,4,0,4,0,2,0,6,0,3,27,26,16,0,5,0,0,26,16,7],[runtime[10],runtime[12],runtime[18],runtime[32],runtime[47],runtime[50],runtime[55],'a',bqnstr("a"),bqnstr("abc"),bqnstr("")],[[0,1,0]],[[0,0]]]),
            '(â†•4)(-ËœâŒœËœâ‰¡Â·â‰-âŒœ)â†•3â€¿2'                                                              :(1, [[0,7,0,8,11,2,0,2,16,0,5,0,0,26,0,3,20,0,1,0,4,0,5,0,4,0,0,26,26,26,21,0,6,0,2,16,17,7],[runtime[1],runtime[18],runtime[28],runtime[32],runtime[45],runtime[48],4,3,2],[[0,1,0]],[[0,0]]]),
            '0â€¿Â¯1â€¿1â‰(3â¥Š1)â¥Š1'                                                                   :(BQNError, [[0,4,0,0,0,4,0,0,0,5,17,17,0,1,0,2,0,3,0,4,11,3,17,7],[runtime[22],runtime[32],0,-1,1,3],[[0,1,0]],[[0,0]]]),
            '1â€¿0â‰Ë˜âŠ¸â‰"ab"â‰"cd"'                                                                 :(BQNError, [[0,7,0,0,0,6,17,0,1,0,3,0,2,0,0,26,27,0,4,0,5,11,2,17,7],[runtime[24],runtime[32],runtime[46],runtime[55],1,0,bqnstr("ab"),bqnstr("cd")],[[0,1,0]],[[0,0]]]),
            '0â€¿2â‰+âŒœËœâ†•3'                                                                        :(BQNError, [[0,7,0,1,16,0,3,0,4,0,0,26,26,16,0,2,0,5,0,6,11,2,17,7],[runtime[0],runtime[28],runtime[32],runtime[45],runtime[48],0,2,3],[[0,1,0]],[[0,0]]]),
            '2â€¿0â€¿0â‰â†•â†•3'                                                                        :(BQNError, [[0,4,0,0,16,0,0,16,0,1,0,2,0,3,0,3,11,3,17,7],[runtime[28],runtime[32],2,0,3],[[0,1,0]],[[0,0]]]),
            '3â‰â†•â†•3'                                                                            :(BQNError, [[0,2,0,0,16,0,0,16,0,1,0,2,17,7],[runtime[28],runtime[32],3],[[0,1,0]],[[0,0]]]),
            '(2Ã—â†•3)â‰¡0â€¿0â‰6+âŒœâ—‹â†•3'                                                                :(1, [[0,8,0,3,0,6,0,5,0,0,26,27,0,10,17,0,4,0,9,0,9,11,2,17,0,2,0,8,0,3,16,0,1,0,7,17,17,7],[runtime[0],runtime[2],runtime[18],runtime[28],runtime[32],runtime[48],runtime[54],2,3,0,6],[[0,1,0]],[[0,0]]]),
            '(âŸ¨âŸ©âŠ¸â‰â‰¡<)4'                                                                        :(1, [[0,4,0,0,0,1,0,2,0,3,11,0,27,21,16,7],[runtime[12],runtime[18],runtime[32],runtime[55],4],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©(â‰â‰¡âŠ¢)<4'                                                                        :(1, [[0,4,0,0,16,0,2,0,1,0,3,21,11,0,17,7],[runtime[12],runtime[18],runtime[21],runtime[32],4],[[0,1,0]],[[0,0]]]),
            '(2â€¿0â€¿1â¥ŠâŸ¨âŸ©)â‰¡1â€¿2â€¿0â€¿1â‰â†•â†•4'                                                           :(1, [[0,7,0,2,16,0,2,16,0,3,0,6,0,4,0,5,0,6,11,4,17,0,0,11,0,0,1,0,4,0,5,0,6,11,3,17,17,7],[runtime[18],runtime[22],runtime[28],runtime[32],2,0,1,4],[[0,1,0]],[[0,0]]]),
            '(â†•1â€¿2â€¿0â€¿3)â‰¡2<âŠ¸â‰â†•â†•4'                                                               :(1, [[0,9,0,2,16,0,2,16,0,3,0,4,0,0,27,0,6,17,0,1,0,5,0,6,0,7,0,8,11,4,0,2,16,17,7],[runtime[12],runtime[18],runtime[28],runtime[32],runtime[55],1,2,0,3,4],[[0,1,0]],[[0,0]]]),
            '0âŠ¸â‰âŠ¸â‰¡2â€¿3â¥Šâ†•6'                                                                      :(1, [[0,8,0,2,16,0,1,0,6,0,7,11,2,17,0,0,0,4,0,3,0,4,0,5,27,27,16,7],[runtime[18],runtime[22],runtime[28],runtime[32],runtime[55],0,2,3,6],[[0,1,0]],[[0,0]]]),
            "â‹'a'"                                                                             :(BQNError, [[0,1,0,0,16,7],[runtime[34],'a'],[[0,1,0]],[[0,0]]]),
            "â‹'a'â€¿âˆ˜"                                                                           :(BQNError, [[0,2,0,1,11,2,0,0,16,7],[runtime[34],runtime[53],'a'],[[0,1,0]],[[0,0]]]),
            'â’2'                                                                               :(BQNError, [[0,1,0,0,16,7],[runtime[35],2],[[0,1,0]],[[0,0]]]),
            '2â€¿0â€¿3â€¿1â€¿4â‰¡â‹"bdace"'                                                               :(1, [[0,7,0,1,16,0,0,0,2,0,3,0,4,0,5,0,6,11,5,17,7],[runtime[18],runtime[34],2,0,3,1,4,bqnstr("bdace")],[[0,1,0]],[[0,0]]]),
            '5â€¿2â€¿4â€¿3â€¿0â€¿1â‰¡â‹â†“"deabb"'                                                            :(1, [[0,9,0,1,16,0,2,16,0,0,0,3,0,4,0,5,0,6,0,7,0,8,11,6,17,7],[runtime[18],runtime[27],runtime[34],5,2,4,3,0,1,bqnstr("deabb")],[[0,1,0]],[[0,0]]]),
            '(â‹â‰¡â’)âŸ¨"",â†•0,0â†‘<"abc"âŸ©'                                                            :(1, [[0,7,0,6,0,3,16,0,8,0,0,16,0,2,0,6,17,11,3,0,5,0,1,0,4,21,16,7],[runtime[12],runtime[18],runtime[26],runtime[28],runtime[34],runtime[35],0,bqnstr(""),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(â‹â‰¡â†•âˆ˜â‰ )4â€¿0â¥Š@'                                                                     :(1, [[0,8,0,2,0,6,0,7,11,2,17,0,0,0,5,0,3,27,0,1,0,4,21,16,7],[runtime[14],runtime[18],runtime[22],runtime[28],runtime[34],runtime[53],4,0,'\0'],[[0,1,0]],[[0,0]]]),
            "(â’â‰¡âŒ½âˆ˜â†•âˆ˜â‰ )âŸ¨Â¯âˆ,Â¯1.5,Ï€,âˆ,'A','a','b'âŸ©"                                               :(1, [[0,6,0,7,0,8,0,9,0,10,0,11,0,12,11,7,0,0,0,5,0,2,0,5,0,3,27,27,0,1,0,4,21,16,7],[runtime[14],runtime[18],runtime[28],runtime[31],runtime[35],runtime[53],-math.inf,-1.5,3.141592653589793,math.inf,'A','a','b'],[[0,1,0]],[[0,0]]]),
            '(â’â‰¡âŒ½âˆ˜â†•âˆ˜â‰ )âŸ¨â†•0,Â¯1.1,Â¯1,Â¯1â€¿Â¯âˆ,Â¯1â€¿0,Â¯1â€¿0â€¿0,Â¯1â€¿âˆ,0,6â¥Š0,1eÂ¯20,1,1+1eÂ¯15âŸ©'               :(1, [[0,8,0,4,16,0,9,0,10,0,10,0,11,11,2,0,10,0,8,11,2,0,10,0,8,0,8,11,3,0,10,0,12,11,2,0,8,0,8,0,3,0,13,17,0,14,0,15,0,16,0,0,0,15,17,11,12,0,1,0,7,0,4,0,7,0,5,27,27,0,2,0,6,21,16,7],[runtime[0],runtime[14],runtime[18],runtime[22],runtime[28],runtime[31],runtime[35],runtime[53],0,-1.1,-1,-math.inf,math.inf,6,1e-20,1,1e-15],[[0,1,0]],[[0,0]]]),
            "(â’â‰¡âŒ½âˆ˜â†•âˆ˜â‰ )(<âˆ¾âŸ¨â†•0,1,1â€¿1,2â€¿1â€¿1,2â€¿1,2,1â€¿2,2â€¿2,3âŸ©â¥ŠÂ¨<)'a'"                              :(1, [[0,14,0,0,0,8,0,3,26,0,10,0,5,16,0,11,0,11,0,11,11,2,0,12,0,11,0,11,11,3,0,12,0,11,11,2,0,12,0,11,0,12,11,2,0,12,0,12,11,2,0,13,11,9,21,0,4,0,0,21,16,0,1,0,9,0,5,0,9,0,6,27,27,0,2,0,7,21,16,7],[runtime[12],runtime[14],runtime[18],runtime[22],runtime[23],runtime[28],runtime[31],runtime[35],runtime[47],runtime[53],0,1,2,3,'a'],[[0,1,0]],[[0,0]]]),
            "(â‹â‰¡â†•âˆ˜â‰ )â¥Šâ‰(â†•5)â¥ŠâŸœ1âŠ¸â¥ŠâŒœ1â€¿'b'"                                                         :(1, [[0,11,0,12,11,2,0,6,0,2,0,8,0,11,0,9,0,2,27,27,26,0,10,0,3,16,17,0,4,16,0,2,16,0,0,0,7,0,3,27,0,1,0,5,21,16,7],[runtime[14],runtime[18],runtime[22],runtime[28],runtime[32],runtime[34],runtime[48],runtime[53],runtime[55],runtime[56],5,1,'b'],[[0,1,0]],[[0,0]]]),
            "(âŠ¢â‰¡â—‹â‹(0â€¿1+â‰ )â¥ŠâŠ¢)âŸ¨Â¯2,'a',1,'f'âŸ©"                                                    :(1, [[0,9,0,10,0,8,0,11,11,4,0,3,0,4,0,1,0,0,0,7,0,8,11,2,21,21,0,5,0,6,0,2,27,0,3,21,16,7],[runtime[0],runtime[14],runtime[18],runtime[21],runtime[22],runtime[34],runtime[54],0,1,-2,'a','f'],[[0,1,0]],[[0,0]]]),
            'âŸ¨1,2,3,1â€¿2,2â€¿1,1â€¿3,2â€¿2,3â€¿1âŸ©(â¥ŠâŠ¸(â‰ âˆ˜âŠ£âˆ¾ËœÂ¯1âŠ¸âŠ‘âŠ¸(âŒŠâˆ¾âŠ£)âˆ¾Ã—Â´âŠ¸âŒŠ)âŒœâ‰¡â—‹(â‹â¥Š)â¥ŠâŒœâŸœ(+`âˆ˜â‰ âŸœ(â†•6)Â¨))â†•4'    :(1, [[0,25,0,8,16,0,12,0,24,0,8,16,0,19,0,3,0,16,0,15,0,0,26,27,27,26,0,19,0,13,0,6,26,27,0,6,0,9,20,0,17,0,4,27,0,13,0,2,0,18,0,14,0,1,26,27,0,7,0,5,0,7,0,2,21,0,18,0,10,0,18,0,23,27,27,21,0,11,0,7,26,0,5,0,16,0,3,27,21,0,18,0,6,27,26,21,0,20,0,21,0,22,0,20,0,21,11,2,0,21,0,20,11,2,0,20,0,22,11,2,0,21,0,21,11,2,0,22,0,20,11,2,11,8,17,7],[runtime[0],runtime[2],runtime[6],runtime[14],runtime[18],runtime[20],runtime[22],runtime[23],runtime[28],runtime[34],runtime[37],runtime[45],runtime[47],runtime[48],runtime[50],runtime[52],runtime[53],runtime[54],runtime[55],runtime[56],1,2,3,-1,6,4],[[0,1,0]],[[0,0]]]),
            '((â¥ŠËœ-â¥ŠâŸœ2â€¿0)âˆ˜â‰ â‰¡â‹+â’)2/â†•5'                                                           :(1, [[0,14,0,5,16,0,6,0,12,17,0,8,0,0,0,7,21,0,3,0,2,0,10,0,12,0,13,11,2,0,11,0,4,27,0,1,0,9,0,4,26,21,27,21,16,7],[runtime[0],runtime[1],runtime[14],runtime[18],runtime[22],runtime[28],runtime[33],runtime[34],runtime[35],runtime[45],runtime[53],runtime[56],2,0,5],[[0,1,0]],[[0,0]]]),
            'âˆ§âŠâŸ¨+âŸ©'                                                                            :(BQNError, [[0,0,11,1,0,2,16,0,1,16,7],[runtime[0],runtime[10],runtime[36]],[[0,1,0]],[[0,0]]]),
            'âˆ§+â€¿-'                                                                             :(BQNError, [[0,0,0,1,11,2,0,2,16,7],[runtime[0],runtime[1],runtime[10]],[[0,1,0]],[[0,0]]]),
            "âˆ¨'c'"                                                                             :(BQNError, [[0,1,0,0,16,7],[runtime[11],'c'],[[0,1,0]],[[0,0]]]),
            '"edcba"â‰¡âˆ¨"bdace"'                                                                 :(1, [[0,3,0,0,16,0,1,0,2,17,7],[runtime[11],runtime[18],bqnstr("edcba"),bqnstr("bdace")],[[0,1,0]],[[0,0]]]),
            '(â†•7)â‰¡âˆ§â‹|âŸœâŒ½1+â†•7'                                                                   :(1, [[0,8,0,4,16,0,0,0,9,17,0,5,0,7,0,1,27,16,0,6,16,0,2,16,0,3,0,8,0,4,16,17,7],[runtime[0],runtime[8],runtime[10],runtime[18],runtime[28],runtime[31],runtime[34],runtime[56],7,1],[[0,1,0]],[[0,0]]]),
            '(âˆ§â‰¡âŒ½)âŸ¨â†•0â€¿3â€¿1,â†•0â€¿1â€¿1âŸ©'                                                             :(1, [[0,4,0,5,0,6,11,3,0,2,16,0,4,0,6,0,6,11,3,0,2,16,11,2,0,3,0,1,0,0,21,16,7],[runtime[10],runtime[18],runtime[28],runtime[31],0,3,1],[[0,1,0]],[[0,0]]]),
            'â‹Ëœ6'                                                                              :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[34],runtime[45],6],[[0,1,0]],[[0,0]]]),
            'â’âŸœâ†•4'                                                                             :(BQNError, [[0,3,0,0,0,2,0,1,27,16,7],[runtime[28],runtime[35],runtime[56],4],[[0,1,0]],[[0,0]]]),
            '(3â€¿2â€¿4â¥Š0)â‹4â¥Š1'                                                                    :(BQNError, [[0,6,0,0,0,4,17,0,1,0,5,0,0,0,2,0,3,0,4,11,3,17,17,7],[runtime[22],runtime[34],3,2,4,0,1],[[0,1,0]],[[0,0]]]),
            '(3â€¿2â€¿4â¥Š0)â’1'                                                                      :(BQNError, [[0,6,0,1,0,5,0,0,0,2,0,3,0,4,11,3,17,17,7],[runtime[22],runtime[35],3,2,4,0,1],[[0,1,0]],[[0,0]]]),
            'âŸ¨+âŸ©â‹â†•6'                                                                           :(BQNError, [[0,3,0,1,16,0,2,0,0,11,1,17,7],[runtime[0],runtime[28],runtime[34],6],[[0,1,0]],[[0,0]]]),
            'âŸ¨1â€¿3â€¿1,1â€¿3â€¿2âŸ©â’âŸ¨1â€¿3â€¿{ğ•©}âŸ©'                                                          :(BQNError, [[0,1,0,2,1,1,11,3,11,1,0,0,0,1,0,2,0,1,11,3,0,1,0,2,0,3,11,3,11,2,17,7,34,0,1,7],[runtime[35],1,3,2],[[0,1,0],[0,0,1]],[[0,0],[32,3]]]),
            'âŸ¨1,3,âˆ,\'e\',\'i\'âŸ© (â‹â‰¡â‰ âˆ˜âŠ£(âŠ£â†“âŠ¢â‹âŠ¸âŠ+`âˆ˜>)â‹âˆ˜âˆ¾) (2Ã·Ëœâ†•8)âˆ¾"aegz"'                        :(1, [[0,23,0,7,0,20,0,9,16,0,12,0,1,26,0,19,17,17,0,7,0,14,0,10,27,0,2,0,14,0,13,0,0,26,27,0,11,0,15,0,10,27,0,6,21,0,8,0,5,21,0,5,0,14,0,3,27,21,0,4,0,10,21,0,16,0,17,0,18,0,21,0,22,11,5,17,7],[runtime[0],runtime[3],runtime[13],runtime[14],runtime[18],runtime[20],runtime[21],runtime[23],runtime[27],runtime[28],runtime[34],runtime[36],runtime[45],runtime[52],runtime[53],runtime[55],1,3,math.inf,2,8,'e','i',bqnstr("aegz")],[[0,1,0]],[[0,0]]]),
            'âŸ¨\'z\',\'d\',1â€¿0,0âŸ© (â’â‰¡â‰ âˆ˜âŠ£(âŠ£â†“âŠ¢â‹âŠ¸âŠ+`âˆ˜>)â’âˆ˜âˆ¾) (2Ã·Ëœâ†•8)âˆ¾"aegz"'                        :(1, [[0,23,0,7,0,20,0,9,16,0,13,0,1,26,0,19,17,17,0,7,0,15,0,11,27,0,2,0,15,0,14,0,0,26,27,0,12,0,16,0,10,27,0,6,21,0,8,0,5,21,0,5,0,15,0,3,27,21,0,4,0,11,21,0,21,0,22,0,17,0,18,11,2,0,18,11,4,17,7],[runtime[0],runtime[3],runtime[13],runtime[14],runtime[18],runtime[20],runtime[21],runtime[23],runtime[27],runtime[28],runtime[34],runtime[35],runtime[36],runtime[45],runtime[52],runtime[53],runtime[55],1,0,2,8,'z','d',bqnstr("aegz")],[[0,1,0]],[[0,0]]]),
            '(<âˆ˜âŒˆâ‰¡(â†•6)âŠ¸â‹)2.5'                                                                  :(1, [[0,8,0,4,0,6,0,7,0,3,16,27,0,2,0,0,0,5,0,1,27,21,16,7],[runtime[7],runtime[12],runtime[18],runtime[28],runtime[34],runtime[53],runtime[55],6,2.5],[[0,1,0]],[[0,0]]]),
            '(<1)â‰¡(â†•2â€¿3)â‹1+â†•3'                                                                 :(1, [[0,7,0,3,16,0,0,0,5,17,0,4,0,6,0,7,11,2,0,3,16,17,0,2,0,5,0,1,16,17,7],[runtime[0],runtime[12],runtime[18],runtime[28],runtime[34],1,2,3],[[0,1,0]],[[0,0]]]),
            '(<0)â‰¡"abc"â¥ŠâŠ¸â’â—‹<â‰"acc"'                                                            :(1, [[0,9,0,3,16,0,0,0,5,0,4,0,6,0,2,27,27,0,8,17,0,1,0,7,0,0,16,17,7],[runtime[12],runtime[18],runtime[22],runtime[24],runtime[35],runtime[54],runtime[55],0,bqnstr("abc"),bqnstr("acc")],[[0,1,0]],[[0,0]]]),
            'âŠ’âˆ'                                                                               :(BQNError, [[0,1,0,0,16,7],[runtime[39],math.inf],[[0,1,0]],[[0,0]]]),
            'âŠ’âŠ"y"'                                                                            :(BQNError, [[0,2,0,0,16,0,1,16,7],[runtime[36],runtime[39],bqnstr("y")],[[0,1,0]],[[0,0]]]),
            'âŠ’âŠ¸â‰¡""'                                                                            :(1, [[0,3,0,0,0,2,0,1,27,16,7],[runtime[18],runtime[39],runtime[55],bqnstr("")],[[0,1,0]],[[0,0]]]),
            '("001001231"-\'0\')â‰¡âŠ’"eccdaeccd"'                                                 :(1, [[0,5,0,2,16,0,1,0,3,0,0,0,4,17,17,7],[runtime[1],runtime[18],runtime[39],'0',bqnstr("001001231"),bqnstr("eccdaeccd")],[[0,1,0]],[[0,0]]]),
            '(â†•âˆ˜â‰ â‰¡âŠ’Ëœ)"abbc"+âŒœâ†•6'                                                               :(1, [[0,8,0,3,16,0,6,0,0,26,0,9,17,0,5,0,4,26,0,2,0,1,0,7,0,3,27,21,16,7],[runtime[0],runtime[14],runtime[18],runtime[28],runtime[39],runtime[45],runtime[48],runtime[53],6,bqnstr("abbc")],[[0,1,0]],[[0,0]]]),
            '(3âŒŠâˆ˜Ã·Ëœâ†•8)â‰¡âŠ’8â€¿2â¥Š4Ã·Ëœâ†•3'                                                             :(1, [[0,8,0,4,16,0,6,0,0,26,0,11,17,0,3,0,9,0,10,11,2,17,0,5,16,0,2,0,9,0,4,16,0,6,0,0,0,7,0,1,27,26,0,8,17,17,7],[runtime[3],runtime[6],runtime[18],runtime[22],runtime[28],runtime[39],runtime[45],runtime[53],3,8,2,4],[[0,1,0]],[[0,0]]]),
            '\'c\'âŠ’"cde"'                                                                      :(BQNError, [[0,2,0,0,0,1,17,7],[runtime[39],'c',bqnstr("cde")],[[0,1,0]],[[0,0]]]),
            '(0â€¿4â€¿1â€¿1â¥Š0)âŠ’4â€¿1â¥Šâ†•4'                                                               :(BQNError, [[0,4,0,1,16,0,0,0,4,0,5,11,2,17,0,2,0,3,0,0,0,3,0,4,0,5,0,5,11,4,17,17,7],[runtime[22],runtime[28],runtime[39],0,4,1],[[0,1,0]],[[0,0]]]),
            '("244031444"-\'0\')â‰¡"bbac"âŠ’"aaabcbcbc"'                                           :(1, [[0,6,0,2,0,5,17,0,1,0,3,0,0,0,4,17,17,7],[runtime[1],runtime[18],runtime[39],'0',bqnstr("244031444"),bqnstr("bbac"),bqnstr("aaabcbcbc")],[[0,1,0]],[[0,0]]]),
            '(<3)â‰¡1â€¿1â€¿1âŠ’0'                                                                     :(1, [[0,5,0,2,0,4,0,4,0,4,11,3,17,0,1,0,3,0,0,16,17,7],[runtime[12],runtime[18],runtime[39],3,1,0],[[0,1,0]],[[0,0]]]),
            '(<0)â‰¡(0â€¿4â€¿1â¥Š0)âŠ’4â€¿1â¥Šâ†•4'                                                            :(1, [[0,6,0,3,16,0,2,0,6,0,7,11,2,17,0,4,0,5,0,2,0,5,0,6,0,7,11,3,17,17,0,1,0,5,0,0,16,17,7],[runtime[12],runtime[18],runtime[22],runtime[28],runtime[39],0,4,1],[[0,1,0]],[[0,0]]]),
            '4(âŒŠâŸœ(â†•â‰ )â‰¡â†‘âŠ’âŠ¢)7â€¿3â¥Š1â€¿1â€¿3â€¿1â€¿1'                                                       :(1, [[0,12,0,12,0,11,0,12,0,12,11,5,0,4,0,10,0,11,11,2,17,0,3,0,7,0,5,21,0,2,0,1,0,6,20,0,8,0,0,27,21,0,9,17,7],[runtime[6],runtime[14],runtime[18],runtime[21],runtime[22],runtime[26],runtime[28],runtime[39],runtime[56],4,7,3,1],[[0,1,0]],[[0,0]]]),
            '(2â€¿3â€¿0â‰3â€¿1â€¿3)â‰¡"cca"âŠ’â—‹(â‰Ëœâ‰0)3â†•"abcd"'                                              :(1, [[0,12,0,2,0,8,17,0,9,0,6,0,4,0,1,26,27,0,5,0,3,27,0,11,17,0,0,0,8,0,10,0,8,11,3,0,1,0,7,0,8,0,9,11,3,17,17,7],[runtime[18],runtime[24],runtime[28],runtime[39],runtime[45],runtime[54],runtime[60],2,3,0,1,bqnstr("cca"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on


class InfefredTests(RuntimeBasedTestCase):
    def test_identity(self):
        """https://github.com/mlochbaum/BQN/blob/ea6597c92f75320319cd7366423c2c97b7e2d3e4/test/cases/identity.bqn"""
        runtime = self.runtime
        # fmt: off
        self.runcases({
            # Fold
            'âˆ§Â´ {ğ•©â‰¡ğ•Â´âŸ¨âŸ©}Â´Â¨ âŸ¨+â€¿0,-â€¿0,Ã—â€¿1,Ã·â€¿1,âˆ¨â€¿0,âˆ§â€¿1âŸ©'    :(1, [[0,0,0,9,11,2,0,1,0,9,11,2,0,2,0,10,11,2,0,3,0,10,11,2,0,5,0,9,11,2,0,4,0,10,11,2,11,6,0,7,0,8,1,1,26,26,16,0,8,0,4,26,16,7,11,0,0,8,34,0,2,26,16,0,6,34,0,1,17,7],[runtime[0],runtime[1],runtime[2],runtime[3],runtime[10],runtime[11],runtime[18],runtime[47],runtime[50],0,1],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[54,3]]]),
            'âˆ§Â´ {ğ•©â‰¡ğ•Â´âŸ¨âŸ©}Â´Â¨ âŸ¨â‹†â€¿1,Â¬â€¿1,âŒŠâ€¿âˆ,âŒˆâ€¿Â¯âˆâŸ©'           :(1, [[0,0,0,8,11,2,0,3,0,8,11,2,0,1,0,9,11,2,0,2,0,10,11,2,11,4,0,6,0,7,1,1,26,26,16,0,7,0,4,26,16,7,11,0,0,7,34,0,2,26,16,0,5,34,0,1,17,7],[runtime[4],runtime[6],runtime[7],runtime[9],runtime[10],runtime[18],runtime[47],runtime[50],1,math.inf,-math.inf],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[42,3]]]),
            'âˆ§Â´ {ğ•©â‰¡ğ•Â´âŸ¨âŸ©}Â´Â¨ âŸ¨â‰ â€¿0,=â€¿1,>â€¿0,â‰¥â€¿1âŸ©'            :(1, [[0,2,0,8,11,2,0,3,0,9,11,2,0,1,0,8,11,2,0,4,0,9,11,2,11,4,0,6,0,7,1,1,26,26,16,0,7,0,0,26,16,7,11,0,0,7,34,0,2,26,16,0,5,34,0,1,17,7],[runtime[10],runtime[13],runtime[14],runtime[15],runtime[17],runtime[18],runtime[47],runtime[50],0,1],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[42,3]]]),
            'âˆšÂ´â†•0'                                       :(BQNError, [[0,3,0,1,16,0,2,0,0,26,16,7],[runtime[5],runtime[28],runtime[50],0],[[0,1,0]],[[0,0]]]),
            '|Â´â†•0'                                       :(BQNError, [[0,3,0,1,16,0,2,0,0,26,16,7],[runtime[8],runtime[28],runtime[50],0],[[0,1,0]],[[0,0]]]),
            'âŠ¢Â´""'                                       :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[21],runtime[50],bqnstr("")],[[0,1,0]],[[0,0]]]),
            'âŠ£Â´""'                                       :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[20],runtime[50],bqnstr("")],[[0,1,0]],[[0,0]]]),
            'âˆ¾Â´âŸ¨âŸ©'                                       :(BQNError, [[11,0,0,1,0,0,26,16,7],[runtime[23],runtime[50]],[[0,1,0]],[[0,0]]]),
            'â‰Â´âŸ¨âŸ©'                                       :(BQNError, [[11,0,0,1,0,0,26,16,7],[runtime[24],runtime[50]],[[0,1,0]],[[0,0]]]),

            # Insert
            'âˆ§Â´ {(3â€¿1â¥Šğ•©)â‰¡ğ•Ë0â€¿3â€¿1â¥Š""}Â´Â¨ âŸ¨+â€¿0,-â€¿0,Ã—â€¿1,Ã·â€¿1,âˆ¨â€¿0,âˆ§â€¿1,â‹†â€¿1,Â¬â€¿1,âŒŠâ€¿âˆ,âŒˆâ€¿Â¯âˆ,â‰ â€¿0,=â€¿1,>â€¿0,â‰¥â€¿1âŸ©'    :(1, [[0,0,0,21,11,2,0,1,0,21,11,2,0,2,0,20,11,2,0,3,0,20,11,2,0,9,0,21,11,2,0,8,0,20,11,2,0,4,0,20,11,2,0,7,0,20,11,2,0,5,0,22,11,2,0,6,0,23,11,2,0,11,0,21,11,2,0,12,0,20,11,2,0,10,0,21,11,2,0,13,0,20,11,2,11,14,0,16,0,17,1,1,26,26,16,0,17,0,8,26,16,7,0,24,0,15,0,21,0,19,0,20,11,3,17,0,18,34,0,2,26,16,0,14,34,0,1,0,15,0,19,0,20,11,2,17,17,7],[runtime[0],runtime[1],runtime[2],runtime[3],runtime[4],runtime[6],runtime[7],runtime[9],runtime[10],runtime[11],runtime[13],runtime[14],runtime[15],runtime[17],runtime[18],runtime[22],runtime[47],runtime[50],runtime[51],3,1,0,math.inf,-math.inf,bqnstr("")],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[102,3]]]),
            'âˆ¾Ë""'                                                                                    :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[23],runtime[51],bqnstr("")],[[0,1,0]],[[0,0]]]),
            '(âˆ¾Ë(â†•5)â¥Š"") â‰¡ (â‰ âŸœ1âŠ¸/â†•5)â¥Š""'                                                              :(1, [[0,11,0,2,0,9,0,4,16,0,5,0,7,0,10,0,8,0,0,27,27,16,17,0,1,0,11,0,2,0,9,0,4,16,17,0,6,0,3,26,16,17,7],[runtime[14],runtime[18],runtime[22],runtime[23],runtime[28],runtime[33],runtime[51],runtime[55],runtime[56],5,1,bqnstr("")],[[0,1,0]],[[0,0]]]),
            '(âˆ¾ËÂ¨â‰¡â¥ŠÂ¨) (â‰â¥Š0Ë™)âŒœËœ0â€¿2â€¿5'                                                                  :(1, [[0,9,0,10,0,11,11,3,0,5,0,7,0,4,0,9,26,0,1,0,3,21,26,26,16,0,6,0,1,26,0,0,0,6,0,8,0,2,26,26,21,16,7],[runtime[18],runtime[22],runtime[23],runtime[24],runtime[44],runtime[45],runtime[47],runtime[48],runtime[51],0,2,5],[[0,1,0]],[[0,0]]]),
            'âŒ½Ë0â€¿3â¥ŠâŸ¨âŸ©'                                                                                :(BQNError, [[11,0,0,0,0,3,0,4,11,2,17,0,2,0,1,26,16,7],[runtime[22],runtime[31],runtime[51],0,3],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_under(self):
        """https://github.com/mlochbaum/BQN/blob/ea6597c92f75320319cd7366423c2c97b7e2d3e4/test/cases/under.bqn"""
        runtime = self.runtime
        # fmt: off
        self.runcases({
            # Invertible
            '(âŠ‘â‰¡âŠ‘âŒ¾âŠ¢) âŸ¨â†•3,2,<"abc"âŸ©'                                   :(1, [[0,6,0,3,16,0,7,0,8,0,0,16,11,3,0,2,0,5,0,4,27,0,1,0,4,21,16,7],[runtime[12],runtime[18],runtime[21],runtime[28],runtime[37],runtime[57],3,2,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '3 (+â‰¡+âŒ¾âŠ£) 4'                                             :(1, [[0,5,0,2,0,3,0,0,27,0,1,0,0,21,0,4,17,7],[runtime[0],runtime[18],runtime[20],runtime[57],3,4],[[0,1,0]],[[0,0]]]),
            '(Â¯2âŠ¸â†“ â‰¡ 2âŠ¸â†“âŒ¾âŒ½) â†•6'                                       :(1, [[0,8,0,2,16,0,3,0,5,0,1,0,4,0,7,27,27,0,0,0,1,0,4,0,6,27,21,16,7],[runtime[18],runtime[27],runtime[28],runtime[31],runtime[55],runtime[57],-2,2,6],[[0,1,0]],[[0,0]]]),
            '(1âŠ¸â†“âŒ¾â‰ â‰¡ 1âŠ¸â†“Ë˜) â†•3â€¿3'                                     :(1, [[0,8,0,8,11,2,0,2,16,0,4,0,1,0,5,0,7,27,26,0,0,0,3,0,6,0,1,0,5,0,7,27,27,21,16,7],[runtime[18],runtime[27],runtime[28],runtime[32],runtime[46],runtime[55],runtime[57],1,3],[[0,1,0]],[[0,0]]]),
            '7(â¥ŠâŒ¾(<Ë˜)â‰¡Â·<Ë˜â¼â¥ŠâŸœ(<Ë˜))3â€¿3â¥Šâ†•9'                              :(1, [[0,10,0,3,16,0,2,0,9,0,9,11,2,17,0,4,0,0,26,0,6,0,2,27,0,5,0,4,0,0,26,26,20,0,1,0,4,0,0,26,0,7,0,2,27,21,0,8,17,7],[runtime[12],runtime[18],runtime[22],runtime[28],runtime[46],runtime[49],runtime[56],runtime[57],7,3,9],[[0,1,0]],[[0,0]]]),
            '"abcd" (âŠ£â‰¡Â»âŒ¾â‰) â†•4'                                       :(1, [[0,6,0,3,16,0,2,0,5,0,4,27,0,0,0,1,21,0,7,17,7],[runtime[18],runtime[20],runtime[24],runtime[28],runtime[30],runtime[57],4,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            'â‰âŒ¾â‰ "abc"'                                               :(BQNError, [[0,3,0,0,0,2,0,1,27,16,7],[runtime[24],runtime[32],runtime[57],bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(âŒ½âˆ˜|âŠ¸/4â€¿Â¯3) â‰¡ â†•âˆ˜â‰ âŠ¸-âŒ¾(3âŠ¸âŒ½)â†•7'                             :(1, [[0,13,0,4,16,0,5,0,8,0,12,27,0,9,0,0,0,8,0,2,0,7,0,4,27,27,27,16,0,3,0,10,0,11,11,2,0,6,0,8,0,1,0,7,0,5,27,27,16,17,7],[runtime[1],runtime[8],runtime[14],runtime[18],runtime[28],runtime[31],runtime[33],runtime[53],runtime[55],runtime[57],4,-3,3,7],[[0,1,0]],[[0,0]]]),
            # Structural
            # Monad
            '"bbcd" â‰¡ 1âŠ¸+âŒ¾âŠ‘ "abcd"'                                   :(1, [[0,7,0,2,0,4,0,0,0,3,0,5,27,27,16,0,1,0,6,17,7],[runtime[0],runtime[18],runtime[37],runtime[55],runtime[57],1,bqnstr("bbcd"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '(<âˆ˜- â‰¡ -âŒ¾âŠ‘) 4'                                           :(1, [[0,6,0,3,0,5,0,0,27,0,2,0,0,0,4,0,1,27,21,16,7],[runtime[1],runtime[12],runtime[18],runtime[37],runtime[53],runtime[57],4],[[0,1,0]],[[0,0]]]),
            '(âŒ½âŒ¾âŠ â‰¡ âŒ½âŠ¸â‰Ë) "abc"â‰"def"'                                :(1, [[0,8,0,1,0,7,17,0,4,0,1,0,5,0,2,27,26,0,0,0,3,0,6,0,2,27,21,16,7],[runtime[18],runtime[24],runtime[31],runtime[36],runtime[51],runtime[55],runtime[57],bqnstr("abc"),bqnstr("def")],[[0,1,0]],[[0,0]]]),
            '-âŒ¾âŠ 4'                                                   :(BQNError, [[0,3,0,1,0,2,0,0,27,16,7],[runtime[1],runtime[36],runtime[57],4],[[0,1,0]],[[0,0]]]),
            '1 â‰¡ "cd"â€¿"ab"âŠ¸âŠâŒ¾< "ab"'                                  :(1, [[0,7,0,0,0,4,0,2,0,3,0,6,0,7,11,2,27,27,16,0,1,0,5,17,7],[runtime[12],runtime[18],runtime[38],runtime[55],runtime[57],1,bqnstr("cd"),bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '(0â€¿1+âŒœ0â€¿4â€¿2) â‰¡ â‹âˆ˜â‹âŒ¾â¥Š "apl"â‰"bqn"'                        :(1, [[0,13,0,3,0,12,17,0,2,0,7,0,4,0,6,0,4,27,27,16,0,1,0,8,0,10,0,11,11,3,0,5,0,0,26,0,8,0,9,11,2,17,17,7],[runtime[0],runtime[18],runtime[22],runtime[24],runtime[34],runtime[48],runtime[53],runtime[57],0,1,4,2,bqnstr("apl"),bqnstr("bqn")],[[0,1,0]],[[0,0]]]),
            '2 (âŒ½âŒ¾â¥Š â‰¡ 12|+) â¥ŠâŸœ(â†•Ã—Â´)6â€¿2'                               :(1, [[0,12,0,10,11,2,0,7,0,1,26,0,5,20,0,8,0,4,27,16,0,0,0,2,0,11,21,0,3,0,4,0,9,0,6,27,21,0,10,17,7],[runtime[0],runtime[2],runtime[8],runtime[18],runtime[22],runtime[28],runtime[31],runtime[50],runtime[56],runtime[57],2,12,6],[[0,1,0]],[[0,0]]]),
            'â†•âˆ˜â‰ âŠ¸+{ğ”½â‰¡ğ”½Â¨âŒ¾â†‘} "abcde"'                                   :(1, [[0,9,1,1,0,0,0,7,0,1,0,6,0,4,27,27,26,16,7,0,3,0,8,0,5,32,0,1,26,27,0,2,34,0,1,21,7],[runtime[0],runtime[14],runtime[18],runtime[26],runtime[28],runtime[47],runtime[53],runtime[55],runtime[57],bqnstr("abcde")],[[0,1,0],[1,1,1]],[[0,0],[19,2]]]),
            '2âŠ¸+{ğ”½â‰¡ğ”½Â¨âŒ¾â†“} "abcde"'                                     :(1, [[0,7,1,1,0,0,0,4,0,6,27,26,16,7,0,2,0,5,0,3,32,0,1,26,27,0,1,34,0,1,21,7],[runtime[0],runtime[18],runtime[27],runtime[47],runtime[55],runtime[57],2,bqnstr("abcde")],[[0,1,0],[1,1,1]],[[0,0],[14,2]]]),
            # Dyad
            'â†•âˆ˜â‰ âŠ¸+âŒ¾(10âŠ¸â¥Š)â†•6'                                          :(BQNError, [[0,8,0,3,16,0,2,0,5,0,7,27,0,6,0,0,0,5,0,1,0,4,0,3,27,27,27,16,7],[runtime[0],runtime[14],runtime[22],runtime[28],runtime[53],runtime[55],runtime[57],10,6],[[0,1,0]],[[0,0]]]),
            '(âŒ½â’âŒŠ2Ã·Ëœâ†•7) â‰¡ âŒ½Ë˜âŒ¾(âŒŠâ€¿2â¥ŠâŠ¢)â†•7'                               :(1, [[0,12,0,5,16,0,3,0,4,0,1,0,11,11,2,21,0,10,0,9,0,6,26,27,16,0,2,0,12,0,5,16,0,8,0,0,26,0,11,17,0,1,16,0,7,16,0,6,16,17,7],[runtime[3],runtime[6],runtime[18],runtime[21],runtime[22],runtime[28],runtime[31],runtime[35],runtime[45],runtime[46],runtime[57],2,7],[[0,1,0]],[[0,0]]]),
            'Â¯1â€¿0â€¿1â€¿3 â‰¡ -âŸœ(+Â´Ã·â‰ )âŒ¾(3âŠ¸â†‘)â†•4'                             :(1, [[0,15,0,6,16,0,5,0,8,0,14,27,0,10,0,3,0,2,0,7,0,0,26,21,0,9,0,1,27,27,16,0,4,0,11,0,12,0,13,0,14,11,4,17,7],[runtime[0],runtime[1],runtime[3],runtime[14],runtime[18],runtime[26],runtime[28],runtime[50],runtime[55],runtime[56],runtime[57],-1,0,1,3,4],[[0,1,0]],[[0,0]]]),
            '"adcb" â‰¡ âŒ½âŒ¾(1âŠ¸â†“)"abcd"'                                  :(1, [[0,7,0,1,0,3,0,5,27,0,4,0,2,27,16,0,0,0,6,17,7],[runtime[18],runtime[27],runtime[31],runtime[55],runtime[57],1,bqnstr("adcb"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '5â€¿6â€¿3â€¿0 â‰¡ (5â€¿3â€¿1âŒ¾(0â€¿0âŠ¸â‰)4â€¿3â¥Š0) +Â´âˆ˜Ã—â‰1â€¿âˆ 1+â†•3'            :(1, [[0,13,0,4,16,0,0,0,15,17,0,15,0,17,11,2,0,10,0,1,0,7,0,6,0,0,26,27,27,0,14,0,3,0,16,0,13,11,2,17,0,5,0,8,0,14,0,14,11,2,27,0,9,0,11,0,13,0,15,11,3,27,16,17,0,2,0,11,0,12,0,13,0,14,11,4,17,7],[runtime[0],runtime[2],runtime[18],runtime[22],runtime[28],runtime[32],runtime[50],runtime[53],runtime[55],runtime[57],runtime[60],5,6,3,0,1,4,math.inf],[[0,1,0]],[[0,0]]]),
            '"AbcD" â‰¡ (\'A\'-\'a\')âŠ¸+âŒ¾(1â€¿0â€¿0â€¿1âŠ¸/)"abcd"'              :(1, [[0,11,0,3,0,4,0,6,0,7,0,7,0,6,11,4,27,0,5,0,0,0,4,0,9,0,1,0,8,17,27,27,16,0,2,0,10,17,7],[runtime[0],runtime[1],runtime[18],runtime[33],runtime[55],runtime[57],1,0,'A','a',bqnstr("AbcD"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '"AbcD" â‰¡ "ABCD"âŠ£âŒ¾(1â€¿0â€¿0â€¿1âŠ¸/)"abcd"'                      :(1, [[0,9,0,2,0,3,0,5,0,6,0,6,0,5,11,4,27,0,4,0,1,27,0,8,17,0,0,0,7,17,7],[runtime[18],runtime[20],runtime[33],runtime[55],runtime[57],1,0,bqnstr("AbcD"),bqnstr("ABCD"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            'â†•âˆ˜â‰ âŠ¸+âŒ¾(2âŠ¸/)â†•5'                                           :(BQNError, [[0,8,0,2,16,0,3,0,5,0,7,27,0,6,0,0,0,5,0,1,0,4,0,2,27,27,27,16,7],[runtime[0],runtime[14],runtime[28],runtime[33],runtime[53],runtime[55],runtime[57],2,5],[[0,1,0]],[[0,0]]]),
            '(1âŠ¸âŒ½ â‰¡ 2âŠ¸âŒ½âŒ¾(2âŠ¸/)) â†•5'                                    :(1, [[0,8,0,1,16,0,3,0,4,0,7,27,0,5,0,2,0,4,0,7,27,27,0,0,0,2,0,4,0,6,27,21,16,7],[runtime[18],runtime[28],runtime[31],runtime[33],runtime[55],runtime[57],1,2,5],[[0,1,0]],[[0,0]]]),
            '"bdca" â‰¡ 1âŠ¸âŒ½âŒ¾(1â€¿3â€¿0âŠ¸âŠ)"abcd"'                            :(1, [[0,9,0,2,0,3,0,5,0,6,0,7,11,3,27,0,4,0,1,0,3,0,5,27,27,16,0,0,0,8,17,7],[runtime[18],runtime[31],runtime[36],runtime[55],runtime[57],1,3,0,bqnstr("bdca"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '1âŠ¸âŒ½âŒ¾(1â€¿3â€¿3â€¿0âŠ¸âŠ)"abcd"'                                   :(BQNError, [[0,7,0,1,0,2,0,4,0,5,0,5,0,6,11,4,27,0,3,0,0,0,2,0,4,27,27,16,7],[runtime[31],runtime[36],runtime[55],runtime[57],1,3,0,bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '((Â¯1â‹†2âˆ§âŒœâ—‹(âŒ½0=â†•)3)âŠ¸Ã— â‰¡ -âŒ¾(1â€¿2âŠ‘âŠ¢))â†•2â€¿3'                    :(1, [[0,15,0,17,11,2,0,7,16,0,6,0,9,0,18,0,15,11,2,21,0,13,0,0,27,0,5,0,1,0,12,0,17,0,7,0,4,0,16,21,0,8,20,0,11,0,10,0,3,26,27,0,15,17,0,2,0,14,17,27,21,16,7],[runtime[1],runtime[2],runtime[4],runtime[10],runtime[15],runtime[18],runtime[21],runtime[28],runtime[31],runtime[37],runtime[48],runtime[54],runtime[55],runtime[57],-1,2,0,3,1],[[0,1,0]],[[0,0]]]),
            '((0â€¿3â‰1â€¿2)âŠ¸+ â‰¡ âŸ¨1,2â€¿3âŸ©âŠ¸+âŒ¾(âŸ¨1â€¿0,âŸ¨1â€¿1,0â€¿1âŸ©âŸ©âŠ¸âŠ‘))â†•2â€¿2'       :(1, [[0,10,0,10,11,2,0,3,16,0,4,0,5,0,9,0,7,11,2,0,9,0,9,11,2,0,7,0,9,11,2,11,2,11,2,27,0,6,0,0,0,5,0,9,0,10,0,8,11,2,11,2,27,27,0,1,0,0,0,5,0,9,0,10,11,2,0,2,0,7,0,8,11,2,17,27,21,16,7],[runtime[0],runtime[18],runtime[24],runtime[28],runtime[37],runtime[55],runtime[57],0,3,1,2],[[0,1,0]],[[0,0]]]),
            # Compound
            '(1+â†•3) â‰¡ 1âŠ¸â†“âŒ¾(@âŠ¢Â·âŠ‘<)â†•4'                                  :(1, [[0,11,0,5,16,0,1,0,6,20,0,3,0,12,21,0,8,0,4,0,7,0,9,27,27,16,0,2,0,10,0,5,16,0,0,0,9,17,17,7],[runtime[0],runtime[12],runtime[18],runtime[21],runtime[27],runtime[28],runtime[37],runtime[55],runtime[57],1,3,4,'\0'],[[0,1,0]],[[0,0]]]),
            '"210abc" â‰¡ âŒ½âŒ¾((2Ã·Ëœâ‰ )âŠ¸â†‘)"012abc"'                         :(1, [[0,10,0,3,0,6,0,1,0,5,0,0,26,0,8,21,27,0,7,0,4,27,16,0,2,0,9,17,7],[runtime[3],runtime[14],runtime[18],runtime[26],runtime[31],runtime[45],runtime[55],runtime[57],2,bqnstr("210abc"),bqnstr("012abc")],[[0,1,0]],[[0,0]]]),
            '"bac"â€¿\'d\' â‰¡ âŒ½âŒ¾(2â†‘âŠ‘)"abc"â€¿\'d\''                        :(1, [[0,8,0,6,11,2,0,3,0,1,0,5,21,0,4,0,2,27,16,0,0,0,7,0,6,11,2,17,7],[runtime[18],runtime[26],runtime[31],runtime[37],runtime[57],2,'d',bqnstr("bac"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(âŒ½Â¨âŒ¾(<2â€¿3âŠ¸âŠ) â‰¡ âŒ½âŒ¾(2â€¿3âŠ¸âŠ)) "abcdef"'                      :(1, [[0,9,0,3,0,5,0,7,0,8,11,2,27,0,6,0,2,27,0,1,0,3,0,5,0,7,0,8,11,2,27,0,0,20,0,6,0,4,0,2,26,27,21,16,7],[runtime[12],runtime[18],runtime[31],runtime[36],runtime[47],runtime[55],runtime[57],2,3,bqnstr("abcdef")],[[0,1,0]],[[0,0]]]),
            '"bdca" â‰¡ 1âŠ¸âŒ½âŒ¾(1â€¿3â€¿0Ë™âŠâŠ¢)"abcd"'                           :(1, [[0,11,0,1,0,3,0,4,0,7,0,8,0,9,11,3,26,21,0,6,0,2,0,5,0,7,27,27,16,0,0,0,10,17,7],[runtime[18],runtime[21],runtime[31],runtime[36],runtime[44],runtime[55],runtime[57],1,3,0,bqnstr("bdca"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            # Multi-source
            'âŸ¨3â€¿\'b\',\'a\'âŸ© â‰¡ âŒ½âŒ¾(âŠ‘âˆ˜âŠ‘â‹ˆ1âŠ¸âŠ‘)"ab"â€¿3'                     :(1, [[0,11,0,7,11,2,0,3,0,5,0,8,27,0,1,0,3,0,4,0,3,27,21,0,6,0,2,27,16,0,0,0,7,0,9,11,2,0,10,11,2,17,7],[runtime[18],runtime[25],runtime[31],runtime[37],runtime[53],runtime[55],runtime[57],3,1,'b','a',bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '(4â€¿3â‹ˆâŠ¸âˆ¾"ba") â‰¡ âŒ½âŒ¾(âŠ‘â‹ˆÂ·âŒ½1âŠ¸â†“)"ab"â€¿3â€¿4'                      :(1, [[0,12,0,9,0,8,11,3,0,3,0,6,0,10,27,0,4,20,0,2,0,5,21,0,7,0,4,27,16,0,0,0,11,0,1,0,6,0,2,27,0,8,0,9,11,2,17,17,7],[runtime[18],runtime[23],runtime[25],runtime[27],runtime[31],runtime[37],runtime[55],runtime[57],4,3,1,bqnstr("ba"),bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            'âŸ¨"ba"âŸ© â‰¡ 2âŠ¸âŒ½âŒ¾(âŠ‘âˆ¾âŒ½âˆ˜âŠ‘)âŸ¨"ab"âŸ©'                              :(1, [[0,9,11,1,0,3,0,4,0,2,27,0,1,0,3,21,0,6,0,2,0,5,0,7,27,27,16,0,0,0,8,11,1,17,7],[runtime[18],runtime[23],runtime[31],runtime[37],runtime[53],runtime[55],runtime[57],2,bqnstr("ba"),bqnstr("ab")],[[0,1,0]],[[0,0]]]),
            '"hg"â€¿"fed"â€¿""â€¿"cba" â‰¡ âŒ½âŒ¾âˆ¾"ab"â€¿"cde"â€¿""â€¿"fgh"'            :(1, [[0,8,0,9,0,6,0,10,11,4,0,1,0,3,0,2,27,16,0,0,0,4,0,5,0,6,0,7,11,4,17,7],[runtime[18],runtime[23],runtime[31],runtime[57],bqnstr("hg"),bqnstr("fed"),bqnstr(""),bqnstr("cba"),bqnstr("ab"),bqnstr("cde"),bqnstr("fgh")],[[0,1,0]],[[0,0]]]),
            '"ab"â€¿"gde"â€¿""â€¿"fch" â‰¡ âŒ½âŒ¾(2â€¿4â€¿6âŠâˆ¾)"ab"â€¿"cde"â€¿""â€¿"fgh"'    :(1, [[0,8,0,12,0,10,0,13,11,4,0,1,0,3,0,5,0,6,0,7,11,3,21,0,4,0,2,27,16,0,0,0,8,0,9,0,10,0,11,11,4,17,7],[runtime[18],runtime[23],runtime[31],runtime[36],runtime[57],2,4,6,bqnstr("ab"),bqnstr("gde"),bqnstr(""),bqnstr("fch"),bqnstr("cde"),bqnstr("fgh")],[[0,1,0]],[[0,0]]]),
            '"ac"â€¿"bd" â‰¡ â‰âŒ¾>"ab"â€¿"cd"'                                :(1, [[0,6,0,7,11,2,0,0,0,3,0,2,27,16,0,1,0,4,0,5,11,2,17,7],[runtime[13],runtime[18],runtime[32],runtime[57],bqnstr("ac"),bqnstr("bd"),bqnstr("ab"),bqnstr("cd")],[[0,1,0]],[[0,0]]]),
            '"aed"â€¿"cb" â‰¡ âŒ½âŒ¾(âˆ¾âŒ½) "abc"â€¿"de"'                          :(1, [[0,6,0,7,11,2,0,2,0,1,20,0,3,0,2,27,16,0,0,0,4,0,5,11,2,17,7],[runtime[18],runtime[23],runtime[31],runtime[57],bqnstr("aed"),bqnstr("cb"),bqnstr("abc"),bqnstr("de")],[[0,1,0]],[[0,0]]]),
            '-Â´âŒ¾(âŠ‘Â¨) "abc"â€¿"de"'                                      :(BQNError, [[0,5,0,6,11,2,0,2,0,1,26,0,4,0,3,0,0,26,27,16,7],[runtime[1],runtime[37],runtime[47],runtime[50],runtime[57],bqnstr("abc"),bqnstr("de")],[[0,1,0]],[[0,0]]]),
            '"dbc"â€¿"ae" â‰¡ âŒ½âŒ¾(âŠ‘Â¨) "abc"â€¿"de"'                          :(1, [[0,7,0,8,11,2,0,3,0,2,26,0,4,0,1,27,16,0,0,0,5,0,6,11,2,17,7],[runtime[18],runtime[31],runtime[37],runtime[47],runtime[57],bqnstr("dbc"),bqnstr("ae"),bqnstr("abc"),bqnstr("de")],[[0,1,0]],[[0,0]]]),
            '"aec"â€¿"db" â‰¡ âŒ½âŒ¾(1âŠ‘Â¨âŠ¢) "abc"â€¿"de"'                        :(1, [[0,9,0,10,11,2,0,1,0,4,0,3,26,0,6,21,0,5,0,2,27,16,0,0,0,7,0,8,11,2,17,7],[runtime[18],runtime[21],runtime[31],runtime[37],runtime[47],runtime[57],1,bqnstr("aec"),bqnstr("db"),bqnstr("abc"),bqnstr("de")],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ¨2â€¿1â€¿2â€¿3,1â€¿2â€¿3,0â€¿3âŸ©âŸ© â‰¡ âŒ½Â¨âŒ¾(âŠ‘Â¨Â¨) â‹ˆ3â†‘â†“â†•4'                 :(1, [[0,13,0,4,16,0,3,16,0,2,0,11,17,0,1,16,0,7,0,7,0,6,26,26,0,8,0,7,0,5,26,27,16,0,0,0,9,0,10,0,9,0,11,11,4,0,10,0,9,0,11,11,3,0,12,0,11,11,2,11,3,11,1,17,7],[runtime[18],runtime[25],runtime[26],runtime[27],runtime[28],runtime[31],runtime[37],runtime[47],runtime[57],2,1,3,0,4],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ¨2â€¿1â€¿2â€¿3,1â€¿2â€¿3,0â€¿3âŸ©âŸ© â‰¡ âŒ½Â¨âŒ¾(âŠ‘âš‡Â¯2) â‹ˆ3â†‘â†“â†•4'                :(1, [[0,15,0,4,16,0,3,16,0,2,0,12,17,0,1,16,0,14,0,9,0,6,27,0,8,0,7,0,5,26,27,16,0,0,0,10,0,11,0,10,0,12,11,4,0,11,0,10,0,12,11,3,0,13,0,12,11,2,11,3,11,1,17,7],[runtime[18],runtime[25],runtime[26],runtime[27],runtime[28],runtime[31],runtime[37],runtime[47],runtime[57],runtime[61],2,1,3,0,-2,4],[[0,1,0]],[[0,0]]]),
            '"dbe"â€¿"ac" â‰¡ âŒ½Ë˜âŒ¾(0â€¿Â¯1âŠ‘âŒœâŠ¢) "abc"â€¿"de"'                    :(1, [[0,11,0,12,11,2,0,1,0,5,0,3,26,0,7,0,8,11,2,21,0,6,0,4,0,2,26,27,16,0,0,0,9,0,10,11,2,17,7],[runtime[18],runtime[21],runtime[31],runtime[37],runtime[46],runtime[48],runtime[57],0,-1,bqnstr("dbe"),bqnstr("ac"),bqnstr("abc"),bqnstr("de")],[[0,1,0]],[[0,0]]]),
            '"dbe"â€¿"ac" â‰¡ âŒ½âŒ¾(0â€¿Â¯1âŠâš‡âˆâ€¿Â¯1âŠ¢) "abc"â€¿"de"'                 :(1, [[0,11,0,12,11,2,0,1,0,8,0,7,11,2,0,5,0,3,27,0,6,0,7,11,2,21,0,4,0,2,27,16,0,0,0,9,0,10,11,2,17,7],[runtime[18],runtime[21],runtime[31],runtime[36],runtime[57],runtime[61],0,-1,math.inf,bqnstr("dbe"),bqnstr("ac"),bqnstr("abc"),bqnstr("de")],[[0,1,0]],[[0,0]]]),
            '("bac"â‰"def") â‰¡ âŒ½Ë˜âŒ¾((-âŸœ1Â¨â‰¢)âŠ¸â†‘) "abc"â‰"def"'              :(1, [[0,13,0,3,0,14,17,0,4,0,8,0,2,0,7,0,11,0,9,0,0,27,26,20,27,0,10,0,6,0,5,26,27,16,0,1,0,13,0,3,0,12,17,17,7],[runtime[1],runtime[18],runtime[19],runtime[24],runtime[26],runtime[31],runtime[46],runtime[47],runtime[55],runtime[56],runtime[57],1,bqnstr("bac"),bqnstr("def"),bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '"acbd" â‰¡ â‰âŒ¾(>2âŠ¸â†‘â‹ˆ2âŠ¸â†“) "abcd"'                            :(1, [[0,10,0,4,0,6,0,8,27,0,2,0,3,0,6,0,8,27,21,0,0,20,0,7,0,5,27,16,0,1,0,9,17,7],[runtime[13],runtime[18],runtime[25],runtime[26],runtime[27],runtime[32],runtime[55],runtime[57],2,bqnstr("acbd"),bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '("dbc"â‰"aef") â‰¡ âŒ½âŒ¾(âŠË˜) "abc"â‰"def"'                      :(1, [[0,9,0,1,0,8,17,0,4,0,3,26,0,5,0,2,27,16,0,0,0,7,0,1,0,6,17,17,7],[runtime[18],runtime[24],runtime[31],runtime[36],runtime[46],runtime[57],bqnstr("dbc"),bqnstr("aef"),bqnstr("abc"),bqnstr("def")],[[0,1,0]],[[0,0]]]),
            '("aef"â‰"dbc") â‰¡ âŒ½âŒ¾(2â€¿1âŠâ‰1âŠ¢) "abc"â‰"def"'                 :(1, [[0,12,0,2,0,11,17,0,1,0,8,0,6,0,4,27,0,7,0,8,11,2,21,0,5,0,3,27,16,0,0,0,10,0,2,0,9,17,17,7],[runtime[18],runtime[21],runtime[24],runtime[31],runtime[36],runtime[57],runtime[60],2,1,bqnstr("aef"),bqnstr("dbc"),bqnstr("abc"),bqnstr("def")],[[0,1,0]],[[0,0]]]),
            '("abe"â‰"dcf") â‰¡ âŒ½âŒ¾(2â€¿1âŠâ‰Â¯1âŠ¢) "abc"â‰"def"'                :(1, [[0,13,0,2,0,12,17,0,1,0,9,0,6,0,4,27,0,7,0,8,11,2,21,0,5,0,3,27,16,0,0,0,11,0,2,0,10,17,17,7],[runtime[18],runtime[21],runtime[24],runtime[31],runtime[36],runtime[57],runtime[60],2,1,-1,bqnstr("abe"),bqnstr("dcf"),bqnstr("abc"),bqnstr("def")],[[0,1,0]],[[0,0]]]),
            '("aef"â‰"dbc") â‰¡ âŒ½âŒ¾(2â€¿1âŠâ‰(-Ëœâ—‹=)âŠ¢) "abc"â‰"def"'            :(1, [[0,16,0,4,0,15,17,0,3,0,1,0,8,0,7,0,0,26,27,0,10,0,6,27,0,11,0,12,11,2,21,0,9,0,5,27,16,0,2,0,14,0,4,0,13,17,17,7],[runtime[1],runtime[15],runtime[18],runtime[21],runtime[24],runtime[31],runtime[36],runtime[45],runtime[54],runtime[57],runtime[60],2,1,bqnstr("aef"),bqnstr("dbc"),bqnstr("abc"),bqnstr("def")],[[0,1,0]],[[0,0]]]),
            '"32sdlf"â€¿"10qd" â‰¡ âŒ½âŒ¾(âˆ¾2âŠ¸â†‘Â¨) "01sdlf"â€¿"23qd"'             :(1, [[0,10,0,11,11,2,0,4,0,2,0,5,0,7,27,26,0,1,20,0,6,0,3,27,16,0,0,0,8,0,9,11,2,17,7],[runtime[18],runtime[23],runtime[26],runtime[31],runtime[47],runtime[55],runtime[57],2,bqnstr("32sdlf"),bqnstr("10qd"),bqnstr("01sdlf"),bqnstr("23qd")],[[0,1,0]],[[0,0]]]),
            # Fills
            'âŒ½âŒ¾(1â†“4â†‘âŠ¢)"abc"'                                          :(BQNError, [[0,7,0,0,0,1,0,6,21,0,2,0,5,21,0,4,0,3,27,16,7],[runtime[21],runtime[26],runtime[27],runtime[31],runtime[57],1,4,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            # Computational
            '1âŠ¸+âŒ¾-4'              :(3, [[0,5,0,1,0,3,0,0,0,2,0,4,27,27,16,7],[runtime[0],runtime[1],runtime[55],runtime[57],1,4],[[0,1,0]],[[0,0]]]),
            'âŒŠ0.5+ 4+âŒ¾(â‹†â¼)5'      :(20, [[0,7,0,3,0,1,26,0,4,0,0,27,0,6,17,0,0,0,5,17,0,2,16,7],[runtime[0],runtime[4],runtime[6],runtime[49],runtime[57],0.5,4,5],[[0,1,0]],[[0,0]]]),
            'âŠ¢âŒ¾2 3'               :(2, [[0,3,0,2,0,1,0,0,27,16,7],[runtime[21],runtime[57],2,3],[[0,1,0]],[[0,0]]]),
            'âŠ¢âŒ¾(2âˆ˜-) 3'           :(-2, [[0,5,0,0,0,2,0,4,27,0,3,0,1,27,16,7],[runtime[1],runtime[21],runtime[53],runtime[57],2,3],[[0,1,0]],[[0,0]]]),
            'âˆ˜â€¿+ â‰¡ âŠ¢âŒ¾âˆ˜â€¿+ 1'       :(1, [[0,5,0,3,0,0,11,2,0,4,0,2,27,16,0,1,0,3,0,0,11,2,17,7],[runtime[0],runtime[18],runtime[21],runtime[53],runtime[57],1],[[0,1,0]],[[0,0]]]),
            'Ã·âŸœ2âŒ¾(â‹†â¼1-ËœÃ·) 0.5'    :(0.5, [[0,9,0,1,0,3,0,0,26,0,8,21,0,4,0,2,26,20,0,6,0,7,0,5,0,1,27,27,16,7],[runtime[1],runtime[3],runtime[4],runtime[45],runtime[49],runtime[56],runtime[57],2,1,0.5],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on

    def test_undo(self):
        """https://github.com/mlochbaum/BQN/blob/ea6597c92f75320319cd7366423c2c97b7e2d3e4/test/cases/undo.bqn"""
        runtime = self.runtime
        # fmt: off
        self.runcases({
            # Data
            "âˆ§Â´{ğ•©â‰¡ğ•©â¼ğ•©}Â¨âŸ¨Â¯âˆ,3,@,'â¼',â†•4âŸ©"               :(1, [[0,6,0,7,0,9,0,10,0,8,0,2,16,11,5,0,3,1,1,26,16,0,5,0,0,26,16,7,32,0,1,0,4,32,0,1,26,16,0,1,34,0,1,17,7],[runtime[10],runtime[18],runtime[28],runtime[47],runtime[49],runtime[50],-math.inf,3,4,'\0','â¼'],[[0,1,0],[0,0,1]],[[0,0],[28,3]]]),
            '3â¼4'                                     :(BQNError, [[0,2,0,0,0,1,26,16,7],[runtime[49],3,4],[[0,1,0]],[[0,0]]]),
            '2â€¿3â¼2â€¿3.1'                               :(BQNError, [[0,1,0,3,11,2,0,0,0,1,0,2,11,2,26,16,7],[runtime[49],2,3,3.1],[[0,1,0]],[[0,0]]]),
            # Primitives
            'âˆ§Â´ {(ğ•â‰¡ğ•â¼)ğ•©}âŸœÂ¯0.3â€¿0â€¿8Â¨ +â€¿-â€¿Ã·â€¿Â¬â€¿âŠ¢â€¿âŠ£â€¿âŒ½'    :(1, [[0,0,0,1,0,2,0,3,0,7,0,6,0,8,11,7,0,9,0,13,0,14,0,15,11,3,0,12,1,1,27,26,16,0,11,0,4,26,16,7,34,0,1,0,10,32,0,2,26,0,5,34,0,2,21,16,7],[runtime[0],runtime[1],runtime[3],runtime[9],runtime[10],runtime[18],runtime[20],runtime[21],runtime[31],runtime[47],runtime[49],runtime[50],runtime[56],-0.3,0,8],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[40,3]]]),
            "-â¼ 'a'"                                  :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[1],runtime[49],'a'],[[0,1,0]],[[0,0]]]),
            'Ã—â¼ 5'                                    :(BQNError, [[0,2,0,1,0,0,26,16,7],[runtime[2],runtime[49],5],[[0,1,0]],[[0,0]]]),
            '(âˆšâˆšâ¼)âŠ¸â‰¡ 0â€¿0.4â€¿Ï€â€¿1e9â€¿âˆ'                   :(1, [[0,4,0,5,0,6,0,7,0,8,11,5,0,1,0,3,0,2,0,0,26,0,0,20,27,16,7],[runtime[5],runtime[18],runtime[49],runtime[55],0,0.4,3.141592653589793,1000000000,math.inf],[[0,1,0]],[[0,0]]]),
            '(â‹†â¼â‹†)âŠ¸â‰¡ â†•4'                              :(1, [[0,5,0,2,16,0,1,0,4,0,0,0,3,0,0,26,20,27,16,7],[runtime[4],runtime[18],runtime[28],runtime[49],runtime[55],4],[[0,1,0]],[[0,0]]]),
            '1eÂ¯14>|1-â‹†+Â´â‹†â¼1(âŠ¢Ã·Â«)1+â†•11'               :(1, [[0,13,0,7,16,0,0,0,12,17,0,8,0,2,0,6,21,0,12,17,0,9,0,3,26,16,0,10,0,0,26,16,0,3,16,0,1,0,12,17,0,4,16,0,5,0,11,17,7],[runtime[0],runtime[1],runtime[3],runtime[4],runtime[8],runtime[13],runtime[21],runtime[28],runtime[29],runtime[49],runtime[50],1e-14,1,11],[[0,1,0]],[[0,0]]]),
            'âˆ§Â´ {ğ•©â‰¡6ğ•6ğ•â¼ğ•©}âŸœ1â€¿2â€¿3Â¨ +â€¿-â€¿Ã—â€¿Ã·â€¿âˆšâ€¿âˆ§â€¿Â¬â€¿âŠ¢'    :(1, [[0,0,0,1,0,2,0,3,0,4,0,6,0,5,0,8,11,8,0,9,0,14,0,15,0,16,11,3,0,12,1,1,27,26,16,0,11,0,6,26,16,7,32,0,1,0,10,32,0,2,26,0,13,17,34,0,2,0,13,17,0,7,34,0,1,17,7],[runtime[0],runtime[1],runtime[2],runtime[3],runtime[5],runtime[9],runtime[10],runtime[18],runtime[21],runtime[47],runtime[49],runtime[50],runtime[56],6,1,2,3],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[42,3]]]),
            "'a' â‰¡ 3+â¼'d'"                            :(1, [[0,5,0,2,0,0,26,0,3,17,0,1,0,4,17,7],[runtime[0],runtime[18],runtime[49],3,'a','d'],[[0,1,0]],[[0,0]]]),
            "'d'-â¼'a'"                                :(3, [[0,3,0,1,0,0,26,0,2,17,7],[runtime[1],runtime[49],'d','a'],[[0,1,0]],[[0,0]]]),
            '0.3â€¿1.01â€¿Ï€(â‹†â¼âŒœâ‰¡Ã·ËœâŒœâ—‹(â‹†â¼))0â€¿2â€¿5.6â€¿âˆ'       :(1, [[0,10,0,11,0,12,0,13,11,4,0,5,0,1,26,0,6,0,4,0,3,0,0,26,26,27,0,2,0,4,0,5,0,1,26,26,21,0,7,0,8,0,9,11,3,17,7],[runtime[3],runtime[4],runtime[18],runtime[45],runtime[48],runtime[49],runtime[54],0.3,1.01,3.141592653589793,0,2,5.6,math.inf],[[0,1,0]],[[0,0]]]),
            '(âŠ¢â‰¡âŠ£â¼Ëœ)"abcd"'                           :(1, [[0,5,0,3,0,4,0,1,26,26,0,0,0,2,21,16,7],[runtime[18],runtime[20],runtime[21],runtime[45],runtime[49],bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '"ab"âŠ£â¼"ac"'                              :(BQNError, [[0,3,0,1,0,0,26,0,2,17,7],[runtime[20],runtime[49],bqnstr("ab"),bqnstr("ac")],[[0,1,0]],[[0,0]]]),
            '(<â¼<)Â¨âŠ¸â‰¡âŸ¨0,âŸ¨âŸ©,"abc"âŸ©'                    :(1, [[0,5,11,0,0,6,11,3,0,1,0,4,0,2,0,0,0,3,0,0,26,20,26,27,16,7],[runtime[12],runtime[18],runtime[47],runtime[49],runtime[55],0,bqnstr("abc")],[[0,1,0]],[[0,0]]]),
            '(/â¼/)âŠ¸â‰¡1â€¿0â€¿2â€¿4'                          :(1, [[0,4,0,5,0,6,0,7,11,4,0,0,0,3,0,1,0,2,0,1,26,20,27,16,7],[runtime[18],runtime[33],runtime[49],runtime[55],1,0,2,4],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ©â‰¡/â¼âŸ¨âŸ©'                                 :(1, [[11,0,0,2,0,1,26,16,0,0,11,0,17,7],[runtime[18],runtime[33],runtime[49]],[[0,1,0]],[[0,0]]]),
            '(3âŠ¸âŒ½â‰¡2âŒ½â¼âŠ¢)â†•5'                            :(1, [[0,8,0,2,16,0,1,0,4,0,3,26,0,7,21,0,0,0,3,0,5,0,6,27,21,16,7],[runtime[18],runtime[21],runtime[28],runtime[31],runtime[49],runtime[55],3,2,5],[[0,1,0]],[[0,0]]]),
            '((â‰¢â‰â¼)â‰¡Â¯1âŒ½â‰¢)â†•â†•4'                         :(1, [[0,7,0,2,16,0,2,16,0,1,0,3,0,6,21,0,0,0,5,0,4,26,0,1,20,21,16,7],[runtime[18],runtime[19],runtime[28],runtime[31],runtime[32],runtime[49],-1,4],[[0,1,0]],[[0,0]]]),
            'â‰¡Â´â‰âŸÂ¯1â€¿2â¥ŠâŸœ(â†•Ã—Â´)2â€¿3â€¿3'                    :(1, [[0,9,0,10,0,10,11,3,0,5,0,0,26,0,3,20,0,6,0,2,27,16,0,8,0,9,11,2,0,7,0,4,27,16,0,5,0,1,26,16,7],[runtime[2],runtime[18],runtime[22],runtime[28],runtime[32],runtime[50],runtime[56],runtime[62],-1,2,3],[[0,1,0]],[[0,0]]]),
            '2â€¿1(âŠ¢â‰¡âŠ£â‰â‰â¼)â¥ŠâŸœ(â†•Ã—Â´)2â€¿3â€¿1â€¿4'               :(1, [[0,10,0,12,0,11,0,13,11,4,0,8,0,0,26,0,5,20,0,9,0,4,27,16,0,7,0,6,26,0,6,0,2,21,0,1,0,3,21,0,10,0,11,11,2,17,7],[runtime[2],runtime[18],runtime[20],runtime[21],runtime[22],runtime[28],runtime[32],runtime[49],runtime[50],runtime[56],2,1,3,4],[[0,1,0]],[[0,0]]]),
            # Self/Swap
            'âˆ§Â´ {6(ğ•Ëœâ¼â‰¡ğ•â¼)ğ•©}âŸœÂ¯0.8â€¿0â€¿3Â¨ +â€¿Ã—â€¿âˆ§'         :(1, [[0,0,0,1,0,2,11,3,0,5,0,10,0,11,0,12,11,3,0,8,1,1,27,26,16,0,7,0,2,26,16,7,34,0,1,0,6,32,0,2,26,0,3,0,6,0,4,34,0,2,26,26,21,0,9,17,7],[runtime[0],runtime[2],runtime[10],runtime[18],runtime[45],runtime[47],runtime[49],runtime[50],runtime[56],6,-0.8,0,3],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[32,3]]]),
            '+Ëœâ¼7'                                    :(3.5, [[0,3,0,2,0,1,0,0,26,26,16,7],[runtime[0],runtime[45],runtime[49],7],[[0,1,0]],[[0,0]]]),
            'âˆ¨Ëœâ¼0.75'                                 :(0.5, [[0,3,0,2,0,1,0,0,26,26,16,7],[runtime[11],runtime[45],runtime[49],0.75],[[0,1,0]],[[0,0]]]),
            '+Â´âˆŠâŸ¨âˆš,Ã—Ëœâ¼,âˆ§Ëœâ¼âŸ©{ğ•ğ•©}âŒœ0â€¿2â€¿âˆ'                :(1, [[0,9,0,10,0,11,11,3,0,6,1,1,26,0,2,0,7,0,5,0,1,26,26,0,7,0,5,0,3,26,26,11,3,17,0,4,16,0,8,0,0,26,16,7,34,0,1,34,0,2,16,7],[runtime[0],runtime[2],runtime[5],runtime[10],runtime[40],runtime[45],runtime[48],runtime[49],runtime[50],0,2,math.inf],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[44,3]]]),
            'âˆ§Â´ -â€¿Ã·â€¿â‹† {3(ğ•Ëœâ¼â‰¡ğ•)2â€¿Ï€âˆ¾â‹†2}Â¨ +â€¿Ã—â€¿âˆš'        :(1, [[0,0,0,2,0,5,11,3,0,10,1,1,26,0,1,0,3,0,4,11,3,17,0,12,0,6,26,16,7,0,14,0,4,16,0,8,0,14,0,15,11,2,17,34,0,1,0,7,0,11,0,9,34,0,2,26,26,21,0,13,17,7],[runtime[0],runtime[1],runtime[2],runtime[3],runtime[4],runtime[5],runtime[10],runtime[18],runtime[23],runtime[45],runtime[47],runtime[49],runtime[50],3,2,3.141592653589793],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[29,3]]]),
            '16âˆšËœâ¼2'                                  :(4, [[0,4,0,2,0,1,0,0,26,26,0,3,17,7],[runtime[5],runtime[45],runtime[49],16,2],[[0,1,0]],[[0,0]]]),
            '4â€¿2â€¿0(Â¬Ëœâ¼â‰¡Â¯1++)1â€¿2â€¿9'                    :(1, [[0,9,0,6,0,10,11,3,0,0,0,0,0,8,21,0,2,0,4,0,3,0,1,26,26,21,0,5,0,6,0,7,11,3,17,7],[runtime[0],runtime[9],runtime[18],runtime[45],runtime[49],4,2,0,-1,1,9],[[0,1,0]],[[0,0]]]),
            # Mapping and scan
            '-Â¨â¼ 2'                                   :(BQNError, [[0,3,0,2,0,1,0,0,26,26,16,7],[runtime[1],runtime[47],runtime[49],2],[[0,1,0]],[[0,0]]]),
            '-âŒœâ¼ 2'                                   :(BQNError, [[0,3,0,2,0,1,0,0,26,26,16,7],[runtime[1],runtime[48],runtime[49],2],[[0,1,0]],[[0,0]]]),
            '-Ë˜â¼ 2'                                   :(BQNError, [[0,3,0,2,0,1,0,0,26,26,16,7],[runtime[1],runtime[46],runtime[49],2],[[0,1,0]],[[0,0]]]),
            '-Ë˜â¼ <2'                                  :(BQNError, [[0,4,0,1,16,0,3,0,2,0,0,26,26,16,7],[runtime[1],runtime[12],runtime[46],runtime[49],2],[[0,1,0]],[[0,0]]]),
            '-`â¼ 2'                                   :(BQNError, [[0,3,0,1,0,2,0,0,26,26,16,7],[runtime[1],runtime[49],runtime[52],2],[[0,1,0]],[[0,0]]]),
            '0-Â´â¼ 2'                                  :(BQNError, [[0,4,0,1,0,2,0,0,26,26,0,3,17,7],[runtime[1],runtime[49],runtime[50],0,2],[[0,1,0]],[[0,0]]]),
            '(âˆ¾Ëœ â‰¡ Â·(<âŒœâ¼âˆ¾<Â¨â¼)<Â¨) "abcd"'              :(1, [[0,7,0,4,0,0,26,0,6,0,4,0,0,26,26,0,2,0,6,0,5,0,0,26,26,21,20,0,1,0,3,0,2,26,21,16,7],[runtime[12],runtime[18],runtime[23],runtime[45],runtime[47],runtime[48],runtime[49],bqnstr("abcd")],[[0,1,0]],[[0,0]]]),
            '"ab"â€¿"abc"â‰¡1âŒ½â¼Â¨"ba"â€¿"bca"'               :(1, [[0,7,0,8,11,2,0,2,0,3,0,1,26,26,0,4,17,0,0,0,5,0,6,11,2,17,7],[runtime[18],runtime[31],runtime[47],runtime[49],1,bqnstr("ab"),bqnstr("abc"),bqnstr("ba"),bqnstr("bca")],[[0,1,0]],[[0,0]]]),
            '(2-=âŒœËœâ†•2)â‰¡/Ë˜â¼0â€¿1â€¿1â‰0â€¿0â€¿1'                :(1, [[0,11,0,11,0,12,11,3,0,3,0,11,0,12,0,12,11,3,17,0,9,0,7,0,5,26,26,16,0,2,0,10,0,4,16,0,6,0,8,0,1,26,26,16,0,0,0,10,17,17,7],[runtime[1],runtime[15],runtime[18],runtime[24],runtime[28],runtime[33],runtime[45],runtime[46],runtime[48],runtime[49],2,0,1],[[0,1,0]],[[0,0]]]),
            '2(âŒ½Ë˜â¼â‰¡Â·â‰âŒ½â¼âŸœâ‰)â‰"abcde"'                   :(1, [[0,8,0,1,16,0,3,0,6,0,5,0,2,26,27,0,3,20,0,0,0,5,0,4,0,2,26,26,21,0,7,17,7],[runtime[18],runtime[24],runtime[31],runtime[32],runtime[46],runtime[49],runtime[56],2,bqnstr("abcde")],[[0,1,0]],[[0,0]]]),
            '(4â¥Š1) â‰¡ +`â¼ 1+â†•4'                        :(1, [[0,6,0,3,16,0,0,0,7,17,0,4,0,5,0,0,26,26,16,0,1,0,7,0,2,0,6,17,17,7],[runtime[0],runtime[18],runtime[22],runtime[28],runtime[49],runtime[52],4,1],[[0,1,0]],[[0,0]]]),
            'âŸ¨âŸ© â‰¡ !`â¼âŸ¨âŸ©'                              :(1, [[11,0,0,2,0,3,0,1,26,26,16,0,0,11,0,17,7],[runtime[18],runtime[43],runtime[49],runtime[52]],[[0,1,0]],[[0,0]]]),
            '(-âŸœÂ» â‰¡ +`â¼) 2|âŒŠÃ—âŒœËœÏ€+â†•5'                  :(1, [[0,15,0,6,16,0,0,0,14,17,0,8,0,9,0,2,26,26,16,0,3,16,0,4,0,13,17,0,10,0,11,0,0,26,26,0,5,0,7,0,12,0,1,27,21,16,7],[runtime[0],runtime[1],runtime[2],runtime[6],runtime[8],runtime[18],runtime[28],runtime[30],runtime[45],runtime[48],runtime[49],runtime[52],runtime[56],2,3.141592653589793,5],[[0,1,0]],[[0,0]]]),
            '(5â¥Š2)â‰¡2Ã·`â¼2â‹†-â†•5'                         :(1, [[0,8,0,5,16,0,0,16,0,2,0,9,17,0,6,0,7,0,1,26,26,0,9,17,0,3,0,9,0,4,0,8,17,17,7],[runtime[1],runtime[3],runtime[4],runtime[18],runtime[22],runtime[28],runtime[49],runtime[52],5,2],[[0,1,0]],[[0,0]]]),
            '(0â€¿1â€¿1Ã—âŒœâ¥ŠËœ4)â‰¡(â†•4)+`â¼3â€¿4â¥Šâ†•12'             :(1, [[0,13,0,4,16,0,3,0,12,0,11,11,2,17,0,7,0,8,0,0,26,26,0,11,0,4,16,17,0,2,0,11,0,5,0,3,26,16,0,6,0,1,26,0,9,0,10,0,10,11,3,17,17,7],[runtime[0],runtime[2],runtime[18],runtime[22],runtime[28],runtime[45],runtime[48],runtime[49],runtime[52],0,1,4,3,12],[[0,1,0]],[[0,0]]]),
            '(â†•3)+`â¼3â€¿4â¥Šâ†•12'                          :(BQNError, [[0,7,0,2,16,0,1,0,5,0,6,11,2,17,0,3,0,4,0,0,26,26,0,5,0,2,16,17,7],[runtime[0],runtime[22],runtime[28],runtime[49],runtime[52],3,4,12],[[0,1,0]],[[0,0]]]),
            # Composition
            '(Ã·Â¬)â¼ 4'                                 :(0.75, [[0,3,0,2,0,1,0,0,20,26,16,7],[runtime[3],runtime[9],runtime[49],4],[[0,1,0]],[[0,0]]]),
            'âŠ¢âˆ˜âˆšâ¼ 2'                                  :(4, [[0,4,0,2,0,0,0,3,0,1,27,26,16,7],[runtime[5],runtime[21],runtime[49],runtime[53],2],[[0,1,0]],[[0,0]]]),
            '(âŒ½/1â€¿3)â‰¡(Â·+`âŒ½)â¼â†•4'                       :(1, [[0,9,0,2,16,0,5,0,3,0,6,0,0,26,20,26,16,0,1,0,7,0,8,11,2,0,4,16,0,3,16,17,7],[runtime[0],runtime[18],runtime[28],runtime[31],runtime[33],runtime[49],runtime[52],1,3,4],[[0,1,0]],[[0,0]]]),
            '(âŒ½âŠ¸/1â€¿3)â‰¡(âŒ½Â·-`âŒ½)â¼â†•4'                     :(1, [[0,10,0,2,16,0,5,0,3,0,6,0,0,26,20,0,3,20,26,16,0,1,0,8,0,9,11,2,0,4,0,7,0,3,27,16,17,7],[runtime[1],runtime[18],runtime[28],runtime[31],runtime[33],runtime[49],runtime[52],runtime[55],1,3,4],[[0,1,0]],[[0,0]]]),
            '(Â¯1â€¿0+âŒœ"BQN")â‰¡(1âŒ½â‰)â¼3â€¿2â¥Š"PQMNAB"'        :(1, [[0,13,0,2,0,10,0,11,11,2,17,0,6,0,4,0,3,0,9,21,26,16,0,1,0,12,0,5,0,0,26,0,7,0,8,11,2,17,17,7],[runtime[0],runtime[18],runtime[22],runtime[31],runtime[32],runtime[48],runtime[49],-1,0,1,3,2,bqnstr("BQN"),bqnstr("PQMNAB")],[[0,1,0]],[[0,0]]]),
            '(3Ã—Â·âˆš2+Â¬)â¼6'                             :(-1, [[0,7,0,4,0,3,0,0,0,6,21,0,2,20,0,1,0,5,21,26,16,7],[runtime[0],runtime[2],runtime[5],runtime[9],runtime[49],3,2,6],[[0,1,0]],[[0,0]]]),
            '(3âŠ¸âˆš+âŸœ7)â¼2'                              :(1, [[0,7,0,2,0,6,0,4,0,0,27,0,1,0,3,0,5,27,20,26,16,7],[runtime[0],runtime[5],runtime[49],runtime[55],runtime[56],3,7,2],[[0,1,0]],[[0,0]]]),
            '5Ã—âŸœÂ¬â¼10'                                 :(-1, [[0,5,0,2,0,1,0,3,0,0,27,26,0,4,17,7],[runtime[2],runtime[9],runtime[49],runtime[56],5,10],[[0,1,0]],[[0,0]]]),
            '(âˆš-2{ğ”½})â¼1'                              :(9, [[0,4,0,2,1,1,0,3,26,0,0,0,1,21,26,16,7,34,0,1,7],[runtime[1],runtime[5],runtime[49],2,1],[[0,1,0],[1,1,1]],[[0,0],[17,2]]]),
            '(âˆš-2Ë™)â¼1'                                :(9, [[0,5,0,3,0,2,0,4,26,0,0,0,1,21,26,16,7],[runtime[1],runtime[5],runtime[44],runtime[49],2,1],[[0,1,0]],[[0,0]]]),
            '21(1+Ã·)â¼8'                               :(3, [[0,5,0,2,0,1,0,0,0,4,21,26,0,3,17,7],[runtime[0],runtime[3],runtime[49],21,1,8],[[0,1,0]],[[0,0]]]),
            '(2âŠ¸âŒ½ â‰¡ 2âŠ¸(-âŠ¸âŒ½)â¼)"abcde"'                 :(1, [[0,6,0,3,0,2,0,4,0,0,27,0,4,0,5,27,26,0,1,0,2,0,4,0,5,27,21,16,7],[runtime[1],runtime[18],runtime[31],runtime[49],runtime[55],2,bqnstr("abcde")],[[0,1,0]],[[0,0]]]),
            'Â¯2 Ã·Ëœâ—‹Â¬â¼ Â¯1'                             :(4, [[0,6,0,3,0,1,0,4,0,2,0,0,26,27,26,0,5,17,7],[runtime[3],runtime[9],runtime[45],runtime[49],runtime[54],-2,-1],[[0,1,0]],[[0,0]]]),
            '1eÂ¯12>|16- 2 Ã·Ëœâ—‹(â‹†â¼)â¼ 4'                 :(1, [[0,11,0,6,0,6,0,2,26,0,7,0,5,0,1,26,27,26,0,10,17,0,0,0,9,17,0,3,16,0,4,0,8,17,7],[runtime[1],runtime[3],runtime[4],runtime[8],runtime[13],runtime[45],runtime[49],runtime[54],1e-12,16,2,4],[[0,1,0]],[[0,0]]]),
            '(+`âŒ¾âŒ½â¼â‰¡+`â¼âŒ¾âŒ½) â†•4'                        :(1, [[0,7,0,2,16,0,3,0,6,0,4,0,5,0,0,26,26,27,0,1,0,4,0,3,0,6,0,5,0,0,26,27,26,21,16,7],[runtime[0],runtime[18],runtime[28],runtime[31],runtime[49],runtime[52],runtime[57],4],[[0,1,0]],[[0,0]]]),
            'Ã—ËœâŸ3â¼256'                                :(2, [[0,5,0,2,0,4,0,3,0,1,0,0,26,27,26,16,7],[runtime[2],runtime[45],runtime[49],runtime[62],3,256],[[0,1,0]],[[0,0]]]),
            'âˆšâŠ˜-{ğ•—â¼â‰¡6ğ•—â¼âŠ¢} Â¯3â€¿2'                       :(1, [[0,7,0,8,11,2,1,1,0,0,0,5,0,1,27,26,16,7,0,3,0,4,32,0,1,26,0,6,21,0,2,0,4,34,0,1,26,21,7],[runtime[1],runtime[5],runtime[18],runtime[21],runtime[49],runtime[58],6,-3,2],[[0,1,0],[1,1,1]],[[0,0],[18,2]]]),
            'âˆ§Â´ {(ğ•â‰¡ğ•â¼â¼)ğ•©}âŸœ2â€¿4â€¿1Â¨ /â€¿âŒ½â€¿<'              :(1, [[0,4,0,3,0,1,11,3,0,5,0,9,0,10,0,11,11,3,0,8,1,1,27,26,16,0,7,0,0,26,16,7,34,0,1,0,6,0,6,32,0,2,26,26,0,2,34,0,2,21,16,7],[runtime[10],runtime[12],runtime[18],runtime[31],runtime[33],runtime[47],runtime[49],runtime[50],runtime[56],2,4,1],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[32,3]]]),
            # Extensions
            '9 â‰¡ Ã—Ëœâ¼â¼ Â¯3'                             :(1, [[0,5,0,3,0,3,0,2,0,0,26,26,26,16,0,1,0,4,17,7],[runtime[2],runtime[18],runtime[45],runtime[49],9,-3],[[0,1,0]],[[0,0]]]),
            '2 â‰¡ @ {â‰ ğ•¨â€¿ğ•©}â¼â¼ Ï€'                        :(1, [[0,4,0,2,0,2,1,1,26,26,0,5,17,0,1,0,3,17,7,34,0,2,34,0,1,11,2,0,0,16,7],[runtime[14],runtime[18],runtime[49],2,3.141592653589793,'\0'],[[0,1,0],[0,0,[[],[1]]]],[[0,0],[19,3]]]),
            '0â€¿2â€¿1â€¿1 â‰¡ /â¼2â€¿3â€¿1â€¿1'                     :(1, [[0,4,0,6,0,5,0,5,11,4,0,2,0,1,26,16,0,0,0,3,0,4,0,5,0,5,11,4,17,7],[runtime[18],runtime[33],runtime[49],0,2,1,3],[[0,1,0]],[[0,0]]]),
            '(/2â€¿3) â‰¡ /â¼â¼2â€¿3â€¿0'                       :(1, [[0,3,0,4,0,5,11,3,0,2,0,2,0,1,26,26,16,0,0,0,3,0,4,11,2,0,1,16,17,7],[runtime[18],runtime[33],runtime[49],2,3,0],[[0,1,0]],[[0,0]]]),
            '(/2â€¿3) â‰¡ /âŸÂ¯1â¼2â€¿3â€¿0'                     :(1, [[0,4,0,5,0,7,11,3,0,2,0,6,0,3,0,1,27,26,16,0,0,0,4,0,5,11,2,0,1,16,17,7],[runtime[18],runtime[33],runtime[49],runtime[62],2,3,-1,0],[[0,1,0]],[[0,0]]]),
        })
        # fmt: on


if __name__ == "__main__":
    unittest.main()
